<html>

<head>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>nestJså…¥é—¨ | ç¦¾è€³</title>
<link rel="shortcut icon" href="https://qin_hu.gitee.io/blog//favicon.ico?v=1714022378479">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://qin_hu.gitee.io/blog//styles/main.css">
<link rel="alternate" type="application/atom+xml" title="nestJså…¥é—¨ | ç¦¾è€³ - Atom Feed" href="https://qin_hu.gitee.io/blog//atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  <meta name="description" content="1.NestJSç¯å¢ƒæ­å»ºå’Œé¡¹ç›®åˆ›å»º
1-1.ç®€ä»‹

NestJSæä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„åº”ç”¨ç¨‹åºæ¶æ„ï¼Œå…è®¸å¼€å‘äººå‘˜å’Œå›¢é˜Ÿåˆ›å»ºé«˜åº¦å¯æµ‹è¯•ï¼Œå¯æ‰©å±•ï¼Œæ¾æ•£è€¦åˆä¸”æ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚


å®˜æ–¹ç½‘å€ï¼šhttps://nestjs.com ä¸­æ–‡æ–‡æ¡£ï¼šhtt..." />
  <meta name="keywords" content="nodeJs" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script> -->

  <!-- and it's easy to individually load additional languages -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/night-owl.min.css">


</head>

<body>
  <div class="main">
    <div class="main-content">
      <div class="site-header">
  <a href="https://qin_hu.gitee.io/blog/">
    <img class="avatar" src="https://qin_hu.gitee.io/blog//images/avatar.png?v=1714022378479" alt="">
  </a>

  <h1 class="site-title">
    ç¦¾è€³
  </h1>
  <p class="site-description">
    é€†é£çš„æ–¹å‘ï¼Œæ›´é€‚åˆé£ç¿”ã€‚
  </p>
  <form style=" position: absolute;
  top: 50px;
  right: 150px;
  border: unset;
  outline: unset;display: flex;" id="gridea-search-form" action="https://qin_hu.gitee.io/blog//search/">
    <input placeholder="è¯·è¾“å…¥.." style="color: #222 !important;margin-right: 10px;
   " name="q" />
    <svg onclick="window.location.reload()" style="
    cursor: pointer;    filter: invert(1);" title="åˆ·æ–°é¡µé¢" class="shuaxin-icon" t="1705541456452" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
      p-id="4229" width="20" height="20">
      <path
        d="M55.935033 264.48948c0 0 85.897017-132.548409 221.81443-203.673173 135.916406-71.121743 303.368504-50.646859 413.187968 18.319527 109.819465 68.970415 146.791894 127.160016 146.791894 127.160016l94.59499-53.879895c0 0 19.576483-9.697092 19.576483 12.932142l0 338.379961c0 0 0 30.17399-22.837719 19.395191-19.210878-9.062571-226.959086-127.198289-292.424528-164.466828-35.950145-16.035251-4.365101-29.062068-4.365101-29.062068l91.284402-52.173738c0 0-52.068992-65.209619-128.278989-99.744682-81.576231-42.501826-157.948384-47.541735-251.497925-12.224097-61.002644 23.025054-132.823368 81.988166-184.553949 169.082716L55.935033 264.48948 55.935033 264.48948 55.935033 264.48948zM904.056909 711.697844c0 0-85.897017 132.550423-221.816444 203.671159-135.917413 71.12275-303.366489 50.651895-413.186961-18.315498-109.825508-68.972429-146.790886-127.165052-146.790886-127.165052L27.662591 823.768348c0 0-19.572454 9.703135-19.572454-12.932142L8.090137 472.459267c0 0 0-30.170968 22.831676-19.397205 19.211885 9.067607 226.965129 127.198289 292.430571 164.470856 35.950145 16.035251 4.366109 29.058039 4.366109 29.058039l-91.285409 52.175753c0 0 52.071006 65.206598 128.279996 99.744682 81.57321 42.498804 157.942341 47.540728 251.496918 12.222082 60.998616-23.026061 132.820346-81.983131 184.546898-169.082716L904.056909 711.697844 904.056909 711.697844 904.056909 711.697844zM904.056909 711.697844"
        fill="#2c2c2c" p-id="4230"></path>
    </svg>
  </form>
  <button style="    border: unset;
  background: #f0f8ff00;cursor: pointer;" class="theme-button" onclick="changeTheme()">
    ğŸŒ™
  </button>
  <div class="menu-container">
    
    
    <a href="https://qin_hu.gitee.io/blog/" class="menu">
      é¦–é¡µ
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/archives" class="menu">
      å½’æ¡£
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/tags" class="menu">
      æ ‡ç­¾
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/friend" class="menu">
      å‹é“¾
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/about" class="menu">
      å…³äº
    </a>
    
    
  </div>
  <div class="social-container">
    
    
    <a href="https://github.com/QinCongH" target="_blank">
      <i class="ri-github-line"></i>
    </a>
    
    
    
    
    
    
    
    
    
    
  </div>
</div>
<script>
  window.addEventListener('load', () => {
    const themeType = localStorage.getItem('theme')
    const bodyDom = document.querySelector('body')
    const themeButtonDom = document.querySelector('.theme-button')
    // console.log(1111111111111111, themeType)
    if (themeType === 'light') {
      bodyDom.removeAttribute('thmem-dark')
      themeButtonDom.textContent = 'ğŸŒ™'
      localStorage.setItem('theme', 'light')
    } else {
      bodyDom.setAttribute('thmem-dark', '')
      themeButtonDom.textContent = 'ğŸŒ'
      localStorage.setItem('theme', 'dark')
    }
  })

  function changeTheme() {
    const bodyDom = document.querySelector('body')
    const themeButtonDom = document.querySelector('.theme-button')
    const attr = bodyDom.hasAttribute('thmem-dark')
    if (attr) {
      bodyDom.removeAttribute('thmem-dark')
      themeButtonDom.textContent = 'ğŸŒ™'
      localStorage.setItem('theme', 'light')
    } else {
      bodyDom.setAttribute('thmem-dark', '')
      themeButtonDom.textContent = 'ğŸŒ'
      localStorage.setItem('theme', 'dark')
    }
  }
</script>
      <div class="post-detail">
        <article class="post">
          <h2 class="post-title">
            nestJså…¥é—¨
          </h2>
          <div class="post-info">
            <span>
              2024-01-09
            </span>
            <span>
              17 min read
            </span>
            
            <a href="https://qin_hu.gitee.io/blog/tag/E7wJE8AQv/" class="post-tag">
              # nodeJs
            </a>
            
          </div>
          
          <div class="post-content-wrapper">
            <div class="post-content" v-pre>
              <h1 id="1nestjsç¯å¢ƒæ­å»ºå’Œé¡¹ç›®åˆ›å»º">1.NestJSç¯å¢ƒæ­å»ºå’Œé¡¹ç›®åˆ›å»º</h1>
<h2 id="1-1ç®€ä»‹">1-1.ç®€ä»‹</h2>
<blockquote>
<p>NestJSæä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„åº”ç”¨ç¨‹åºæ¶æ„ï¼Œå…è®¸å¼€å‘äººå‘˜å’Œå›¢é˜Ÿåˆ›å»ºé«˜åº¦å¯æµ‹è¯•ï¼Œå¯æ‰©å±•ï¼Œæ¾æ•£è€¦åˆä¸”æ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<blockquote>
<p>å®˜æ–¹ç½‘å€ï¼šhttps://nestjs.com ä¸­æ–‡æ–‡æ¡£ï¼šhttps://www.nestjs.com.cn/</p>
</blockquote>
<h2 id="1-2é¡¹ç›®åˆ›å»º">1-2.é¡¹ç›®åˆ›å»º</h2>
<h3 id="1-2-1-å‡†å¤‡">1-2-1. å‡†å¤‡</h3>
<ul>
<li>å®‰è£…Node</li>
</ul>
<h3 id="1-2-2-åˆ›å»ºé¡¹ç›®">1-2-2. åˆ›å»ºé¡¹ç›®</h3>
<ul>
<li>å…¨å±€å®‰è£…nestjsè„šæ‰‹æ¶</li>
</ul>
<p><code>npm i -g @nestjs/cli</code></p>
<ul>
<li>è„šæ‰‹æ¶ç”Ÿæˆå¹¶å¯åŠ¨é¡¹ç›®</li>
</ul>
<pre><code>nest new nestjs-demo
cd nest-demo
npm run start
</code></pre>
<h3 id="1-2-3å¯åŠ¨é¡¹ç›®">1-2-3.å¯åŠ¨é¡¹ç›®</h3>
<p>æ‰“å¼€<code>package.json </code>æ–‡ä»¶å¯ä»¥çœ‹çš„ä¸‹é¢çš„ä»£ç </p>
<pre><code>&quot;start&quot;: &quot;nest start&quot;,                              // æœ€å¸¸ç”¨çš„å¼€å§‹æ¨¡å¼
&quot;start:dev&quot;: &quot;nest start --watch&quot;,                  // å¼€å‘æ¨¡å¼çš„å¯åŠ¨ æœ‰ç›‘è§†åŠŸèƒ½
&quot;start:debug&quot;: &quot;nest start --debug --watch&quot;,        // è°ƒè¯•Bugæ—¶çš„å¯åŠ¨ è°ƒè¯•ç¨‹åºæ—¶ä½¿ç”¨
</code></pre>
<p>ä¸€èˆ¬å¸¸ç”¨<code>npm run start:dev</code>å¯åŠ¨é¡¹ç›®ã€‚</p>
<h1 id="2é¡¹ç›®ç›®å½•ç®€ä»‹å’Œç¼–å†™helloworld">2.é¡¹ç›®ç›®å½•ç®€ä»‹å’Œç¼–å†™helloworld</h1>
<h2 id="2-1-ç›®å½•ä»‹ç»">2-1. ç›®å½•ä»‹ç»</h2>
<p>è„šæ‰‹æ¶ç”Ÿæˆçš„ç›®å½•ç»“æ„</p>
<pre><code>+-- dist[ç›®å½•]                      // ç¼–è¯‘åçš„ç›®å½•ï¼Œç”¨äºé¢„è§ˆé¡¹ç›®
+-- node_modules[ç›®å½•]              // é¡¹ç›®ä½¿ç”¨çš„åŒ…ç›®å½•ï¼Œå¼€å‘ä½¿ç”¨å’Œä¸Šçº¿ä½¿ç”¨çš„éƒ½åœ¨é‡Œè¾¹
+-- src[ç›®å½•]                       // æºæ–‡ä»¶/ä»£ç ï¼Œç¨‹åºå‘˜ä¸»è¦ç¼–å†™çš„ç›®å½•
|  +-- app.controller.spec.ts      // å¯¹äºåŸºæœ¬æ§åˆ¶å™¨çš„å•å…ƒæµ‹è¯•æ ·ä¾‹
|  +-- app.controller.ts           // æ§åˆ¶å™¨æ–‡ä»¶ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºè·¯ç”±æ–‡ä»¶
|  +-- app.module.ts               // æ¨¡å—æ–‡ä»¶ï¼Œåœ¨NestJSä¸–ç•Œé‡Œä¸»è¦æ“ä½œçš„å°±æ˜¯æ¨¡å—
|  +-- app.service.ts              // æœåŠ¡æ–‡ä»¶ï¼Œæä¾›çš„æœåŠ¡æ–‡ä»¶ï¼Œä¸šåŠ¡é€»è¾‘ç¼–å†™åœ¨è¿™é‡Œ
|  +-- app.main.ts                 // é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œé‡Œè¾¹åŒ…æ‹¬é¡¹ç›®çš„ä¸»æ¨¡å—å’Œç›‘å¬ç«¯å£å·
+-- test[ç›®å½•]                      // æµ‹è¯•æ–‡ä»¶ç›®å½•ï¼Œå¯¹é¡¹ç›®æµ‹è¯•æ—¶ä½¿ç”¨çš„ç›®å½•ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•...
|  +-- app.e2e-spec.ts             // e2eæµ‹è¯•ï¼Œç«¯å¯¹ç«¯æµ‹è¯•æ–‡ä»¶ï¼Œæµ‹è¯•æµç¨‹å’ŒåŠŸèƒ½ä½¿ç”¨
|  +-- jest-e2e.json               // jestæµ‹è¯•æ–‡ä»¶ï¼Œjsetæ˜¯ä¸€æ¬¾ç®€ä»‹çš„JavaScriptæµ‹è¯•æ¡†æ¶
+-- .eslintrc.js                   // ESlintçš„é…ç½®æ–‡ä»¶
+-- .gitignore                     // gitçš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºæ§åˆ¶å“ªäº›æ–‡ä»¶ä¸å—Gitç®¡ç†
+-- .prettierrc                    // prettieré…ç½®æ–‡ä»¶ï¼Œç”¨äºç¾åŒ–/æ ¼å¼åŒ–ä»£ç çš„
+-- nest-cli.json                  // æ•´ä¸ªé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªéœ€è¦æ ¹æ®é¡¹ç›®è¿›è¡Œä¸åŒçš„é…ç½®
+-- package-lock.json              // é˜²æ­¢ç”±äºåŒ…ä¸åŒï¼Œå¯¼è‡´é¡¹ç›®æ— æ³•å¯åŠ¨çš„é…ç½®æ–‡ä»¶ï¼Œå›ºå®šåŒ…ç‰ˆæœ¬
+-- package.json                   // é¡¹ç›®ä¾èµ–åŒ…ç®¡ç†æ–‡ä»¶å’ŒScriptæ–‡ä»¶ï¼Œæ¯”å¦‚å¦‚ä½•å¯åŠ¨é¡¹ç›®çš„å‘½ä»¤
+-- README.md                      // å¯¹é¡¹ç›®çš„æè¿°æ–‡ä»¶ï¼Œmarkdownè¯­æ³•
+-- tsconfig.build.json            // TypeScriptè¯­æ³•æ„å»ºæ—¶çš„é…ç½®æ–‡ä»¶
+-- tsconfig.json                  // TypeScriptçš„é…ç½®æ–‡ä»¶ï¼Œæ§åˆ¶TypeScriptç¼–è¯‘å™¨çš„ä¸€äº›è¡Œä¸º       
</code></pre>
<p>srcç›®å½•ï¼Œç¼–å†™ä»£ç çš„ç›®å½•</p>
<pre><code>+-- src[ç›®å½•]                       // æºæ–‡ä»¶/ä»£ç ï¼Œç¨‹åºå‘˜ä¸»è¦ç¼–å†™çš„ç›®å½•
|  +-- app.controller.spec.ts      // å¯¹äºåŸºæœ¬æ§åˆ¶å™¨çš„å•å…ƒæµ‹è¯•æ ·ä¾‹
|  +-- app.controller.ts           // æ§åˆ¶å™¨æ–‡ä»¶ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºè·¯ç”±æ–‡ä»¶
|  +-- app.module.ts               // æ¨¡å—æ–‡ä»¶ï¼Œåœ¨NestJSä¸–ç•Œé‡Œä¸»è¦æ“ä½œçš„å°±æ˜¯æ¨¡å—
|  +-- app.service.ts              // æœåŠ¡æ–‡ä»¶ï¼Œæä¾›çš„æœåŠ¡æ–‡ä»¶ï¼Œä¸šåŠ¡é€»è¾‘ç¼–å†™åœ¨è¿™é‡Œ
|  +-- app.main.ts                 // é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œé‡Œè¾¹åŒ…æ‹¬é¡¹ç›®çš„ä¸»æ¨¡å—å’Œç›‘å¬ç«¯å£å·
</code></pre>
<h2 id="2-2ç¼–å†™helloworld">2-2.ç¼–å†™helloworld</h2>
<p>åœ¨<code>main.ts</code>ä¸­å¯ä»¥çœ‹çš„å¯åŠ¨çš„ç«¯å£æ˜¯3000ï¼Œå¯åŠ¨é¡¹ç›®ååœ¨æµè§ˆå™¨è¾“å…¥<code>localhost:3000</code>å¯ä»¥çœ‹çš„è¾“å‡ºçš„HelloWorldã€‚<br>
åœ¨<code>/src/app.service.ts</code>æ–‡ä»¶ä¸­ä¿®æ”¹<code>getHello()</code>çš„ä»£ç </p>
<pre><code>import { Injectable } from '@nestjs/common';
//æ–¹æ³•
@Injectable()
export class AppService {
  getHello(): string {
    //return 'Hello World';  //åŸæ¥ä»£ç 
    return 'Hello';
  }
}

</code></pre>
<p>æ­¤æ—¶å¯ä»¥çœ‹åˆ°æµè§ˆå™¨æ–°çš„è¾“å‡ºHelloã€‚</p>
<h1 id="3controlleræ§åˆ¶å™¨-è·¯ç”±å’Œæ¨¡å—çš„åˆ›å»º">3.Controlleræ§åˆ¶å™¨-è·¯ç”±å’Œæ¨¡å—çš„åˆ›å»º</h1>
<h2 id="3-1-åˆ›å»ºè·¯ç”±">3-1. åˆ›å»ºè·¯ç”±</h2>
<h3 id="3-1-1-æ–°å»ºè·¯ç”±">3-1-1. æ–°å»ºè·¯ç”±</h3>
<p>åœ¨<code>app.controller.ts</code> æ–‡ä»¶ä¸­<code>@Get()</code>æ–°å»ºè·¯ç”±</p>
<pre><code>import { Controller, Get } from '@nestjs/common';
import { AppService } from './app.service';
//é¡¶å±‚è·¯å¾„ é»˜è®¤æ˜¯'/'ï¼› ä¼ 'api'å³é¡¶å±‚è·¯å¾„æ˜¯'/api'
@Controller()
export class AppController {
  constructor(private readonly appService: AppService) {}
  //åº•å±‚è·¯ç”± ä¸ä¼ æ˜¯'/'  ä¼ 'hellotest'å³è·¯ç”±æ˜¯'/hellotest' è·¯å¾„æ ¹æ®é¡¶å±‚è·¯ç”±å†³å®š
  @Get('hellotest')
  getHello(): string {
    return this.appService.getHello();
  }
}

</code></pre>
<p>æ­¤æ—¶å¯ä»¥ä½¿ç”¨<code>localhost:3000/hellotest</code>è®¿é—®getHello()çš„è¾“å‡ºã€‚</p>
<h3 id="3-1-2-æ·»åŠ é¡¶å±‚è·¯å¾„">3-1-2. æ·»åŠ é¡¶å±‚è·¯å¾„</h3>
<p>åœ¨<code>app.controller.ts</code> æ–‡ä»¶ä¸­çš„@Controller()è£…é¥°å™¨ä¸­æ·»åŠ é¡¶å±‚è·¯å¾„</p>
<pre><code>import { Controller, Get } from '@nestjs/common';
import { AppService } from './app.service';
@Controller('api')//ä¿®æ”¹å†…å®¹
export class AppController {
  constructor(private readonly appService: AppService) {}
  @Get('hellotest')
  getHello(): string {
    return this.appService.getHello();
  }
}
</code></pre>
<p>æ­¤æ—¶ä½¿ç”¨<code>localhost:3000/api/hellotest</code>è®¿é—®getHello()çš„è¾“å‡ºã€‚</p>
<p>##ã€€3-2.æ–°å»ºæ¨¡å—</p>
<h3 id="3-2-1åˆå§‹åŒ–ç›®å½•">3-2-1.åˆå§‹åŒ–ç›®å½•</h3>
<ol>
<li>åˆ é™¤è„šæ‰‹æ¶è‡ªåŠ¨ç”Ÿæˆçš„æµ‹è¯•æ–‡ä»¶<code>app.controller.spec.ts</code>ã€æ§åˆ¶æ–‡ä»¶<code>app.controller.ts</code> å’Œ<code>app.service.ts</code></li>
<li>åˆ é™¤<code>app.module.ts</code>æ–‡ä»¶ä¸­å¯¹åˆšåˆšåˆ é™¤æ–‡ä»¶çš„å¼•å…¥</li>
</ol>
<pre><code>//åˆ é™¤åçš„app.module.ts
import { Module } from '@nestjs/common';

@Module({
  imports: [],
  controllers: [],
  providers: [],
})
export class AppModule {}
</code></pre>
<h3 id="3-2-2ä½¿ç”¨å‘½ä»¤åˆ›å»ºæ¨¡å—">3-2-2.ä½¿ç”¨å‘½ä»¤åˆ›å»ºæ¨¡å—</h3>
<p><code>nest g module æ¨¡å—å</code></p>
<p>åœ¨å‘½ä»¤è¡Œè¾“å…¥<code>nest g module user</code>ä¼šåœ¨<code>src</code>ç›®å½•è‡ªåŠ¨ç”Ÿæˆ<code>user/user.module.ts</code>æ–‡ä»¶</p>
<pre><code>import { Module } from '@nestjs/common';

@Module({})
export class UserModule {}
</code></pre>
<p>æ­¤æ—¶<code>app.module.ts</code>æ–‡ä»¶ä¼šè‡ªåŠ¨å¼•å…¥å½“å‰æ¨¡å—</p>
<pre><code>import { Module } from '@nestjs/common';
import { GirlModule } from './girl/girl.module';

@Module({
  imports: [GirlModule],
  controllers: [],
  providers: [],
})
export class AppModule {}

</code></pre>
<h3 id="3-2-3-ä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªcontrolleræ§åˆ¶å™¨">3-2-3. ä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªcontrolleræ§åˆ¶å™¨</h3>
<p><code>nest g controller æ¨¡å—å --no-spec </code><br>
åœ¨æ§åˆ¶å°è¾“å…¥<code>nest g controller user --no-spec</code>ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª<code>user.controller.ts</code>æ–‡ä»¶</p>
<pre><code>import { Controller } from '@nestjs/common';

@Controller('user')
export class UserController {}
</code></pre>
<p>æ­¤æ—¶<code>user.module.ts</code>æ–‡ä»¶ä¼šè‡ªåŠ¨å¼•å…¥å½“å‰æ§åˆ¶å™¨æ¨¡å—</p>
<pre><code>import { Module } from '@nestjs/common';
import { UserController } from './user.controller';

@Module({
  controllers: [UserController],
})
export class UserModule {}

</code></pre>
<p>åˆ›å»ºå®Œæˆä¹‹åå¯ä»¥åœ¨<code>user.controller.ts</code>æ–‡ä»¶ä¸­å†™ä¸€ä¸ªè·¯ç”±æµ‹è¯•æ¨¡å—ã€‚</p>
<pre><code>import { Controller, Get } from '@nestjs/common';

@Controller('user')
export class UserController {
    @Get()
  getUserInfo(): any {
        return{
          code:0,
          data:[&quot;å°æ˜&quot;,&quot;å°æ–¹&quot;],
        }
      };
}

</code></pre>
<p>æµ‹è¯•<code>localhost:3000/user</code>è¿”å›å†…å®¹</p>
<pre><code>{
     &quot;code&quot;: 0,
     &quot;data&quot;: [
          &quot;å°æ˜&quot;,
          &quot;å°æ–¹&quot;
     ]
}
</code></pre>
<h2 id="3-3åˆ›å»ºå…¨å±€è·¯ç”±å‰ç¼€">3-3.åˆ›å»ºå…¨å±€è·¯ç”±å‰ç¼€</h2>
<p>åœ¨<code>main.ts</code>ä¸­æ·»åŠ <code>app.setGlobalPrefix('api');</code><br>
æ­¤æ—¶è®¿é—®useræ¨¡å—çš„è·¯ç”±<code>localhost:3000/api/user</code><br>
æ‰€æœ‰æ¨¡å—çš„è·¯ç”±éƒ½ä¼šé»˜è®¤æ·»åŠ é…ç½®çš„<code>api</code>å‰ç¼€</p>
<h1 id="4controlleræ§åˆ¶å™¨-ä¸šåŠ¡é€»è¾‘ç›¸ç»“åˆ">4.Controlleræ§åˆ¶å™¨-ä¸šåŠ¡é€»è¾‘ç›¸ç»“åˆ</h1>
<h2 id="4-1-ä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªservice">4-1. ä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªservice</h2>
<p><code>nest g service æ¨¡å—å --no-spec</code></p>
<p>åœ¨æ§åˆ¶å°è¾“å…¥<code>nest g service user --no-spec</code>åœ¨srcç›®å½•ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª<code>user.service.ts</code>æ–‡ä»¶ã€‚<br>
serviceå±äºé€»è¾‘å±‚ï¼Œä¸»è¦å†™ä¸šåŠ¡é€»è¾‘ã€‚</p>
<h2 id="4-2controlleræ§åˆ¶å™¨å¼•å…¥serviceé€»è¾‘">4-2.Controllerï¼ˆæ§åˆ¶å™¨ï¼‰å¼•å…¥serviceï¼ˆé€»è¾‘ï¼‰</h2>
<p><code>user.controller.ts</code></p>
<pre><code>import { Controller, Get } from '@nestjs/common';
import { UserService } from './user.service';//å¼•å…¥service
@Controller('user')
export class UserController {
    constructor(private userService: UserService) { }  //æ„é€ userServiceå‡½æ•°ï¼Œprivateå½’å®šå±æ€§åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨
}
</code></pre>
<h2 id="4-3åœ¨serviceé‡Œç¼–å†™ä¸šåŠ¡é€»è¾‘">4-3.åœ¨serviceé‡Œç¼–å†™ä¸šåŠ¡é€»è¾‘</h2>
<p><code>user.service.ts</code></p>
<pre><code>import { Injectable } from '@nestjs/common';

@Injectable()
export class UserService {
    getInfos(){//ç±»æ–¹æ³•
        return {
            msg:'ok'
        }
    }
}

</code></pre>
<h2 id="4-4åœ¨controllerä¸­å¾—åˆ°serviceçš„ç±»æ–¹æ³•">4-4.åœ¨Controllerä¸­å¾—åˆ°serviceçš„ç±»æ–¹æ³•</h2>
<pre><code>import { Controller, Get } from '@nestjs/common';
import { UserService } from './user.service';//å¼•å…¥service
@Controller('user')
export class UserController {
    constructor(private userService: UserService) { }  //æ„é€ userServiceå‡½æ•°ï¼Œprivateå½’å®šå±æ€§åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨
    @Get('getInfos')  //è·¯ç”±
    getInfos():any{ //anyè¡¨ç¤ºä»»æ„ç±»å‹
        return this.userService.getInfos()
    }
}

</code></pre>
<h1 id="5getå’Œpostè¯·æ±‚">5.Getå’ŒPostè¯·æ±‚</h1>
<h2 id="5-1getè¯·æ±‚">5-1.Getè¯·æ±‚</h2>
<h3 id="åœ¨serviceé‡Œå†™ä¸€ä¸ªå¸¦å‚æ•°çš„æ–¹æ³•æ ¹æ®å‚æ•°æŒ‡å®šè¿”å›å€¼">åœ¨serviceé‡Œå†™ä¸€ä¸ªå¸¦å‚æ•°çš„æ–¹æ³•ï¼Œæ ¹æ®å‚æ•°æŒ‡å®šè¿”å›å€¼ã€‚</h3>
<p><code>user.service.ts</code></p>
<pre><code>import { Injectable } from '@nestjs/common';
@Injectable()
export class UserService {
    //å¸¦å‚æ•°çš„æ–¹æ³•
    searchUser(userid: string) {
        let obj: Object = {}
        switch (userid) {
            case '1':
                obj = {
                    name: 'user1'
                }
                break;
            case '2':
                obj = {
                    name: 'user2'
                }
                break;
            default:
                break;
        }
        return obj
    }

}

</code></pre>
<h3 id="åœ¨controllerä¸­ä½¿ç”¨queryè£…é¥°å™¨æ¥æ”¶å‚æ•°">åœ¨<code>Controller</code>ä¸­ä½¿ç”¨<code>Query</code>è£…é¥°å™¨æ¥æ”¶å‚æ•°</h3>
<p><code>user.controller.ts</code></p>
<pre><code>import { Controller, Get,Query } from '@nestjs/common';//å¼•å…¥Queryè£…é¥°å™¨
import { UserService } from './user.service';//å¼•å…¥service
@Controller('user')
export class UserController {
    constructor(private userService: UserService) { }  //æ„é€ userServiceå‡½æ•°ï¼Œprivateå½’å®šå±æ€§åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨
    //å¸¦å‚æ•°çš„getè¯·æ±‚
    @Get(&quot;/searchUser&quot;)
    searchUser(@Query() query):any{//ä½¿ç”¨Queryè£…é¥°å™¨ï¼Œç›¸å½“äºreq.query.userid
        return this.userService.searchUser(query.userid)
    }
}

</code></pre>
<h2 id="5-2postè¯·æ±‚">5-2.Postè¯·æ±‚</h2>
<h3 id="åœ¨serviceé‡Œå†™ä¸€ä¸ªå¸¦å‚æ•°çš„æ–¹æ³•">åœ¨serviceé‡Œå†™ä¸€ä¸ªå¸¦å‚æ•°çš„æ–¹æ³•</h3>
<p><code>user.service.ts</code></p>
<pre><code>import { Injectable } from '@nestjs/common';
@Injectable()
export class UserService {
    //postæ¥æ”¶å¯¹è±¡çš„æ–¹æ³•
    addUser(obj: any): any {
        interface User {    //å®šä¹‰æ¥å£
            name: string,
            age: number,
            readonly id: number
        }
        let userid = 1
        let xm: User = {
            name: obj.name,
            age: parseInt(obj.age),
            id: userid
        };
        return xm
    }
}

</code></pre>
<h3 id="åœ¨controllerä¸­ä½¿ç”¨bodyè£…é¥°å™¨æ¥æ”¶å‚æ•°">åœ¨<code>Controller</code>ä¸­ä½¿ç”¨<code>Body</code>è£…é¥°å™¨æ¥æ”¶å‚æ•°</h3>
<pre><code>
import { Body,Controller, Get,Post } from '@nestjs/common';
import { UserService } from './user.service';//å¼•å…¥service
@Controller('user')
export class UserController {
    constructor(private userService: UserService) { }  
    //å¸¦è¯·æ±‚çš„post
    @Post(&quot;/addUser&quot;)
    addUser(@Body() body):any{
        return this.userService.addUser(body)
    }
}

</code></pre>
<h2 id="5-3ä½¿ç”¨requestè£…é¥°å™¨æ¥æ”¶è¯·æ±‚">5-3.ä½¿ç”¨Requestè£…é¥°å™¨æ¥æ”¶è¯·æ±‚</h2>
<p><code>Request</code>è£…é¥°å™¨ç›¸å½“äº<code>req</code>çš„ç®€å†™ï¼Œ<code>Query</code>è£…é¥°å™¨ç›¸å½“äº<code>req.query</code>çš„ç®€å†™ï¼Œ<code>Body</code>è£…é¥°å™¨ç›¸å½“äº<code>req.body</code>çš„ç®€å†™ã€‚æ‰€ä»¥<code>Request</code>è£…é¥°å™¨çš„ä½¿ç”¨ä¸å…¶ä»–ä¸¤ä¸ªä½¿ç”¨å¤§åŒå°å¼‚ã€‚</p>
<p><code>user.controller.ts</code></p>
<pre><code>import { Controller, Get,,Post,Request } from '@nestjs/common';
import { UserService } from './user.service';//å¼•å…¥service
@Controller('user')
export class UserController {
    constructor(private userService: UserService) { }  //æ„é€ userServiceå‡½æ•°ï¼Œprivateå½’å®šå±æ€§åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨
    //å¸¦å‚æ•°çš„getè¯·æ±‚
    @Get(&quot;/searchUser&quot;)
    searchUser(@Request() req):any{
        return this.userService.searchUser(req.query.userid)
    }
}

</code></pre>
<p>å…ˆå¼•å…¥<code>Request</code>è£…é¥°å™¨,ç„¶ååœ¨ç±»æ–¹æ³•ä¸­ä½¿ç”¨ã€‚</p>
<h1 id="6åˆ›å»ºåŠ¨æ€è·¯ç”±">6.åˆ›å»ºåŠ¨æ€è·¯ç”±</h1>
<h2 id="6-1ä»‹ç»">6-1.ä»‹ç»</h2>
<ul>
<li>æ™®é€šçš„è·¯ç”±ä¼ å‚æ–¹æ³•ï¼Œæ˜¾ç¤ºä¼ é€’</li>
</ul>
<p><code>http://localhost:3000/user/searchUser?id=1</code></p>
<ul>
<li>åŠ¨æ€è·¯ç”±ä¼ å‚æ–¹æ³•ï¼Œéšå¼ä¼ é€’</li>
</ul>
<p><code>http://localhost:3000/user/searchUser/1</code></p>
<ul>
<li>åŠ¨æ€è·¯ç”±ä½¿ç”¨<code>/info/:userid</code>çš„æ–¹å¼åˆ›å»ºè·¯ç”±ï¼Œä½¿ç”¨<code>req.params</code>æ¥æ”¶å‚æ•°</li>
</ul>
<h2 id="6-2ä½¿ç”¨requestè£…é¥°å™¨æ¥æ”¶åŠ¨æ€è·¯ç”±å‚æ•°">6-2.ä½¿ç”¨Requestè£…é¥°å™¨æ¥æ”¶åŠ¨æ€è·¯ç”±å‚æ•°</h2>
<p><code>user.controller.ts</code></p>
<pre><code>...    
//@åŠ¨æ€è·¯ç”±
    @Get(&quot;getByIdList/:userid&quot;)
    getByIdList(@Request() req): any {
        console.log(req.params)
        let userid:string=req.params.userid
        return this.userService.getByIdList(userid)
    }
...
</code></pre>
<h2 id="6-3ä½¿ç”¨paramè£…é¥°å™¨">6-3.ä½¿ç”¨Paramè£…é¥°å™¨</h2>
<p><code>Param</code>è£…é¥°å™¨ç›¸å½“äº<code>req.params</code>çš„ç®€å†™</p>
<ul>
<li>
<p>å…ˆå¼•å…¥ <code>import { Param } from '@nestjs/common';</code></p>
</li>
<li>
<p>ä½¿ç”¨</p>
</li>
</ul>
<p><code>user.controller.ts</code>:</p>
<pre><code>...
    getByIdList(@Param() params): any {
        let userid: string = params.userid
        return this.userService.getByIdList(userid)
    }
...
</code></pre>
<h2 id="6-4åŠ¨æ€è·¯ç”±å¤šä¸ªå‚æ•°ä¼ é€’">6-4.åŠ¨æ€è·¯ç”±å¤šä¸ªå‚æ•°ä¼ é€’</h2>
<ul>
<li>è¯·æ±‚</li>
</ul>
<p><code>getByIdList/1/18/xm</code></p>
<ul>
<li>æ¥æ”¶</li>
</ul>
<p><code>getByIdList/:userid/:age/:name</code></p>
<h1 id="7-å¸¸ç”¨è£…é¥°å™¨æ€»ç»“">7. å¸¸ç”¨è£…é¥°å™¨æ€»ç»“</h1>
<h2 id="7-1-get">7-1. @Get</h2>
<h2 id="7-2-post">7-2. @Post</h2>
<h2 id="7-3-request">7-3. @Request</h2>
<h2 id="7-4-param">7-4. @Param</h2>
<h2 id="7-5-query">7-5. @Query</h2>
<h2 id="7-6-body">7-6. @Body</h2>
<h2 id="7-7-headers">7-7. @Headers</h2>
<h3 id="ä»‹ç»">ä»‹ç»</h3>
<blockquote>
<p>è¯»å–è¯·æ±‚å¤´é‡Œè¾¹çš„ä¿¡æ¯</p>
</blockquote>
<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>
<ul>
<li>å¼•å…¥</li>
</ul>
<p><code>import {Headers } from '@nestjs/common';</code></p>
<ul>
<li>ç¤ºä¾‹</li>
</ul>
<pre><code>    @Get(&quot;getByIdList/:userid&quot;)
    //ä½¿ç”¨paramsè£…é¥°å™¨
    getByIdList(@Param() params,@Headers() header): any {
        console.log(header)  //æ‰“å°headerä¿¡æ¯
        let userid: string = params.userid
        return this.userService.getByIdList(userid)
    }
</code></pre>
<h1 id="8ä½¿ç”¨ormå·¥å…·">8.ä½¿ç”¨ORMå·¥å…·</h1>
<h2 id="ä»‹ç»-2">ä»‹ç»</h2>
<blockquote>
<p>ORM æ˜¯ Object Relational Mapping çš„ç¼©å†™ï¼Œè¯‘ä¸ºâ€œå¯¹è±¡å…³ç³»æ˜ å°„â€ï¼Œå®ƒè§£å†³äº†å¯¹è±¡å’Œå…³ç³»å‹æ•°æ®åº“ä¹‹é—´çš„æ•°æ®äº¤äº’é—®é¢˜ã€‚ORMçš„ä½œç”¨å°±æ˜¯ï¼šå®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±å¯¹åº”ç€ä¸€å¼ è¡¨ï¼Œè¿™ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œå°±å¯¹åº”ç€è¡¨ä¸­çš„ä¸€æ¡è®°å½•ã€‚ è¿™æ ·ä½œçš„å¥½å¤„ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹è±¡çš„å½¢å¼ï¼Œæ¥æ“ä½œæ•°æ®åº“ã€‚</p>
</blockquote>
<h2 id="å¸¸è§çš„ormå·¥å…·">å¸¸è§çš„ORMå·¥å…·</h2>
<p><code>TypeOrm</code> https://typeorm.bootcss.com/</p>
<h1 id="9nestjsä¸­ä½¿ç”¨typeorm">9.nestJsä¸­ä½¿ç”¨TypeOrm</h1>
<h2 id="9-1å®‰è£…typeormå’Œmysql2">9-1.å®‰è£…TypeOrmå’Œmysql2</h2>
<pre><code>npm install --save @nestjs/typeorm typeorm mysql2
</code></pre>
<h2 id="9-2å¼•å…¥">9-2.å¼•å…¥</h2>
<p>åœ¨<code>/src/app.module.ts</code>ä¸­å¼•å…¥<code>typeorm</code></p>
<pre><code>import { TypeOrmModule } from '@nestjs/typeorm';

@Module({
  imports:[ TypeOrmModule.forRoot({
    type:'mysql',           // æ•°æ®åº“ç±»å‹
    host:'localhost',       // æ•°æ®åº“çš„è¿æ¥åœ°å€host
    port:3306,              // æ•°æ®åº“çš„ç«¯å£ 3306
    username:'root',        // è¿æ¥è´¦å·
    password:'root123',     // è¿æ¥å¯†ç 
    database:'test_db',     // è¿æ¥çš„è¡¨å
    retryDelay:500,         // é‡è¯•è¿æ¥æ•°æ®åº“é—´éš”
    retryAttempts:10,       // å…è®¸é‡è¿æ¬¡æ•°
  })] 
})

</code></pre>
<h1 id="10æ•°æ®åº“æ“ä½œ-typeormçš„å®ä½“æ“ä½œ">10.æ•°æ®åº“æ“ä½œ-TypeORMçš„å®ä½“æ“ä½œ</h1>
<h2 id="æ¦‚å¿µ-typeormä¸­çš„å®ä½“entities">æ¦‚å¿µ--TypeORMä¸­çš„å®ä½“Entities</h2>
<blockquote>
<p>ORMä¸­çš„å®ä½“å…¶å®å°±æ˜¯æŠŠæ•°æ®åº“æ˜ å°„æˆå¯¹è±¡çš„é‚£ä¸ªç±»ã€‚è¿™ä¸ªç±»å¯ä»¥æ¨¡æ‹Ÿæ•°æ®åº“è¡¨ï¼Œå®šä¹‰å…¶ä¸­çš„å­—æ®µã€‚</p>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦å®šä¹‰å®ä½“ç±»æ“ä½œæ•°æ®åº“ã€‚</p>
<h2 id="å¢åŠ é…ç½®é¡¹">å¢åŠ é…ç½®é¡¹</h2>
<p>æƒ³è®©TypeORMè‡ªåŠ¨å·¥ä½œï¼Œä¸ºæˆ‘ä»¬åˆ›å»ºå¯¹åº”çš„æ•°æ®åº“ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨é…ç½®æ•°æ®åº“è¿æ¥çš„åœ°æ–¹å¢åŠ ä¸¤ä¸ªé…ç½®é¡¹</p>
<ol>
<li>å…è®¸å®ä½“åŒæ­¥åˆ°æ•°æ®åº“</li>
<li>è‡ªåŠ¨åŠ è½½å®ä½“ã€‚</li>
</ol>
<pre><code>import { Module } from '@nestjs/common';
import { UserModule } from './user/user.module';
import { TypeOrmModule } from &quot;@nestjs/typeorm&quot;;
@Module({
  imports: [UserModule, //è¿æ¥æ•°æ®åº“
    TypeOrmModule.forRoot({
      type: 'mysql',           // æ•°æ®åº“ç±»å‹
      host: 'localhost',       // æ•°æ®åº“çš„è¿æ¥åœ°å€host
      port: 3306,              // æ•°æ®åº“çš„ç«¯å£ 3306
      username: 'root',        // è¿æ¥è´¦å·
      password: 'root',     // è¿æ¥å¯†ç 
      database: 'nest-test',     // è¿æ¥çš„åº“å
      retryDelay: 500,         // é‡è¯•è¿æ¥æ•°æ®åº“é—´éš”
      retryAttempts: 10,       // å…è®¸é‡è¿æ¬¡æ•°
      synchronize:true,       // æ˜¯å¦å°†å®ä½“åŒæ­¥åˆ°æ•°æ®åº“
      autoLoadEntities:true,  // è‡ªåŠ¨åŠ è½½å®ä½“é…ç½®ï¼ŒforFeature()æ³¨å†Œçš„æ¯ä¸ªå®ä½“éƒ½è‡ªå·±åŠ¨åŠ è½½
    })
  ],
  controllers: [],
  providers: [],
})
export class AppModule { }
</code></pre>
<h2 id="ç¼–å†™entitieså®ä½“">ç¼–å†™Entitieså®ä½“</h2>
<ol>
<li>åˆ›å»ºæ–‡ä»¶</li>
</ol>
<blockquote>
<p>è¿›å…¥æ¨¡å—æ–‡ä»¶å¤¹ï¼Œæ–°å»º<code>entities</code>æ–‡ä»¶å¤¹ï¼Œæ–°å»º<code>modulename.entities.ts</code>æ–‡ä»¶</p>
</blockquote>
<ol start="2">
<li>ç¼–å†™å®ä½“ç±»</li>
</ol>
<pre><code>//å¼•å…¥entity,Columnè£…é¥°å™¨å®šä¹‰åˆ—å¯¹åº”è¡¨å¤´ï¼ŒPrimaryGeneratedColumnè£…é¥°å™¨å¯¹åº”ä¸»é”®
import { Entity,Column,PrimaryGeneratedColumn } from &quot;typeorm&quot;;

@Entity()
export class User{
    @PrimaryGeneratedColumn()
    id:number   //id,ä¸»é”®
    @Column()
    username:string
    @Column()
    age:number
    @Column()
    skill:string
}
</code></pre>
<p>3.æ¨¡å—ä¸­å¼•å…¥<br>
åœ¨<code>@Module( )</code>è£…é¥°å™¨ä¸­ç”¨<code>forFeature( )</code>æ–¹æ³•ï¼ŒæŠŠUserçš„å®ä½“å¼•å…¥ã€‚</p>
<pre><code>import { Module } from '@nestjs/common';
import { UserController } from './user.controller';
import { UserService } from './user.service';
import { TypeOrmModule } from '@nestjs/typeorm';
import { User } from &quot;./entities/user.entities&quot;
@Module({
  imports: [TypeOrmModule.forFeature([User])],
  controllers: [UserController],
  providers: [UserService]
})
export class UserModule { }
</code></pre>
<p>é‡æ–°å¯åŠ¨<code>npm run start:dev</code>æ­¤æ—¶æ•°æ®åº“æ–°å»ºäº†<code>user</code>è¡¨</p>
<h1 id="11æ•°æ®åº“æ“ä½œ-ormå¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥">11.æ•°æ®åº“æ“ä½œ-ORMå¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥</h1>
<p>åˆ›å»ºå®ä½“åï¼Œå¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥</p>
<h2 id="åœ¨serviceä¸­å¼•å…¥è£…é¥°å™¨å’Œå·¥å…·">åœ¨<code>service</code>ä¸­å¼•å…¥è£…é¥°å™¨å’Œå·¥å…·</h2>
<pre><code>...
// ä¾èµ–æ³¨å…¥
import { Like, Repository } from 'typeorm'
import { InjectRepository } from '@nestjs/typeorm'
import { User } from &quot;./entities/user.entities&quot;//å¼•å…¥å®ä½“


@Injectable()
export class UserService {
    //æ³¨å…¥ä¾èµ–åå¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œ useræ˜¯å½“å‰çš„æ¨¡å—
  constructor(@InjectRepository(User) private readonly user: Repository&lt;User&gt;) { }
   ...

}


</code></pre>
<h2 id="å®ç°æ–°å¢">å®ç°æ–°å¢</h2>
<blockquote>
<p>ä½¿ç”¨<code>save</code>æ–¹æ³•<br>
å…ˆnewå‡ºä¸€ä¸ªæ¨¡å—çš„å¯¹è±¡ï¼Œç„¶åç”¨è¿™ä¸ªå¯¹è±¡çš„save( )ä¿å­˜æ•°æ®</p>
</blockquote>
<p><code>service</code>é€»è¾‘å±‚æ–‡ä»¶</p>
<pre><code>    addTest(){
        const data=new User()
        data.username=&quot;test&quot;
        data.age=16
        data.skill=&quot;ç¯®çƒ&quot;
        return this.user.save(data)//ä½¿ç”¨saveæ–¹æ³•ä¿å­˜åˆ°æ•°æ®åº“
    }
</code></pre>
<p>åœ¨æ§åˆ¶å™¨ä¸­é…ç½®è·¯ç”±å¹¶ä¸”å¼•å…¥è·¯ç”±<br>
<code>controller</code>è·¯ç”±æ–‡ä»¶</p>
<pre><code>    @Post(&quot;addTest&quot;)
    addTest(){
        return this.userService.addTest()
    }
</code></pre>
<p>åœ¨<code>postman</code>ä¸­æµ‹è¯•<code>user/addtest</code>æ¥å£ï¼Œå°†ä¼šæ–°å¢ä¸€æ¡æ•°æ®</p>
<pre><code>{
&quot;username&quot;: &quot;test&quot;,
&quot;age&quot;: 16,
&quot;skill&quot;: &quot;ç¯®çƒ&quot;,
&quot;id&quot;: 1
}
</code></pre>
<h2 id="å®ç°åˆ é™¤">å®ç°åˆ é™¤</h2>
<blockquote>
<p>åˆ é™¤æ–¹æ³•ä½¿ç”¨delete( )</p>
</blockquote>
<p><code>service</code>é€»è¾‘å±‚æ–‡ä»¶</p>
<pre><code>    deleteTest(id: number) { //åˆ é™¤
        return this.user.delete(id) //ä½¿ç”¨deleteæ–¹æ³•æ‰§è¡Œåˆ é™¤
    }
</code></pre>
<p><code>controller</code>è·¯ç”±æ–‡ä»¶</p>
<pre><code>    @Get(&quot;deleteTest/:id&quot;)
    deleteTest(@Param() params){
        return this.userService.deleteTest(params.id)
    }
</code></pre>
<h2 id="å®ç°ä¿®æ”¹æ•°æ®">å®ç°ä¿®æ”¹æ•°æ®</h2>
<blockquote>
<p>ä¿®æ”¹æ•°æ®æ¥æ”¶ä¸¤ä¸ªæ•°æ®ï¼Œä¸€ä¸ªidå’Œè¦ä¿®æ”¹çš„æ•°æ®</p>
</blockquote>
<p><code>service</code>é€»è¾‘å±‚æ–‡ä»¶</p>
<pre><code>   updateTest({
        id
    }) {
        let data = new User()
        data.username = &quot;qwereqw&quot;
        data.age =14
        data.skill = &quot;0000kioi&quot;
        return this.user.update(id,data)
    }
</code></pre>
<p><code>controller</code>è·¯ç”±æ–‡ä»¶</p>
<pre><code>    @Post(&quot;updataTest&quot;)
    updateTest(@Body() body){
        return this.userService.updateTest({
            id:body.id,
        })
    }
</code></pre>
<h2 id="å®ç°æŸ¥è¯¢æ•°æ®">å®ç°æŸ¥è¯¢æ•°æ®</h2>
<h3 id="æŸ¥è¯¢æ‰€æœ‰">æŸ¥è¯¢æ‰€æœ‰</h3>
<blockquote>
<p><code>find( )</code>æ–¹æ³•æŸ¥è¯¢æ‰€æœ‰</p>
</blockquote>
<p><code>service</code>é€»è¾‘å±‚æ–‡ä»¶</p>
<pre><code>    findAll():any{
        return this.user.find()
    }
</code></pre>
<p><code>controller</code>è·¯ç”±æ–‡ä»¶</p>
<pre><code>    //æŸ¥è¯¢æ‰€æœ‰
    @Get('findAll')
    findTest(){
        return this.userService.findAll()
    }
</code></pre>
<h3 id="æ¨¡ç³ŠæŸ¥è¯¢">æ¨¡ç³ŠæŸ¥è¯¢</h3>
<p><code>service</code>é€»è¾‘å±‚æ–‡ä»¶</p>
<pre><code>    // æ¨¡ç³ŠæŸ¥è¯¢ ä½¿ç”¨like
    //æ ¹æ®usernameæŸ¥è¯¢list
    findUsername(username:string):any{
        return this.user.find({
            where:{
                username:Like(`%${username}`)
            }
        })
    }

</code></pre>
<p><code>controller</code>è·¯ç”±æ–‡ä»¶</p>
<pre><code>    //æ¨¡ç³ŠæŸ¥è¯¢ ä½¿ç”¨like
    @Get('findUsername/:username')
    findUsername(@Param() params){
        return this.userService.findUsername(params.username)
    }
</code></pre>
<p><a href="https://typeorm.bootcss.com/find-options">è¯¦ç»†é€‰é¡¹</a></p>
<h1 id="12-providersæä¾›è€…å®ç°ä¾èµ–æ³¨å…¥">12. Providers(æä¾›è€…)å®ç°ä¾èµ–æ³¨å…¥</h1>
<h1 id="å‚è€ƒå­¦ä¹ é“¾æ¥">å‚è€ƒå­¦ä¹ é“¾æ¥ï¼š</h1>
<p>https://jspang.com/article/87#toc2</p>
<h1 id="ç›¸å…³æ–‡æ¡£">ç›¸å…³æ–‡æ¡£</h1>
<p>https://typeorm.bootcss.com/<br>
https://www.nestjs.com.cn/</p>
<h1 id="å¯ä»¥å‚è€ƒçš„å¼€å‘é¡¹ç›®ç»“æ„">å¯ä»¥å‚è€ƒçš„å¼€å‘é¡¹ç›®ç»“æ„</h1>
<pre><code>prisam // æ•°æ®åº“ç›¸å…³
src
â”œâ”€ auth // æˆæƒç™»é™†æ¨¡å—
â”‚   â”œâ”€ auth.controller.ts
â”‚   â”œâ”€ auth.guard.ts // å®ˆå« 
â”‚   â”œâ”€ auth.interface.ts // å­˜æ”¾å±€éƒ¨çš„è¯¥æ¨¡å—çš„ç±»å‹å£°æ˜
â”‚   â”œâ”€ auth.module.ts
â”‚   â”œâ”€ auth.service.ts
â”‚   â”œâ”€ dto
â”‚   â”‚   â”œâ”€ sign-in.dto.ts
â”‚   â”œâ”€ entities
â”‚   â”‚   â””â”€ refresh-token.entity.ts
â”œâ”€ common // å…¨å±€é€šç”¨æ¨¡å—
|   â”œâ”€ configs // å…¨å±€é…ç½® 
|   â”œâ”€ constants // å®šä¹‰ä¸€äº›å¸¸é‡
|   â”œâ”€ decorators // å…¨å±€è£…é¥°å™¨
|   â”œâ”€ filters // å…¨å±€è¿‡æ»¤å™¨
|   â”œâ”€ interceptors // å…¨å±€æ‹¦æˆªå™¨
|   â”œâ”€ interfaces // å…¨å±€ç±»å‹å£°æ˜
|   â”œâ”€ services // å…¨å±€å…¬å…±æœåŠ¡
|   â”œâ”€ * // å…¶ä»–
â”œâ”€ utils // å·¥å…·å‡½æ•°, å°½é‡å­˜æ”¾çº¯å‡½æ•°
â”œâ”€ app.*.ts // app æ¨¡å—, å…¶ä»– module éœ€è¦å¼•ç”¨åˆ° app module
â”œâ”€ main.ts // åº”ç”¨å…¥å£

</code></pre>

            </div>
            <div class="toc-container">
              <ul class="markdownIt-TOC">
<li><a href="#1nestjs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%92%8C%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA">1.NestJSç¯å¢ƒæ­å»ºå’Œé¡¹ç›®åˆ›å»º</a>
<ul>
<li><a href="#1-1%E7%AE%80%E4%BB%8B">1-1.ç®€ä»‹</a></li>
<li><a href="#1-2%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA">1-2.é¡¹ç›®åˆ›å»º</a>
<ul>
<li><a href="#1-2-1-%E5%87%86%E5%A4%87">1-2-1. å‡†å¤‡</a></li>
<li><a href="#1-2-2-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">1-2-2. åˆ›å»ºé¡¹ç›®</a></li>
<li><a href="#1-2-3%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE">1-2-3.å¯åŠ¨é¡¹ç›®</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%AE%80%E4%BB%8B%E5%92%8C%E7%BC%96%E5%86%99helloworld">2.é¡¹ç›®ç›®å½•ç®€ä»‹å’Œç¼–å†™helloworld</a>
<ul>
<li><a href="#2-1-%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D">2-1. ç›®å½•ä»‹ç»</a></li>
<li><a href="#2-2%E7%BC%96%E5%86%99helloworld">2-2.ç¼–å†™helloworld</a></li>
</ul>
</li>
<li><a href="#3controller%E6%8E%A7%E5%88%B6%E5%99%A8-%E8%B7%AF%E7%94%B1%E5%92%8C%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%9B%E5%BB%BA">3.Controlleræ§åˆ¶å™¨-è·¯ç”±å’Œæ¨¡å—çš„åˆ›å»º</a>
<ul>
<li><a href="#3-1-%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1">3-1. åˆ›å»ºè·¯ç”±</a>
<ul>
<li><a href="#3-1-1-%E6%96%B0%E5%BB%BA%E8%B7%AF%E7%94%B1">3-1-1. æ–°å»ºè·¯ç”±</a></li>
<li><a href="#3-1-2-%E6%B7%BB%E5%8A%A0%E9%A1%B6%E5%B1%82%E8%B7%AF%E5%BE%84">3-1-2. æ·»åŠ é¡¶å±‚è·¯å¾„</a></li>
<li><a href="#3-2-1%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9B%AE%E5%BD%95">3-2-1.åˆå§‹åŒ–ç›®å½•</a></li>
<li><a href="#3-2-2%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97">3-2-2.ä½¿ç”¨å‘½ä»¤åˆ›å»ºæ¨¡å—</a></li>
<li><a href="#3-2-3-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAcontroller%E6%8E%A7%E5%88%B6%E5%99%A8">3-2-3. ä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªcontrolleræ§åˆ¶å™¨</a></li>
</ul>
</li>
<li><a href="#3-3%E5%88%9B%E5%BB%BA%E5%85%A8%E5%B1%80%E8%B7%AF%E7%94%B1%E5%89%8D%E7%BC%80">3-3.åˆ›å»ºå…¨å±€è·¯ç”±å‰ç¼€</a></li>
</ul>
</li>
<li><a href="#4controller%E6%8E%A7%E5%88%B6%E5%99%A8-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%9B%B8%E7%BB%93%E5%90%88">4.Controlleræ§åˆ¶å™¨-ä¸šåŠ¡é€»è¾‘ç›¸ç»“åˆ</a>
<ul>
<li><a href="#4-1-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAservice">4-1. ä½¿ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªservice</a></li>
<li><a href="#4-2controller%E6%8E%A7%E5%88%B6%E5%99%A8%E5%BC%95%E5%85%A5service%E9%80%BB%E8%BE%91">4-2.Controllerï¼ˆæ§åˆ¶å™¨ï¼‰å¼•å…¥serviceï¼ˆé€»è¾‘ï¼‰</a></li>
<li><a href="#4-3%E5%9C%A8service%E9%87%8C%E7%BC%96%E5%86%99%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91">4-3.åœ¨serviceé‡Œç¼–å†™ä¸šåŠ¡é€»è¾‘</a></li>
<li><a href="#4-4%E5%9C%A8controller%E4%B8%AD%E5%BE%97%E5%88%B0service%E7%9A%84%E7%B1%BB%E6%96%B9%E6%B3%95">4-4.åœ¨Controllerä¸­å¾—åˆ°serviceçš„ç±»æ–¹æ³•</a></li>
</ul>
</li>
<li><a href="#5get%E5%92%8Cpost%E8%AF%B7%E6%B1%82">5.Getå’ŒPostè¯·æ±‚</a>
<ul>
<li><a href="#5-1get%E8%AF%B7%E6%B1%82">5-1.Getè¯·æ±‚</a>
<ul>
<li><a href="#%E5%9C%A8service%E9%87%8C%E5%86%99%E4%B8%80%E4%B8%AA%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95%E6%A0%B9%E6%8D%AE%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E8%BF%94%E5%9B%9E%E5%80%BC">åœ¨serviceé‡Œå†™ä¸€ä¸ªå¸¦å‚æ•°çš„æ–¹æ³•ï¼Œæ ¹æ®å‚æ•°æŒ‡å®šè¿”å›å€¼ã€‚</a></li>
<li><a href="#%E5%9C%A8controller%E4%B8%AD%E4%BD%BF%E7%94%A8query%E8%A3%85%E9%A5%B0%E5%99%A8%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0">åœ¨<code>Controller</code>ä¸­ä½¿ç”¨<code>Query</code>è£…é¥°å™¨æ¥æ”¶å‚æ•°</a></li>
</ul>
</li>
<li><a href="#5-2post%E8%AF%B7%E6%B1%82">5-2.Postè¯·æ±‚</a>
<ul>
<li><a href="#%E5%9C%A8service%E9%87%8C%E5%86%99%E4%B8%80%E4%B8%AA%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95">åœ¨serviceé‡Œå†™ä¸€ä¸ªå¸¦å‚æ•°çš„æ–¹æ³•</a></li>
<li><a href="#%E5%9C%A8controller%E4%B8%AD%E4%BD%BF%E7%94%A8body%E8%A3%85%E9%A5%B0%E5%99%A8%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0">åœ¨<code>Controller</code>ä¸­ä½¿ç”¨<code>Body</code>è£…é¥°å™¨æ¥æ”¶å‚æ•°</a></li>
</ul>
</li>
<li><a href="#5-3%E4%BD%BF%E7%94%A8request%E8%A3%85%E9%A5%B0%E5%99%A8%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82">5-3.ä½¿ç”¨Requestè£…é¥°å™¨æ¥æ”¶è¯·æ±‚</a></li>
</ul>
</li>
<li><a href="#6%E5%88%9B%E5%BB%BA%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1">6.åˆ›å»ºåŠ¨æ€è·¯ç”±</a>
<ul>
<li><a href="#6-1%E4%BB%8B%E7%BB%8D">6-1.ä»‹ç»</a></li>
<li><a href="#6-2%E4%BD%BF%E7%94%A8request%E8%A3%85%E9%A5%B0%E5%99%A8%E6%8E%A5%E6%94%B6%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0">6-2.ä½¿ç”¨Requestè£…é¥°å™¨æ¥æ”¶åŠ¨æ€è·¯ç”±å‚æ•°</a></li>
<li><a href="#6-3%E4%BD%BF%E7%94%A8param%E8%A3%85%E9%A5%B0%E5%99%A8">6-3.ä½¿ç”¨Paramè£…é¥°å™¨</a></li>
<li><a href="#6-4%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92">6-4.åŠ¨æ€è·¯ç”±å¤šä¸ªå‚æ•°ä¼ é€’</a></li>
</ul>
</li>
<li><a href="#7-%E5%B8%B8%E7%94%A8%E8%A3%85%E9%A5%B0%E5%99%A8%E6%80%BB%E7%BB%93">7. å¸¸ç”¨è£…é¥°å™¨æ€»ç»“</a>
<ul>
<li><a href="#7-1-get">7-1. @Get</a></li>
<li><a href="#7-2-post">7-2. @Post</a></li>
<li><a href="#7-3-request">7-3. @Request</a></li>
<li><a href="#7-4-param">7-4. @Param</a></li>
<li><a href="#7-5-query">7-5. @Query</a></li>
<li><a href="#7-6-body">7-6. @Body</a></li>
<li><a href="#7-7-headers">7-7. @Headers</a>
<ul>
<li><a href="#%E4%BB%8B%E7%BB%8D">ä»‹ç»</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8">ä½¿ç”¨</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#8%E4%BD%BF%E7%94%A8orm%E5%B7%A5%E5%85%B7">8.ä½¿ç”¨ORMå·¥å…·</a>
<ul>
<li><a href="#%E4%BB%8B%E7%BB%8D-2">ä»‹ç»</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%9A%84orm%E5%B7%A5%E5%85%B7">å¸¸è§çš„ORMå·¥å…·</a></li>
</ul>
</li>
<li><a href="#9nestjs%E4%B8%AD%E4%BD%BF%E7%94%A8typeorm">9.nestJsä¸­ä½¿ç”¨TypeOrm</a>
<ul>
<li><a href="#9-1%E5%AE%89%E8%A3%85typeorm%E5%92%8Cmysql2">9-1.å®‰è£…TypeOrmå’Œmysql2</a></li>
<li><a href="#9-2%E5%BC%95%E5%85%A5">9-2.å¼•å…¥</a></li>
</ul>
</li>
<li><a href="#10%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C-typeorm%E7%9A%84%E5%AE%9E%E4%BD%93%E6%93%8D%E4%BD%9C">10.æ•°æ®åº“æ“ä½œ-TypeORMçš„å®ä½“æ“ä½œ</a>
<ul>
<li><a href="#%E6%A6%82%E5%BF%B5-typeorm%E4%B8%AD%E7%9A%84%E5%AE%9E%E4%BD%93entities">æ¦‚å¿µ--TypeORMä¸­çš„å®ä½“Entities</a></li>
<li><a href="#%E5%A2%9E%E5%8A%A0%E9%85%8D%E7%BD%AE%E9%A1%B9">å¢åŠ é…ç½®é¡¹</a></li>
<li><a href="#%E7%BC%96%E5%86%99entities%E5%AE%9E%E4%BD%93">ç¼–å†™Entitieså®ä½“</a></li>
</ul>
</li>
<li><a href="#11%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C-orm%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5">11.æ•°æ®åº“æ“ä½œ-ORMå¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥</a>
<ul>
<li><a href="#%E5%9C%A8service%E4%B8%AD%E5%BC%95%E5%85%A5%E8%A3%85%E9%A5%B0%E5%99%A8%E5%92%8C%E5%B7%A5%E5%85%B7">åœ¨<code>service</code>ä¸­å¼•å…¥è£…é¥°å™¨å’Œå·¥å…·</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0%E6%96%B0%E5%A2%9E">å®ç°æ–°å¢</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0%E5%88%A0%E9%99%A4">å®ç°åˆ é™¤</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE">å®ç°ä¿®æ”¹æ•°æ®</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE">å®ç°æŸ¥è¯¢æ•°æ®</a>
<ul>
<li><a href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89">æŸ¥è¯¢æ‰€æœ‰</a></li>
<li><a href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2">æ¨¡ç³ŠæŸ¥è¯¢</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#12-providers%E6%8F%90%E4%BE%9B%E8%80%85%E5%AE%9E%E7%8E%B0%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">12. Providers(æä¾›è€…)å®ç°ä¾èµ–æ³¨å…¥</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E5%AD%A6%E4%B9%A0%E9%93%BE%E6%8E%A5">å‚è€ƒå­¦ä¹ é“¾æ¥ï¼š</a></li>
<li><a href="#%E7%9B%B8%E5%85%B3%E6%96%87%E6%A1%A3">ç›¸å…³æ–‡æ¡£</a></li>
<li><a href="#%E5%8F%AF%E4%BB%A5%E5%8F%82%E8%80%83%E7%9A%84%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">å¯ä»¥å‚è€ƒçš„å¼€å‘é¡¹ç›®ç»“æ„</a></li>
</ul>

            </div>
          </div>
        </article>
      </div>

      
      <div class="next-post">
        <div class="next">ä¸‹ä¸€ç¯‡</div>
        <a href="https://qin_hu.gitee.io/blog/post/ye-wu-fa-song-you-jian-nodemailer/">
          <h3 class="post-title">
            ä¸šåŠ¡ - å‘é€é‚®ä»¶ï¼ˆnodemailerï¼‰
          </h3>
        </a>
      </div>
      

      

      <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://qin_hu.gitee.io/blog//atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>
<div id="backtop">
    <a href="#backtop" class="backTop" title="å›åˆ°é¡¶éƒ¨">
        <svg t="1702280870845" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="5528" width="50" height="50">
            <path
                d="M679.936 482.176l0.32-0.32-157.44-157.44c-6.912-6.912-18.112-6.912-25.024 0L342.4 479.872 342.592 480c-10.88 11.776-6.208 34.624 10.816 51.648s39.872 21.632 51.648 10.816L405.12 542.592l62.336-62.336 0 195.648c0 24 19.392 43.52 43.392 43.52s43.392-19.52 43.392-43.52L554.24 481.28l61.696 61.696c0.064 0.064 0.064 0.064 0.128 0.128l0.128 0.064 1.408 1.408 0.192-0.192c12.032 9.728 33.984 4.928 50.56-11.584C684.8 516.16 689.6 494.208 679.936 482.176z"
                fill="#8F9EB230" p-id="5529"></path>
            <path
                d="M512 64C264.576 64 64 264.576 64 512s200.576 448 448 448c247.36 0 448-200.64 448-448S759.36 64 512 64zM512 864.256c-194.56 0-352.192-157.76-352.192-352.256C159.808 317.504 317.44 159.808 512 159.808c194.496 0 352.192 157.696 352.192 352.192C864.192 706.496 706.496 864.256 512 864.256z"
                fill="#8F9EB230" p-id="5530"></path>
        </svg>
    </a>
</div>
<style>
.backTop {
  width: 50px;
  height: 50px;
  position: fixed;
  bottom: 50px;
  right: 50px;
  text-align: center;
  line-height: 50px;
  transition: .5s ease-in-out;

}

.backTop:hover {
  transform: translateY(15px);
}

#backtop {
  position: absolute;
  top: 0px;
  z-index: 100;
  opacity: 0;
}
</style>
<script>
    const bodyDom = document.querySelector('body')
    const backTopDom = document.querySelector('#backtop')
    document.addEventListener('scroll', (e) => {
        // console.log(bodyDom.scrollTop)
        if (bodyDom.scrollTop > 3550) {
            backTopDom.style.opacity = 1
        } else {
            backTopDom.style.opacity = 0
        }
    })
</script>
      <!-- <div class="theme">
    <input class="switch-input" id="theme-switch" type="checkbox">
    <label class="switch-control" for="theme-switch"></label>
    <div class="container"></div>
</div>
 -->
    </div>
  </div>

  <script>
    // hljs.initHighlightingOnLoad()
    // hljs.highlightAll();
    document.addEventListener('DOMContentLoaded', () => {
      hljs.highlightAll();
    });
    let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

    // This should probably be throttled.
    // Especially because it triggers during smooth scrolling.
    // https://lodash.com/docs/4.17.10#throttle
    // You could do like...
    // window.addEventListener("scroll", () => {
    //    _.throttle(doThatStuff, 100);
    // });
    // Only not doing it here to keep this Pen dependency-free.

    window.addEventListener("scroll", event => {
      let fromTop = window.scrollY;

      mainNavLinks.forEach((link, index) => {
        let section = document.getElementById(decodeURI(link.hash).substring(1));
        let nextSection = null
        if (mainNavLinks[index + 1]) {
          nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
        }
        if (section.offsetTop <= fromTop) {
          if (nextSection) {
            if (nextSection.offsetTop > fromTop) {
              link.classList.add("current");
            } else {
              link.classList.remove("current");
            }
          } else {
            link.classList.add("current");
          }
        } else {
          link.classList.remove("current");
        }
      });
    });
  </script>
</body>

</html>