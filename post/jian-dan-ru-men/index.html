<html>

<head>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>é¡¹ç›®å¼€å‘å·¥å…·ä¸ArkTså…¥é—¨ | ç¦¾è€³</title>
<link rel="shortcut icon" href="https://qin_hu.gitee.io/blog//favicon.ico?v=1714022378479">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://qin_hu.gitee.io/blog//styles/main.css">
<link rel="alternate" type="application/atom+xml" title="é¡¹ç›®å¼€å‘å·¥å…·ä¸ArkTså…¥é—¨ | ç¦¾è€³ - Atom Feed" href="https://qin_hu.gitee.io/blog//atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  <meta name="description" content="apiæ–‡æ¡£å±æ€§å’Œäº‹ä»¶åˆ—è¡¨ï¼š
https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V2/2_2_u7ec4_u4ef6_u901a_u7528_u4fe1_u60..." />
  <meta name="keywords" content="HarmonyOS" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script> -->

  <!-- and it's easy to individually load additional languages -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/night-owl.min.css">


</head>

<body>
  <div class="main">
    <div class="main-content">
      <div class="site-header">
  <a href="https://qin_hu.gitee.io/blog/">
    <img class="avatar" src="https://qin_hu.gitee.io/blog//images/avatar.png?v=1714022378479" alt="">
  </a>

  <h1 class="site-title">
    ç¦¾è€³
  </h1>
  <p class="site-description">
    é€†é£çš„æ–¹å‘ï¼Œæ›´é€‚åˆé£ç¿”ã€‚
  </p>
  <form style=" position: absolute;
  top: 50px;
  right: 150px;
  border: unset;
  outline: unset;display: flex;" id="gridea-search-form" action="https://qin_hu.gitee.io/blog//search/">
    <input placeholder="è¯·è¾“å…¥.." style="color: #222 !important;margin-right: 10px;
   " name="q" />
    <svg onclick="window.location.reload()" style="
    cursor: pointer;    filter: invert(1);" title="åˆ·æ–°é¡µé¢" class="shuaxin-icon" t="1705541456452" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
      p-id="4229" width="20" height="20">
      <path
        d="M55.935033 264.48948c0 0 85.897017-132.548409 221.81443-203.673173 135.916406-71.121743 303.368504-50.646859 413.187968 18.319527 109.819465 68.970415 146.791894 127.160016 146.791894 127.160016l94.59499-53.879895c0 0 19.576483-9.697092 19.576483 12.932142l0 338.379961c0 0 0 30.17399-22.837719 19.395191-19.210878-9.062571-226.959086-127.198289-292.424528-164.466828-35.950145-16.035251-4.365101-29.062068-4.365101-29.062068l91.284402-52.173738c0 0-52.068992-65.209619-128.278989-99.744682-81.576231-42.501826-157.948384-47.541735-251.497925-12.224097-61.002644 23.025054-132.823368 81.988166-184.553949 169.082716L55.935033 264.48948 55.935033 264.48948 55.935033 264.48948zM904.056909 711.697844c0 0-85.897017 132.550423-221.816444 203.671159-135.917413 71.12275-303.366489 50.651895-413.186961-18.315498-109.825508-68.972429-146.790886-127.165052-146.790886-127.165052L27.662591 823.768348c0 0-19.572454 9.703135-19.572454-12.932142L8.090137 472.459267c0 0 0-30.170968 22.831676-19.397205 19.211885 9.067607 226.965129 127.198289 292.430571 164.470856 35.950145 16.035251 4.366109 29.058039 4.366109 29.058039l-91.285409 52.175753c0 0 52.071006 65.206598 128.279996 99.744682 81.57321 42.498804 157.942341 47.540728 251.496918 12.222082 60.998616-23.026061 132.820346-81.983131 184.546898-169.082716L904.056909 711.697844 904.056909 711.697844 904.056909 711.697844zM904.056909 711.697844"
        fill="#2c2c2c" p-id="4230"></path>
    </svg>
  </form>
  <button style="    border: unset;
  background: #f0f8ff00;cursor: pointer;" class="theme-button" onclick="changeTheme()">
    ğŸŒ™
  </button>
  <div class="menu-container">
    
    
    <a href="https://qin_hu.gitee.io/blog/" class="menu">
      é¦–é¡µ
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/archives" class="menu">
      å½’æ¡£
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/tags" class="menu">
      æ ‡ç­¾
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/friend" class="menu">
      å‹é“¾
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/about" class="menu">
      å…³äº
    </a>
    
    
  </div>
  <div class="social-container">
    
    
    <a href="https://github.com/QinCongH" target="_blank">
      <i class="ri-github-line"></i>
    </a>
    
    
    
    
    
    
    
    
    
    
  </div>
</div>
<script>
  window.addEventListener('load', () => {
    const themeType = localStorage.getItem('theme')
    const bodyDom = document.querySelector('body')
    const themeButtonDom = document.querySelector('.theme-button')
    // console.log(1111111111111111, themeType)
    if (themeType === 'light') {
      bodyDom.removeAttribute('thmem-dark')
      themeButtonDom.textContent = 'ğŸŒ™'
      localStorage.setItem('theme', 'light')
    } else {
      bodyDom.setAttribute('thmem-dark', '')
      themeButtonDom.textContent = 'ğŸŒ'
      localStorage.setItem('theme', 'dark')
    }
  })

  function changeTheme() {
    const bodyDom = document.querySelector('body')
    const themeButtonDom = document.querySelector('.theme-button')
    const attr = bodyDom.hasAttribute('thmem-dark')
    if (attr) {
      bodyDom.removeAttribute('thmem-dark')
      themeButtonDom.textContent = 'ğŸŒ™'
      localStorage.setItem('theme', 'light')
    } else {
      bodyDom.setAttribute('thmem-dark', '')
      themeButtonDom.textContent = 'ğŸŒ'
      localStorage.setItem('theme', 'dark')
    }
  }
</script>
      <div class="post-detail">
        <article class="post">
          <h2 class="post-title">
            é¡¹ç›®å¼€å‘å·¥å…·ä¸ArkTså…¥é—¨
          </h2>
          <div class="post-info">
            <span>
              2023-12-18
            </span>
            <span>
              25 min read
            </span>
            
            <a href="https://qin_hu.gitee.io/blog/tag/sjEwf3qeE/" class="post-tag">
              # HarmonyOS
            </a>
            
          </div>
          
          <div class="post-content-wrapper">
            <div class="post-content" v-pre>
              <p>apiæ–‡æ¡£å±æ€§å’Œäº‹ä»¶åˆ—è¡¨ï¼š<br>
https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V2/2_2_u7ec4_u4ef6_u901a_u7528_u4fe1_u606f-0000001478341097-V2</p>
<h1 id="ä¸€-å¼€å‘å·¥å…·">ä¸€. å¼€å‘å·¥å…·</h1>
<h2 id="1-ideç¯å¢ƒé…ç½®">1. IDEç¯å¢ƒé…ç½®</h2>
<p>å­¦ä¹ çš„é¸¿è’™ç¬¬ä¸€æ­¥å°±æ˜¯ä¸‹è½½åä¸ºDevEco Studioå¼€å‘å·¥å…·ï¼Œç‚¹å‡»ä¸‹é¢çš„é“¾æ¥è¿›å…¥åä¸ºçš„å®˜ç½‘ä¸‹è½½ã€‚<br>
<a href="https://developer.huawei.com/consumer/cn/deveco-studio/">IDEä¸‹è½½åœ°å€</a></p>
<p>ä¸‹è½½å¥½å¼€å‘å·¥å…·åæ‰“å¼€ï¼Œæ ¹æ®æç¤ºé…ç½®NodeJså’Œohpmï¼Œå®‰è£…Harmony Sdkã€‚</p>
<h2 id="2-åˆ›å»ºå¹¶è¿è¡Œé¡¹ç›®">2. åˆ›å»ºå¹¶è¿è¡Œé¡¹ç›®</h2>
<p>åˆ›å»ºé¡¹ç›®ï¼šæ‰“å¼€å¼€å‘è€…å·¥å…·=&gt;åˆ›å»ºä¸€ä¸ªé¡¹ç›®<br>
è¿è¡Œé¡¹ç›®ï¼šprevieweré¢„è§ˆæˆ–è€…åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿå™¨é¢„è§ˆã€‚</p>
<h2 id="3-å·¥ç¨‹ç›®å½•">3. å·¥ç¨‹ç›®å½•</h2>
<p>AppScope å­˜æ”¾åº”ç”¨å…¨å±€æ‰€éœ€è¦çš„èµ„æºæ–‡ä»¶ã€‚<br>
entry åº”ç”¨çš„ä¸»æ¨¡å—ï¼Œå­˜æ”¾HarmonyOSåº”ç”¨çš„ä»£ç ã€èµ„æºç­‰ã€‚<br>
oh_modules å·¥ç¨‹çš„ä¾èµ–åŒ…ï¼Œå­˜æ”¾å·¥ç¨‹ä¾èµ–çš„æºæ–‡ä»¶ã€‚<br>
build-profile.json5 å·¥ç¨‹çº§é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç­¾åã€äº§å“é…ç½®ç­‰ã€‚<br>
hvigorfile.ts å·¥ç¨‹çº§ç¼–è¯‘æ„å»ºä»»åŠ¡è„šæœ¬ï¼Œhvigoræ˜¯åŸºäºä»»åŠ¡ç®¡ç†æœºåˆ¶å®ç°çš„ä¸€æ¬¾å…¨æ–°çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œä¸»è¦æä¾›ä»»åŠ¡æ³¨å†Œç¼–æ’ï¼Œå·¥ç¨‹æ¨¡å‹ç®¡ç†ã€é…ç½®ç®¡ç†ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚<br>
oh-package.json5 å·¥ç¨‹çº§ä¾èµ–é…ç½®æ–‡ä»¶ï¼Œç”¨äºè®°å½•å¼•å…¥åŒ…çš„é…ç½®ä¿¡æ¯ã€‚</p>
<h2 id="4-å®˜æ–¹æ–‡æ¡£">4. å®˜æ–¹æ–‡æ¡£</h2>
<p><a href="https://developer.huawei.com/consumer/cn/training/course/slightMooc/C101667303102887820?ha_linker=eyJ0cyI6MTcwMjkwNDYzNTQyNCwiaWQiOiIxM2E3Mjc4NjJmYjc2MjE1ZTVmYjc5MmMyYmE5ZDE3NiJ9">https://developer.huawei.com/consumer/cn/training/course/slightMooc/C101667303102887820?ha_linker=eyJ0cyI6MTcwMjkwNDYzNTQyNCwiaWQiOiIxM2E3Mjc4NjJmYjc2MjE1ZTVmYjc5MmMyYmE5ZDE3NiJ9</a></p>
<h1 id="äºŒ-arktså…¥é—¨">äºŒ. ArkTså…¥é—¨</h1>
<blockquote>
<p>å‰ç½®çŸ¥è¯†<br>
ArkTSåœ¨TSçš„ç±»å‹ç³»ç»Ÿçš„åŸºç¡€ä¸Šï¼Œåšäº†è¿›ä¸€æ­¥çš„æ‰©å±•ï¼šå®šä¹‰äº†å„ç§è£…é¥°å™¨ã€è‡ªå®šä¹‰ç»„ä»¶å’ŒUIæè¿°æœºåˆ¶ã€‚å­¦ä¹ arkTséœ€è¦ä¼šjså’Œtsã€‚</p>
</blockquote>
<p>æŸ¥çœ‹typescriptæ–‡æ¡£<br>
<a href="https://developer.huawei.com/consumer/cn/training/course/slightMooc/C101667356568959645">https://developer.huawei.com/consumer/cn/training/course/slightMooc/C101667356568959645</a></p>
<h2 id="1-å£°æ˜å¼uiæè¿°">1. å£°æ˜å¼UIæè¿°</h2>
<h3 id="1-1-ç»„ä»¶è¡¨ç¤º">1-1. ç»„ä»¶è¡¨ç¤º</h3>
<ol>
<li>æœ‰å‚æ•°ç»„ä»¶</li>
</ol>
<pre><code>Text('è¿™æ˜¯æ–‡æœ¬å†…å®¹')
</code></pre>
<ol start="2">
<li>æ— å‚æ•°ç»„ä»¶</li>
</ol>
<pre><code>Text()
</code></pre>
<h3 id="1-2-é…ç½®ç»„ä»¶çš„å±æ€§">1-2. é…ç½®ç»„ä»¶çš„å±æ€§</h3>
<ol>
<li>é…ç½®å•ä¸ªå±æ€§</li>
</ol>
<pre><code>Text('è¿™æ˜¯æ–‡æœ¬å†…å®¹').fontSize(20)
</code></pre>
<ol start="2">
<li>é…ç½®å¤šä¸ªå±æ€§</li>
</ol>
<pre><code>Image('test.jpg')
  .alt('error.jpg')    
  .width(100)    
  .height(100)
</code></pre>
<ol start="3">
<li>å±æ€§ä¼ é€’å˜é‡æˆ–è€…è¡¨è¾¾å¼</li>
</ol>
<pre><code>Text('hello')
  .fontSize(this.size)
Image('test.jpg')
  .width(this.count % 2 === 0 ? 100 : 200)    
  .height(this.offset + 100)
</code></pre>
<ol start="4">
<li>ä½¿ç”¨ArkUIæä¾›çš„æšä¸¾</li>
</ol>
<pre><code>Text('hello')
  .fontSize(this.size)
Image('test.jpg')
  .width(this.count % 2 === 0 ? 100 : 200)    
  .height(this.offset + 100)

</code></pre>
<h3 id="1-3-ç»™ç»„ä»¶æ·»åŠ äº‹ä»¶">1-3. ç»™ç»„ä»¶æ·»åŠ äº‹ä»¶</h3>
<ol>
<li>ä½¿ç”¨ç®­å¤´å‡½æ•°é…ç½®ç»„ä»¶çš„äº‹ä»¶æ–¹æ³•ã€‚</li>
</ol>
<pre><code>Button('è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®')
.onClick(()=&gt;{
    console.log('ç‚¹å‡»äº†')
})
</code></pre>
<p>æˆ–è€…ä½¿ç”¨ç»„ä»¶å£°æ˜çš„ç®­å¤´å‡½æ•°</p>
<pre><code>clickHandle=()=&gt;{
     console.log('ç‚¹å‡»äº†')
}
Button('è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®')
.onClick(this.clickHandle)
</code></pre>
<ol start="2">
<li>ä½¿ç”¨åŒ¿åå‡½æ•°è¡¨è¾¾å¼é…ç½®ç»„ä»¶çš„äº‹ä»¶æ–¹æ³•ï¼Œè¦æ±‚ä½¿ç”¨bindï¼Œä»¥ç¡®ä¿å‡½æ•°ä½“ä¸­çš„thisæŒ‡å‘å½“å‰ç»„ä»¶ã€‚</li>
</ol>
<pre><code>Button('è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®')
.onClick(function(){
    console.log(this.message)
}.bind(this))
</code></pre>
<p>æˆ–è€…ä½¿ç”¨ç»„ä»¶å£°æ˜çš„å‡½æ•°</p>
<pre><code>clickHandle(){
    console.log(this.message)
}

Button('è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®')
.onClick(this.clickHandle.bind(this))
</code></pre>
<h3 id="1-4-ç»„ä»¶åµŒå¥—é…ç½®å­ç»„ä»¶">1-4. ç»„ä»¶åµŒå¥—ï¼Œé…ç½®å­ç»„ä»¶</h3>
<p>Columnã€Rowã€Stackã€Gridã€Listç­‰ç»„ä»¶éƒ½æ˜¯å®¹å™¨ç»„ä»¶,å‡æ”¯æŒå­ç»„ä»¶é…ç½®</p>
<pre><code>Column() {
  Row() {
    Image('test1.jpg')
      .width(100)
      .height(100)
    Button('click +1')
      .onClick(() =&gt; {
        console.info('+1 clicked!');
      })
  }
}
</code></pre>
<ol start="2">
<li>
<h2 id="å¸¸ç”¨è£…é¥°å™¨">å¸¸ç”¨è£…é¥°å™¨</h2>
</li>
</ol>
<h3 id="entry">@Entry</h3>
<p>@Entryè£…é¥°çš„è‡ªå®šä¹‰ç»„ä»¶å°†ä½œä¸ºUIé¡µé¢çš„å…¥å£ã€‚åœ¨å•ä¸ªUIé¡µé¢ä¸­ï¼Œæœ€å¤šå¯ä»¥ä½¿ç”¨@Entryè£…é¥°ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ã€‚@Entryå¯ä»¥æ¥å—ä¸€ä¸ªå¯é€‰çš„LocalStorageçš„å‚æ•°ã€‚</p>
<pre><code>@Entry
@Component
struct MyComponent {
}
</code></pre>
<h3 id="component">@Component</h3>
<p>@Componentè£…é¥°å™¨ä»…èƒ½è£…é¥°structå…³é”®å­—å£°æ˜çš„æ•°æ®ç»“æ„ã€‚structè¢«@Componentè£…é¥°åå…·å¤‡ç»„ä»¶åŒ–çš„èƒ½åŠ›ï¼Œéœ€è¦å®ç°buildæ–¹æ³•æè¿°UIï¼Œä¸€ä¸ªstructåªèƒ½è¢«ä¸€ä¸ª@Componentè£…é¥°ã€‚</p>
<pre><code>@Component
struct MyComponent{

}
</code></pre>
<h3 id="builder">@Builder</h3>
<p>é€šè¿‡è‡ªå®šä¹‰æ„å»ºå‡½æ•°æ„å»ºè‡ªå®šä¹‰ç»„ä»¶ã€‚è¢«@Builderè£…é¥°çš„å‡½æ•°æ˜¯ç»„ä»¶å†…ç§æœ‰æˆå‘˜å‡½æ•°ï¼Œåªèƒ½åœ¨ç»„ä»¶çš„buildæ–¹æ³•ä¸­ä½¿ç”¨ï¼Œä¸èƒ½åœ¨ç»„ä»¶å¤–éƒ¨ä½¿ç”¨ã€‚åœ¨ç»„ä»¶å†…é€šè¿‡thisè®¿é—®ã€‚</p>
<ul>
<li>ç»„ä»¶ä¸­ä½¿ç”¨</li>
</ul>
<pre><code>@Component
struct MyComponent{
// å®šä¹‰
@Builder MyBuilderFunction(){ 
    Text('ä½ å¥½')
}
// ä½¿ç”¨
this.MyBuilderFunction()
}
</code></pre>
<ul>
<li>å…¨å±€ä¸­ä½¿ç”¨</li>
</ul>
<pre><code>// å…¨å±€åˆ›å»ºè‡ªå®šä¹‰æ„å»ºå‡½æ•°
@Builder function builderComponent(){
  Button('è¿™æ˜¯ä¸€ä¸ªå…¨å±€æŒ‰é’®')
}
@Entry()
@Component
struct Index {
  build() {
    Row() {
      Column() {
          // ç»„ä»¶å¼•ç”¨
        builderComponent()
      }
      .width('100%')
    }
    .height('100%')
  }
}

</code></pre>
<ul>
<li>æŒ‰å¼•ç”¨åœ°å€ä¼ é€’</li>
</ul>
<p>æŒ‰å¼•ç”¨ä¼ é€’å‚æ•°æ—¶ï¼Œä¼ é€’çš„å‚æ•°å¯ä¸ºçŠ¶æ€å˜é‡ï¼Œä¸”çŠ¶æ€å˜é‡çš„æ”¹å˜ä¼šå¼•èµ·@Builderæ–¹æ³•å†…çš„UIåˆ·æ–°ã€‚</p>
<p>ArkUIæä¾›$$ä½œä¸ºæŒ‰å¼•ç”¨ä¼ é€’å‚æ•°çš„èŒƒå¼ã€‚</p>
<pre><code>@Builder function builderComponent($$:{text:string}){
  Button($$.text)
}

// ç»„ä»¶ä¸­ä¼ å‚
builderComponent({text:'è¿™æ˜¯è‡ªå®šä¹‰çš„æ„å»ºå‡½æ•°ç»„ä»¶'})
</code></pre>
<ul>
<li>æŒ‰å€¼ä¼ é€’å‚æ•°</li>
</ul>
<p>è°ƒç”¨@Builderè£…é¥°çš„å‡½æ•°é»˜è®¤æŒ‰å€¼ä¼ é€’ã€‚å½“ä¼ é€’çš„å‚æ•°ä¸ºçŠ¶æ€å˜é‡æ—¶ï¼ŒçŠ¶æ€å˜é‡çš„æ”¹å˜ä¸ä¼šå¼•èµ·@Builderæ–¹æ³•å†…çš„UIåˆ·æ–°ã€‚</p>
<pre><code>@Builder function builderComponent(text:string='è‡ªå®šä¹‰æ–‡æœ¬'){
  Button(text)
}

// ç»„ä»¶ä¸­ä¼ å‚
builderComponent('è¿™æ˜¯è‡ªå®šä¹‰çš„æ„å»ºå‡½æ•°ç»„ä»¶')
</code></pre>
<h3 id="builderparam">@BuilderParam</h3>
<p>@BuilderParamç”¨æ¥è£…é¥°æŒ‡å‘@Builderæ–¹æ³•çš„å˜é‡ï¼Œå¼€å‘è€…å¯åœ¨åˆå§‹åŒ–è‡ªå®šä¹‰ç»„ä»¶æ—¶å¯¹æ­¤å±æ€§è¿›è¡Œèµ‹å€¼ï¼Œä¸ºè‡ªå®šä¹‰ç»„ä»¶å¢åŠ ç‰¹å®šçš„åŠŸèƒ½ã€‚è¯¥è£…é¥°å™¨ç”¨äºå£°æ˜ä»»æ„UIæè¿°çš„ä¸€ä¸ªå…ƒç´ ï¼Œç±»ä¼¼slotå ä½ç¬¦ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„Layouå¸ƒå±€ç»„ä»¶ä¸ºç¤ºä¾‹ï¼Œå®ç°å¸ƒå±€å¤´éƒ¨å’Œåº•éƒ¨é€šè¿‡ç»„ä»¶ä¼ é€’ï¼Œå¹¶ä¸”æ”¯æŒè®¾ç½®é»˜è®¤å€¼</p>
<h4 id="1-builderparam-è®¾ç½®é»˜è®¤å€¼">1. @BuilderParam è®¾ç½®é»˜è®¤å€¼</h4>
<pre><code>
@Entry()
@Component
struct Index {
  build() {
    Column(){
      MyComponent()
    }
  }
}
@Component
struct  MyComponent {
  build(){
      Column(){
        LayoutComponent()
      }.width('100%')
      .height('100%')
      .backgroundColor(Color.Blue)
  }
}
@Component
struct  LayoutComponent {
  // @BuilderParam è®¾ç½®é»˜è®¤å€¼
  @Builder HeaderComponent(){
    Text('header')
  }
  @Builder FooterComponent(){
    Text('footer')
  }
  // å®šä¹‰å¹¶è®¾ç½®é»˜è®¤å€¼
  @BuilderParam LayoutHeader:()=&gt;void=this.HeaderComponent;
  @BuilderParam LayoutFooter:()=&gt;void=this.FooterComponent;
  build(){
      Column(){
        this.LayoutHeader()// å®šä¹‰å ä½
        Text('ä¸»è¦å†…å®¹')
        this.LayoutFooter()// å®šä¹‰å ä½
      }.width('100%')
      .height('100%')
      .backgroundColor(Color.White)
  }
}
</code></pre>
<p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘é¦–å…ˆä½¿ç”¨è‡ªå®šä¹‰æ„å»ºå‡½æ•°@Builderè£…é¥°å™¨åˆ›å»ºäº†é»˜è®¤çš„å…ƒç´ ï¼Œç„¶åé€šè¿‡  @BuilderParamè£…é¥°å™¨å®šä¹‰å ä½æ–¹æ³•åç§°ï¼Œå¹¶ä¸”è®¾ç½®äº†é»˜è®¤å€¼ï¼›æœ€ååœ¨è‡ªå®šä¹‰çš„ç»„ä»¶ä¸­ä½¿ç”¨@BuilderParamè£…é¥°å™¨åˆ›å»ºçš„å ä½ç»„ä»¶ã€‚</p>
<h4 id="2-builderparam-ä¸è®¾ç½®é»˜è®¤å€¼">2. @BuilderParam ä¸è®¾ç½®é»˜è®¤å€¼</h4>
<p>ä¸è®¾ç½®é»˜è®¤å€¼çš„æ—¶å€™ç»™ç»„ä»¶é»˜è®¤èµ‹å€¼ä¸€ä¸ªç©ºï¼Œå³void</p>
<pre><code>
@Entry()
@Component
struct Index {
  build() {
    Column(){
      MyComponent()
    }
  }
}
@Component
struct  MyComponent {
  build(){
      Column(){
        LayoutComponent()
      }.width('100%')
      .height('100%')
      .backgroundColor(Color.Blue)
  }
}
@Component
struct  LayoutComponent {
  // å®šä¹‰
  @BuilderParam LayoutHeader:()=&gt;void;;
  @BuilderParam LayoutFooter:()=&gt;void;
  build(){
      Column(){
          // æ­¤æ—¶ç›´æ¥ä½¿ç”¨å°†ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯æœ‰ç»„ä»¶å°†æ„é€ ç»„ä»¶ä¼ è¿›æ¥ã€‚
        this.LayoutHeader()
        Text('ä¸»è¦å†…å®¹')
        this.LayoutFooter()
      }.width('100%')
      .height('100%')
      .backgroundColor(Color.White)
  }
}
</code></pre>
<p>æ³¨æ„ï¼Œæ­¤æ—¶ç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å°†ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯æœ‰ç»„ä»¶å°†æ„é€ ç»„ä»¶ä¼ è¿›æ¥ã€‚</p>
<h4 id="3-åœ¨çˆ¶ç»„ä»¶å¼•å…¥ç»„ä»¶çš„åœ°æ–¹ä¸­ä¼ å€¼">3. åœ¨çˆ¶ç»„ä»¶ï¼ˆå¼•å…¥ç»„ä»¶çš„åœ°æ–¹ï¼‰ä¸­ä¼ å€¼</h4>
<pre><code>@Entry()
@Component
struct Index {
  build() {
    Column(){
      MyComponent()
    }
  }
}
@Component
struct  MyComponent {
    //è‡ªå®šä¹‰çš„æ„é€ å™¨ç»„ä»¶å‡½æ•°
  @Builder HeaderComponent(){
    Text('header')
  }
  @Builder FooterComponent(){
    Text('footer')
  }
  build(){
      Column(){
          // å¼•å…¥ç»„ä»¶æ—¶ä¼ æ„é€ å™¨ç»„ä»¶å‡½æ•°
        LayoutComponent({
          LayoutHeader:this.HeaderComponent,
          LayoutFooter:this.FooterComponent
        })
      }.width('100%')
      .height('100%')
      .backgroundColor(Color.Blue)
  }
}
</code></pre>
<p><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-builderparam-0000001524416541-V3#section1857851331310">@BuilderParamå®˜æ–¹æ–‡æ¡£</a></p>
<h3 id="styles">@Styles</h3>
<p>å®šä¹‰ç»„ä»¶é‡ç”¨æ ·å¼ã€‚</p>
<p>æ³¨æ„ç‚¹ï¼š1. @Stylesä¸æ”¯æŒå‚æ•°ã€‚ 2. å¯ä»¥åœ¨å…¨å±€å®šä¹‰ï¼Œéœ€åŠ ä¸Šfunctionå…³é”®å­—ã€‚å±€éƒ¨å®šä¹‰åˆ™ä¸éœ€è¦åŠ å…³é”®å­—ã€‚3. åœ¨ç»„ä»¶å†…å®šä¹‰çš„@Styleså¯ä»¥é€šè¿‡thisè®¿é—®ç»„ä»¶çš„å¸¸é‡å’ŒçŠ¶æ€å¸¸é‡ã€‚4. ç»„ä»¶å†…@Stylesçš„ä¼˜å…ˆçº§é«˜äºå…¨å±€@Stylesã€‚</p>
<h4 id="1-ç»„ä»¶å†…ä½¿ç”¨styles">1. ç»„ä»¶å†…ä½¿ç”¨@Styles</h4>
<pre><code>@Entry()
@Component
struct Index {
  build() {
    Column(){
      MyComponent()
    }
  }
}
@Component
struct  MyComponent {
  //ç»„ä»¶å†… - è‡ªå®šä¹‰ç»„ä»¶æ ·å¼
  @Styles MyStyle(){
    .width('100%')
    .height('100%')
    .backgroundColor(Color.Pink)
  }
  build(){
      // ä½¿ç”¨å±€éƒ¨ç»„ä»¶
       Column(){
       }.MyStyle()
  }
}
</code></pre>
<h4 id="2-å…¨å±€ä½¿ç”¨styles">2. å…¨å±€ä½¿ç”¨@Styles</h4>
<pre><code>  @Entry()
  @Component
  struct Index {
    build() {
      Column(){
        MyComponent()
      }
    }
  }
  // å…¨å±€å®šä¹‰æ ·å¼
  @Styles function CommonStyle(){
    .width('100%')
    .height('100%')
    .backgroundColor(Color.Pink)
  }
  @Component
  struct  MyComponent {
    build(){
    // ä½¿ç”¨å…¨å±€å®šä¹‰çš„æ ·å¼
      Column(){
      }.CommonStyle()
    }
  }

</code></pre>
<h4 id="3-åœ¨ç»„ä»¶å†…ä½¿ç”¨çŠ¶æ€å˜é‡">3. åœ¨ç»„ä»¶å†…ä½¿ç”¨çŠ¶æ€å˜é‡</h4>
<pre><code>  @Entry()
  @Component
  struct Index {
    build() {
      Column(){
        MyComponent()
      }
    }
  }
  @Component
  struct  MyComponent {
    @State setWidth:string='100%';
    @State setHeight:string='100%';
    //ç»„ä»¶å†… - è‡ªå®šä¹‰ç»„ä»¶æ ·å¼
    @Styles MyStyle(){
        // ä½¿ç”¨è‡ªå®šä¹‰çš„çŠ¶æ€å˜é‡
      .width(this.setWidth)
      .height(this.setHeight)
      .backgroundColor(Color.Pink)
    }
    build(){
        // å±€éƒ¨
        Column(){
        }.MyStyle()
    }
  }
</code></pre>
<h3 id="extend">@Extend</h3>
<p>æ‰©å±•ç»„ä»¶æ ·å¼<br>
æ³¨æ„ç‚¹ï¼š1. @Extendä»…æ”¯æŒå®šä¹‰åœ¨å…¨å±€ã€‚2. @Extendæ”¯æŒå°è£…æŒ‡å®šçš„ç»„ä»¶çš„ç§æœ‰å±æ€§å’Œç§æœ‰äº‹ä»¶å’Œé¢„å®šä¹‰ç›¸åŒç»„ä»¶çš„@Extendçš„æ–¹æ³•ã€‚3.@Extendè£…é¥°çš„æ–¹æ³•æ”¯æŒå‚æ•°ã€‚å‚æ•°å¯ä»¥ä¸ºçŠ¶æ€å˜é‡ã€‚</p>
<h4 id="extendä»…æ”¯æŒå®šä¹‰åœ¨å…¨å±€å¹¶ä¸”ä¼ å‚">@Extendä»…æ”¯æŒå®šä¹‰åœ¨å…¨å±€å¹¶ä¸”ä¼ å‚</h4>
<pre><code>
  @Entry()
  @Component
  struct Index {
    build() {
      Column(){
        MyComponent()
      }
    }
  }
  // å…¨å±€å®šä¹‰ç»§æ‰¿å†…ç½®ç»„ä»¶çš„æ ·å¼
  @Extend(Text) function TextCustom(color:string){
    .fontSize('33vp')
    .fontColor(color)
  }
  @Component
  struct  MyComponent {
    build(){
      Column(){
        Text('è‡ªå®šä¹‰æ–‡å­—')
          .TextCustom('red') // ä½¿ç”¨è‡ªå®šä¹‰çš„æ ·å¼
      }
    }
  }
</code></pre>
<h4 id="extendä¼ é€’äº‹ä»¶">@Extendä¼ é€’äº‹ä»¶</h4>
<pre><code>  @Entry()
  @Component
  struct Index {
    build() {
      Column(){
        MyComponent()
      }
    }
  }
  // å…¨å±€å®šä¹‰ç»§æ‰¿å†…ç½®ç»„ä»¶çš„æ ·å¼
  @Extend(Text) function TextCustom(color:string,onClick:()=&gt;void){
    .fontSize('33vp')
    .fontColor(color)
    .onClick(onClick)
  }
    // äº‹ä»¶
    myClickHandle=()=&gt;{
      console.log('ç‚¹å‡»äº†')
    }
    build(){
      Column(){
          // ä¼ é€’ä¸€ä¸ªäº‹ä»¶
        Text('è‡ªå®šä¹‰æ–‡å­—')
          .TextCustom('red',this.myClickHandle)
      }
    }
  }
</code></pre>
<h3 id="å¤šæ€æ ·å¼-statestyles">å¤šæ€æ ·å¼ stateStyles</h3>
<p>stateStylesæ˜¯å±æ€§æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®UIå†…éƒ¨çŠ¶æ€æ¥è®¾ç½®æ ·å¼ï¼Œç±»ä¼¼äºcssä¼ªç±»ï¼Œä½†è¯­æ³•ä¸åŒã€‚ArkUIæä¾›ä»¥ä¸‹å››ç§çŠ¶æ€ï¼š<br>
focusedï¼šè·ç„¦æ€ã€‚<br>
normalï¼šæ­£å¸¸æ€ã€‚<br>
pressedï¼šæŒ‰å‹æ€ã€‚<br>
disabledï¼šä¸å¯ç”¨æ€ã€‚</p>
<pre><code>  @Entry()
  @Component
  struct Index {
    build() {
      Column(){
        MyComponent()
      }
    }
  }
  @Component
  struct  MyComponent {
    build(){
      Column(){
        Button(&quot;è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®&quot;)
          .stateStyles({
            // é»˜è®¤æ ·å¼
            normal:{
              .backgroundColor('#222')
            },
            // æŒ‰å‹æ ·å¼
            pressed:{
              .backgroundColor('#528d3a')
            },
           // ç¦ç”¨æ ·å¼
            disabled:{
              .opacity(.5)
            }
          })
        TextInput()
          .stateStyles({
            normal:{
              .backgroundColor('#ffffff')
            },
            // èšç„¦æ ·å¼
            focused:{
              .backgroundColor('#90c2f3')
            }
          })
      }
    }
  }

</code></pre>
<h2 id="3-ç»„ä»¶">3. ç»„ä»¶</h2>
<h3 id="3-1-äº†è§£ç»„ä»¶">3-1. äº†è§£ç»„ä»¶</h3>
<p>ç»„ä»¶çš„ç‰¹æ€§ï¼šå¯ç»„åˆï¼Œå¯é‡ç”¨ï¼Œæ•°æ®é©±åŠ¨UIæ›´æ–°ã€‚</p>
<p>ç»„ä»¶çš„ç»„æˆï¼šåŸºäºstructå®ç°ã€‚structè¢«@Componentè£…é¥°åå…·å¤‡ç»„ä»¶åŒ–çš„èƒ½åŠ›ã€‚buildå‡½æ•°å¯¹ç»„ä»¶å£°æ˜å¼UIæè¿°ã€‚@Entryè£…é¥°çš„è‡ªå®šä¹‰ç»„ä»¶å°†ä½œä¸ºUIé¡µé¢çš„å…¥å£ã€‚</p>
<p>æ³¨æ„ç‚¹ï¼š</p>
<ol>
<li>è‡ªå®šä¹‰ç»„ä»¶ä¸æ”¯æŒé™æ€æˆå‘˜å˜é‡ï¼Œæ‰€æœ‰æˆå‘˜å˜é‡éƒ½æ˜¯ç§æœ‰çš„ã€‚</li>
<li>buildå‡½æ•°ä¸­ForEachç¦æ­¢ä½œä¸ºæ ¹èŠ‚ç‚¹ã€‚</li>
<li>buildå‡½æ•°ä¸­ä¸å…è®¸å£°æ˜æœ¬åœ°å˜é‡ã€‚<code>ä¾‹å­ï¼šlet a:number=1 X</code></li>
<li>buildå‡½æ•°ä¸­ä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨<code>console.info</code></li>
<li>buildå‡½æ•°ä¸­ä¸å…è®¸åˆ›å»ºæœ¬åœ°ä½œç”¨åŸŸã€‚<code>{ }  X</code></li>
<li>buildå‡½æ•°ä¸­ä¸èƒ½è°ƒç”¨æ²¡æœ‰ç”¨@Builderè£…é¥°çš„æ–¹æ³•ã€‚å…è®¸ç³»ç»Ÿç»„ä»¶çš„å‚æ•°æ˜¯TSæ–¹æ³•çš„è¿”å›å€¼ã€‚<br>
ä¾‹å­ï¼š</li>
</ol>
<pre><code>@Component
struct ParentComponent {
  doSomeCalculations() {
  }

  calcTextValue(): string {
    return 'Hello World';
  }

  @Builder doSomeRender() {
    Text(`Hello World`)
  }

  build() {
    Column() {
      // åä¾‹ï¼šä¸èƒ½è°ƒç”¨æ²¡æœ‰ç”¨@Builderè£…é¥°çš„æ–¹æ³•
      this.doSomeCalculations();
      // æ­£ä¾‹ï¼šå¯ä»¥è°ƒç”¨
      this.doSomeRender();
      // æ­£ä¾‹ï¼šå‚æ•°å¯ä»¥ä¸ºè°ƒç”¨TSæ–¹æ³•çš„è¿”å›å€¼
      Text(this.calcTextValue())
    }
  }
}
</code></pre>
<ol start="7">
<li>buildå‡½æ•°ä¸­ä¸å…è®¸switchè¯­æ³•</li>
<li>buildå‡½æ•°ä¸­ä¸å…è®¸ä½¿ç”¨è¡¨è¾¾å¼</li>
</ol>
<p>ä¾‹å­ï¼š</p>
<pre><code>build() {
  Column() {
    // åä¾‹ï¼šä¸å…è®¸ä½¿ç”¨è¡¨è¾¾å¼
    (this.aVar &gt; 10) ? Text('...') : Image('...')
  }
}
</code></pre>
<ol start="9">
<li>è‡ªå®šä¹‰ç»„ä»¶é€šè¿‡â€œ.â€é“¾å¼è°ƒç”¨çš„å½¢å¼è®¾ç½®é€šç”¨æ ·å¼ã€‚</li>
</ol>
<h3 id="3-2-åˆ›å»ºä¸€ä¸ªç»„ä»¶">3-2.  åˆ›å»ºä¸€ä¸ªç»„ä»¶</h3>
<p>ä½¿ç”¨@Entry()è£…é¥°çš„ç»„ä»¶æ˜¯å…¥å£ç»„ä»¶ã€‚ä½¿ç”¨@Componentè£…é¥°çš„æ˜¯è‡ªå®šä¹‰ç»„ä»¶ã€‚</p>
<pre><code>
// å…¥å£ç»„ä»¶
@Entry()
  @Component
  struct Index {
    build() {
      Column(){
        MyComponentOne()
        MyComponentTwo()
      }
    }
  }
// è‡ªå®šä¹‰ç»„ä»¶
  @Component
  struct  MyComponentOne {
    build(){
      Text('è¿™æ˜¯è‡ªå®šä¹‰ç»„ä»¶1')
    }
  }
  @Component
  struct MyComponentTwo {
    build(){
      Text(&quot;è¿™æ˜¯è‡ªå®šä¹‰ç»„ä»¶2&quot;)
    }
  }
</code></pre>
<p>æˆ–è€…ä½¿ç”¨  @Builderåˆ›å»ºUIæè¿°ç±»å‹çš„ç»„ä»¶</p>
<pre><code>
// å…¥å£ç»„ä»¶
@Entry()
  @Component
  struct Index {
    build() {
      Column(){
        MyComponentThree()
      }
    }
  }
// è‡ªå®šä¹‰æè¿°ç»„ä»¶
  @Builder function  MyComponentThree (){
      Text('è¿™æ˜¯è‡ªå®šä¹‰ç»„ä»¶3')
  }

</code></pre>
<h3 id="3-3-ç»„ä»¶ä¼ å‚">3-3.  ç»„ä»¶ä¼ å‚</h3>
<ol>
<li>çˆ¶ä¼ å­</li>
</ol>
<p>ä½¿ç”¨@Prop</p>
<pre><code>@Entry
@Component
struct Index {
  @State count:number=1;
  build() {
   Column(){
     Button('ç‚¹å‡»+1')
       .onClick(()=&gt;{
         this.count=this.count+1
       })
     MyComponentTest({count:this.count})
   }
  }
}

@Component
struct MyComponentTest {
  @Prop count:number;
  build(){
    Text(`${this.count}`)
  }
}
</code></pre>
<ol start="2">
<li>å­ä¼ çˆ¶</li>
</ol>
<pre><code>@Entry
@Component
struct Par {
  // æ¥æ”¶å­ç»„ä»¶å€¼
  checkFun(data){
    console.info(JSON.stringify(data))
  }
  build() {
    Column() {
        // ä¼ å›è°ƒæ–¹æ³•
   Child({checkFun:(data)=&gt;this.checkFun(data)}
  }
}
@Component
struct  Child {
  checkFun:(res)=&gt;void;
  build(){
    Row(){
      Button(&quot;ä¼ å€¼è®¾ç½®&quot;)
        .onClick(()=&gt;{
            // ç»™çˆ¶ç»„ä»¶ä¼ é€’å€¼
          this.checkFun({ uuid:1, isOn:false})
        })
  }
}

</code></pre>
<ol start="3">
<li>å…„å¼Ÿä¼ é€’</li>
<li>ç¥–å­™ä¼ é€’</li>
</ol>
<h3 id="3-4-ç”Ÿå‘½å‘¨æœŸ">3-4.  ç”Ÿå‘½å‘¨æœŸ</h3>
<p>é¡µé¢ç”Ÿå‘½å‘¨æœŸã€‚è¢«@Enterè£…é¥°çš„ç»„ä»¶ã€‚</p>
<ul>
<li>onPageShowï¼šé¡µé¢æ¯æ¬¡æ˜¾ç¤ºæ—¶è§¦å‘ã€‚</li>
<li>onPageHideï¼šé¡µé¢æ¯æ¬¡éšè—æ—¶è§¦å‘ä¸€æ¬¡ã€‚</li>
<li>onBackPressï¼šå½“ç”¨æˆ·ç‚¹å‡»è¿”å›æŒ‰é’®æ—¶è§¦å‘ã€‚</li>
</ul>
<p>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€‚@Componentè£…é¥°çš„è‡ªå®šä¹‰ç»„ä»¶</p>
<ul>
<li>aboutToAppearï¼šç»„ä»¶å³å°†å‡ºç°æ—¶å›è°ƒè¯¥æ¥å£ï¼Œå…·ä½“æ—¶æœºä¸ºåœ¨åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶çš„æ–°å®ä¾‹åï¼Œåœ¨æ‰§è¡Œå…¶build()å‡½æ•°ä¹‹å‰æ‰§è¡Œã€‚</li>
<li>aboutToDisappearï¼šåœ¨è‡ªå®šä¹‰ç»„ä»¶å³å°†ææ„é”€æ¯æ—¶æ‰§è¡Œã€‚<br>
<img src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20231016160223.99199945095842886884636368090803:50001231000000:2800:019E4D38024DDC3B25A19EE8BEF753B3FB089891518C310555FB21C5117F6BF7.png?needInitFileName=true?needInitFileName=true" alt="" loading="lazy"></li>
</ul>
<p>ç”±ä¸Šå›¾å¯çŸ¥ï¼Œé¡µé¢ç»„ä»¶é¦–å…ˆæ‰§è¡ŒaboutToAppearæ–¹æ³•ï¼Œå†æ‰§è¡Œbuildæ–¹æ³•ï¼Œç„¶åæ‰æ‰§è¡ŒonPageShowæ–¹æ³•ã€‚æ‰€ä»¥çˆ¶ç»„ä»¶æ‰§è¡Œå®ŒaboutToAppearæ–¹æ³•åï¼Œå°†ä¼šç›´æ¥æ‰§è¡Œå­ç»„ä»¶çš„aboutToAppearæ–¹æ³•ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p>
<pre><code>@Entry
@Component
struct Index {
  @State count:number=1;
  onPageShow(){
    console.info('é¡µé¢æ˜¾ç¤º')
  }
  onPageHide(){
    console.info('é¡µé¢éšè—')
  }
  onBackPress(){
    console.info('é¡µé¢è¿”å›')
  }
  aboutToAppear(){
    console.info('ç»„ä»¶åˆå§‹åŒ–')
  }
  aboutToDisappear(){
    console.info('ç»„ä»¶é”€æ¯')
  }
  build() {
   Column(){
     Child()
   }
  }
}

@Component
struct Child {
  aboutToAppear(){
    console.info('å­ç»„ä»¶åˆå§‹åŒ–')
  }
  aboutToDisappear(){
    console.info('å­ç»„ä»¶é”€æ¯')
  }
  build(){
  }
}
</code></pre>
<h2 id="4-çŠ¶æ€ç®¡ç†">4. çŠ¶æ€ç®¡ç†</h2>
<p>çŠ¶æ€å˜é‡çš„æ”¹å˜ä¼šå¼•èµ·UIçš„æ¸²æŸ“åˆ·æ–°ã€‚<br>
<img src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20231013151100.79218093104997734052221357323483:50001231000000:2800:84539CCC9C66D4F5A0F176FEEB7F5A98B3BDC47C6B27D4FB43591EC2233C78E4.png?needInitFileName=true?needInitFileName=true" alt="" loading="lazy"></p>
<h3 id="1-ç®¡ç†ç»„ä»¶ä¸­çš„çŠ¶æ€">1. ç®¡ç†ç»„ä»¶ä¸­çš„çŠ¶æ€</h3>
<h4 id="stateè£…é¥°å™¨åˆ›å»ºç»„ä»¶å†…çš„çŠ¶æ€"><strong>@Stateè£…é¥°å™¨ï¼šåˆ›å»ºç»„ä»¶å†…çš„çŠ¶æ€</strong></h4>
<ul>
<li>è‡ªå®šä¹‰åˆ›å»ºåŸºæœ¬ç±»å‹çŠ¶æ€</li>
</ul>
<p>boolean,string,number</p>
<pre><code>@Entry
@Component
struct Index {
  @State count:number=1;
  build() {
   Column(){
     Text(`æ•°é‡ï¼š${this.count}`)
   }
  }
}
</code></pre>
<ul>
<li>è‡ªå®šä¹‰åˆ›å»ºå¤æ‚æ•°æ®ç±»å‹å˜é‡<br>
class ï¼Œ object</li>
</ul>
<pre><code>@Entry
@Component
struct Index {
  @State data:{
    name:string,
    age:number,
    count:number
  }={
    name:&quot;å°æ˜&quot;,
    age:12,
    count:1
  }
  build() {
   Column(){
     Text(`å§“åï¼š${this.data.name}`)
     Text(`å¹´é¾„ï¼š${this.data.age}`)
     Text(`æ•°é‡ï¼šä»–æœ‰${this.data.count}ä¸ªè‹¹æœ`)
     Button(&quot;å†å¤šç»™ä»–1ä¸ªè‹¹æœ&quot;)
       .onClick(()=&gt;{
         this.data.count=this.data.count+1
       })

   }
  }
}
</code></pre>
<p>å½“è£…é¥°çš„å¯¹è±¡æ˜¯arrayæ—¶ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æ•°ç»„æœ¬èº«çš„èµ‹å€¼å’Œæ·»åŠ ã€åˆ é™¤ã€æ›´æ–°æ•°ç»„çš„å˜åŒ–ã€‚</p>
<pre><code>@Entry
@Component
struct Index {
  @State list:Array&lt;number&gt;=[1,2]
  build() {
   Column(){
      Text(`${this.list}`)
     Button(&quot;æ–°å¢&quot;)
       .onClick(()=&gt;{
         this.list.push(Math.random())
       })
     Button(&quot;åˆ é™¤&quot;)
       .onClick(()=&gt;{
         this.list.pop()
       })
   }
  }
}

</code></pre>
<h4 id="propè£…é¥°å™¨çˆ¶å­å•å‘åŒæ­¥"><strong>@Propè£…é¥°å™¨ï¼šçˆ¶å­å•å‘åŒæ­¥</strong></h4>
<pre><code>@Entry
@Component
struct Index {
  @State count:number=1;
  build() {
   Column(){
     Button('ç‚¹å‡»+1')
       .onClick(()=&gt;{
         this.count=this.count+1
       })
     MyComponentTest({count:this.count})
   }
  }
}

@Component
struct MyComponentTest {
  @Prop count:number;
  build(){
    Text(`${this.count}`)
  }
}
</code></pre>
<h4 id="linkçˆ¶å­åŒå‘åŒæ­¥"><strong>@Linkï¼šçˆ¶å­åŒå‘åŒæ­¥</strong></h4>
<p>åœ¨å­ç»„ä»¶ä½¿ç”¨@Linkè£…é¥°å™¨å£°æ˜å±æ€§ã€‚çˆ¶ç»„ä»¶ä½¿ç”¨$ä¼ é€’stateçŠ¶æ€å˜é‡ã€‚</p>
<pre><code>@Entry
@Component
struct Index {
  @State keyword:string=''
  build() {
   Column(){
     Text(&quot;è¿™æ˜¯çˆ¶ç»„ä»¶ï¼š&quot;)
     Text(`${this.keyword}`)
     Button('çˆ¶ç»„ä»¶ä¿®æ”¹è¾“å…¥æ¡†çš„å€¼')
       .onClick(()=&gt;{
         this.keyword=Math.random().toString()
       })
     Text(&quot;è¿™æ˜¯å­ç»„ä»¶ï¼š&quot;)
     Child({keyword:$keyword})
   }
  }
}

@Component
struct Child {
  @Link keyword:string;
  build(){
    Column(){
      TextInput({ text:this.keyword })
        .onChange((value)=&gt;{
          this.keyword=value
        })
      Text(`${this.keyword}`)
    }
  }
}
</code></pre>
<h4 id="provideè£…é¥°å™¨å’Œconsumeè£…é¥°å™¨ä¸åä»£ç»„ä»¶åŒå‘åŒæ­¥"><strong>@Provideè£…é¥°å™¨å’Œ@Consumeè£…é¥°å™¨ï¼šä¸åä»£ç»„ä»¶åŒå‘åŒæ­¥</strong></h4>
<p>@Provideè£…é¥°çš„å˜é‡æ˜¯åœ¨ç¥–å…ˆèŠ‚ç‚¹ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºè¢«â€œæä¾›â€ç»™åä»£çš„çŠ¶æ€å˜é‡ã€‚@Consumeè£…é¥°çš„å˜é‡æ˜¯åœ¨åä»£ç»„ä»¶ä¸­ï¼Œå»â€œæ¶ˆè´¹ï¼ˆç»‘å®šï¼‰â€ç¥–å…ˆèŠ‚ç‚¹æä¾›çš„å˜é‡ã€‚</p>
<p>ä¾‹å­ï¼šçˆ¶ç»„ä»¶ï¼Œå­ç»„ä»¶ï¼Œç¥–å­™ç»„ä»¶çŠ¶æ€åŒæ­¥ã€‚</p>
<pre><code>@Entry
@Component
struct Index {
  @Provide keyword:string=''
  build() {
   Column(){
     Text(&quot;è¿™æ˜¯é¡¶çº§ç»„ä»¶ï¼š&quot;)
     Text(`${this.keyword}`)
     Button('é¡¶çº§ç»„ä»¶ä¿®æ”¹ç¥–å­™è¾“å…¥æ¡†çš„å€¼')
       .onClick(()=&gt;{
         this.keyword=Math.random().toString()
       })

     ChildOne()
   }
  }
}

@Component
struct ChildOne {
  @Consume keyword:string;
  build(){
    Column(){
      Text(`è¿™æ˜¯å­ç»„ä»¶:`)
      Text(`${this.keyword}`)
      Button('å­ç»„ä»¶ä¿®æ”¹ç¥–å­™è¾“å…¥æ¡†çš„å€¼')
        .onClick(()=&gt;{
          this.keyword=Math.random().toString()
        })
      ChildTwo()
    }
  }
}


@Component
struct ChildTwo {
  @Consume keyword:string;
  build(){
    Column(){
      Text(&quot;è¿™æ˜¯ç¥–å­™ç»„ä»¶ï¼š&quot;)
      TextInput({ text:this.keyword })
        .onChange((value)=&gt;{
          this.keyword=value
        })
      Text(`${this.keyword}`)
    }
  }
}
</code></pre>
<h4 id="observedè£…é¥°å™¨å’Œobjectlinkè£…é¥°å™¨åµŒå¥—ç±»å¯¹è±¡å±æ€§å˜åŒ–"><strong>@Observedè£…é¥°å™¨å’Œ@ObjectLinkè£…é¥°å™¨ï¼šåµŒå¥—ç±»å¯¹è±¡å±æ€§å˜åŒ–</strong></h4>
<p>@Observedè£…é¥°çš„ç±»ï¼Œå¦‚æœå…¶å±æ€§ä¸ºéç®€å•ç±»å‹ï¼Œæ¯”å¦‚classã€Objectæˆ–è€…æ•°ç»„ï¼Œä¹Ÿéœ€è¦è¢«@Observedè£…é¥°ï¼Œå¦åˆ™å°†è§‚å¯Ÿä¸åˆ°å…¶å±æ€§çš„å˜åŒ–ã€‚<br>
<img src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20231013151102.18037414200991638642282186309257:50001231000000:2800:4A23AE3B39E6997A086CF8A57CA712AE87745AA3910A46915FECC80DEC613C19.png?needInitFileName=true?needInitFileName=true" alt="" loading="lazy"></p>
<p>æ¡†æ¶è¡Œä¸º<br>
åˆå§‹æ¸²æŸ“ï¼š<br>
@Observedè£…é¥°çš„classçš„å®ä¾‹ä¼šè¢«ä¸é€æ˜çš„ä»£ç†å¯¹è±¡åŒ…è£…ï¼Œä»£ç†äº†classä¸Šçš„å±æ€§çš„setterå’Œgetteræ–¹æ³•<br>
å­ç»„ä»¶ä¸­@ObjectLinkè£…é¥°çš„ä»çˆ¶ç»„ä»¶åˆå§‹åŒ–ï¼Œæ¥æ”¶è¢«@Observedè£…é¥°çš„classçš„å®ä¾‹ï¼Œ@ObjectLinkçš„åŒ…è£…ç±»ä¼šå°†è‡ªå·±æ³¨å†Œç»™@Observed classã€‚<br>
å±æ€§æ›´æ–°ï¼šå½“@Observedè£…é¥°çš„classå±æ€§æ”¹å˜æ—¶ï¼Œä¼šèµ°åˆ°ä»£ç†çš„setterå’Œgetterï¼Œç„¶åéå†ä¾èµ–å®ƒçš„@ObjectLinkåŒ…è£…ç±»ï¼Œé€šçŸ¥æ•°æ®æ›´æ–°ã€‚</p>
<pre><code>



@Entry
@Component
struct Index {
  private initData= {
    name:'',
    age:undefined,
    count:undefined
  }
  build() {
   Column(){
     Text(&quot;è¿™æ˜¯é¡¶çº§ç»„ä»¶ï¼š&quot;)
     // åˆå§‹åŒ–çŠ¶æ€å˜é‡
     Child({
       customState:new CustomState(this.initData)
     })
   }
  }
}
// å®šä¹‰çŠ¶æ€å˜é‡
@Observed
class CustomState {
  public name:string='';
  public age:string='';
  public count:string='';
  constructor(data:{
    name:string,
    age:string,
    count:string
  }) {
    this.name=data.name
    this.age=data.age
    this.count=data.count
  }
}

@Component
struct Child {
  // å£°æ˜å…³è”çŠ¶æ€
  @ObjectLink customState:CustomState;
  build(){
    Column(){
      TextInput({
        text:this.customState.name,
        placeholder:&quot;è¯·è¾“å…¥å§“å&quot;
      })
      TextInput({
        text:this.customState.age,
        placeholder:&quot;è¯·è¾“å…¥å¹´é¾„&quot;
      })
      TextInput({
        text:this.customState.count,
        placeholder:&quot;è¯·è¾“å…¥æ•°é‡&quot;
      })
    }
  }
}


</code></pre>
<h3 id="2-ç®¡ç†åº”ç”¨çš„çŠ¶æ€">2. ç®¡ç†åº”ç”¨çš„çŠ¶æ€</h3>
<h4 id="localstorageé¡µé¢çº§uiçŠ¶æ€å­˜å‚¨">LocalStorageï¼šé¡µé¢çº§UIçŠ¶æ€å­˜å‚¨</h4>
<h5 id="åº”ç”¨é€»è¾‘ä½¿ç”¨localstorage"><strong>åº”ç”¨é€»è¾‘ä½¿ç”¨LocalStorage</strong></h5>
<pre><code>@Entry()
@Component
struct Index{
  createLocalStorage(){
    // åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨çŠ¶æ€ç®¡ç†
    let store=new LocalStorage({
      user:'admin',
      account:123456
    })
    // è·å–æ•°æ®
    console.log(store.get('user'))
    console.log(store.get('account'))
    // ä¿®æ”¹å€¼ åªèƒ½è®¾ç½®å®šä¹‰çš„å±æ€§
    store.set('user','admin1')
    console.log(store.get('user')) //admin1
    // è·å–keyé›†åˆ
    store.keys()
    // è·å–é›†åˆé•¿åº¦
    store.size()
    console.log(store.size().toString()) //2
    // æ˜¯å¦å­˜åœ¨key
    console.log(store.has('user').toString()) //true
    console.log(store.has('userInfo').toString()) //false
    // å°†å±æ€§å€¼å®šä¹‰ä¸ºå•å‘çŠ¶æ€å˜é‡
    let propState=store.prop('user')
    // å°†å±æ€§å€¼å®šä¹‰ä¸ºåŒå‘çŠ¶æ€å˜é‡
    let linkState=store.link('user')
    // å…¶ä»–ï¼šdeleteï¼Œclearã€‚
  }
  onPageShow(){
    this.createLocalStorage()
  }
  build(){
    Column(){
      Text(&quot;æ ¹ç»„ä»¶&quot;)
    }
  }
}

</code></pre>
<p>æˆ–è€…å®šä¹‰åœ¨å…¨å±€</p>
<pre><code>@Entry()
@Component
struct Index{

  onPageShow(){
    createLocalStorage()
  }
  build(){
    Column(){
      Text(&quot;æ ¹ç»„ä»¶&quot;)
    }
  }
}

function createLocalStorage(){
  // åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨çŠ¶æ€ç®¡ç†
  let store=new LocalStorage({
    user:'admin',
    account:123456
  })
  // è·å–æ•°æ®
  console.log(store.get('user'))
  console.log(store.get('account'))
  // ä¿®æ”¹å€¼ åªèƒ½è®¾ç½®å®šä¹‰çš„å±æ€§
  store.set('user','admin1')
  console.log(store.get('user')) //admin1
  // è·å–keyé›†åˆ
  store.keys()
  // è·å–é›†åˆé•¿åº¦
  store.size()
  console.log(store.size().toString()) //2
  // æ˜¯å¦å­˜åœ¨key
  console.log(store.has('user').toString()) //true
  console.log(store.has('userInfo').toString()) //false
  // å°†å±æ€§å€¼å®šä¹‰ä¸ºå•å‘çŠ¶æ€å˜é‡
  let propState=store.prop('user')
  // å°†å±æ€§å€¼å®šä¹‰ä¸ºåŒå‘çŠ¶æ€å˜é‡
  let linkState=store.link('user')
    // å…¶ä»–ï¼šdeleteï¼Œclearã€‚
}
</code></pre>
<h5 id="ä»uiå†…éƒ¨ä½¿ç”¨localstorage"><strong>ä»UIå†…éƒ¨ä½¿ç”¨LocalStorage</strong></h5>
<ul>
<li>@LocalStorageProp - å•å‘æ›´æ–°</li>
</ul>
<p>@LocalStoragePropå®šä¹‰çš„å˜é‡ä¸ä¼šåŒæ­¥æ›´æ–°åˆ°storageï¼ˆä»…åœ¨ç»„ä»¶å†…æ›´æ–°ï¼‰ã€‚<br>
é€šè¿‡ä¸‹é¢çš„ä¾‹å­å¯è§ï¼Œç‚¹å‡»æŒ‰é’®ç»„ä»¶ä¸­çš„çŠ¶æ€æ›´æ–°å¹¶ä¸ä¼šä¿®æ”¹ LocalStorageå˜é‡æ›´æ–°ã€‚</p>
<pre><code>// è‡ªå®šä¹‰çš„storage
let storage = new LocalStorage({
  account:1,
  username:'admin'
})
// å…¥å£ç»„ä»¶ä¸­ä½¿ç”¨@LocalStoragePropéœ€è¦ä¼ é€’storage
@Entry(storage)
@Component
struct Index{
  @LocalStorageProp('account') account:number=0; // èµ‹å€¼åˆ™è®¾ç½®é»˜è®¤å€¼
  @LocalStorageProp('username') username:string='';
  build(){
    Column(){
   Button(`ç‚¹æˆ‘+1 = ${this.account}`)
     .onClick(()=&gt;{
       this.account= this.account+1
     })
      MyComponent()
    }

  }
}
// è‡ªå®šä¹‰ç»„ä»¶ä¸­ä½¿ç”¨  @LocalStorageProp
@Component
struct MyComponent {
  @LocalStorageProp('account') account:number=undefined;
  build(){
    Column(){
      Text(`${this.account}`)
    }
  }
}
</code></pre>
<ul>
<li>@LocalStorageLink - åŒå‘æ›´æ–°</li>
</ul>
<p>@LocalStoragePropå®šä¹‰çš„å˜é‡ä¼šåŒæ­¥æ›´æ–°åˆ°storageã€‚<br>
é€šè¿‡ä¸‹é¢çš„ä¾‹å­å¯è§ï¼Œç‚¹å‡»æŒ‰é’®ç»„ä»¶ä¸­çš„çŠ¶æ€æ›´æ–°ä¼šä½¿ LocalStorageå˜é‡æ›´æ–°ã€‚</p>
<pre><code>let storage = new LocalStorage({
  account:1,
  username:'admin'
})
@Entry(storage)
@Component
struct Index{
  @LocalStorageLink('account') account:number=0; // èµ‹å€¼åˆ™è®¾ç½®é»˜è®¤å€¼
  @LocalStorageLink('username') username:string='';
  build(){
    Column(){
   Button(`ç‚¹æˆ‘+1 = ${this.account}`)
     .onClick(()=&gt;{
       this.account= this.account+1
     })
      MyComponent()
    }

  }
}
@Component
struct MyComponent {
  @LocalStorageProp('account') account:number=undefined;
  build(){
    Column(){
      Text(`${this.account}`)
    }
  }
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼š@LocalStorageLinkç”¨æ¥<strong>å…„å¼Ÿç»„ä»¶çŠ¶æ€å˜é‡å…±äº«</strong>å†å¥½ä¸è¿‡äº†ã€‚</p>
<h4 id="appstorageåº”ç”¨å…¨å±€uiçŠ¶æ€å­˜å‚¨">AppStorageï¼šåº”ç”¨å…¨å±€UIçŠ¶æ€å­˜å‚¨</h4>
<p>AppStorageåˆ›å»ºçš„çŠ¶æ€å˜é‡åœ¨Appå…¨å±€éƒ½å¯ä»¥è®¿é—®åˆ°</p>
<h5 id="ä»åº”ç”¨é€»è¾‘ä½¿ç”¨appstorage"><strong>ä»åº”ç”¨é€»è¾‘ä½¿ç”¨AppStorage</strong></h5>
<pre><code>
@Entry()
@Component
struct Index{
  onPageShow(){
    createAppStorage()
  }
  build(){
    Column(){

    }

  }
}
AppStorage.SetOrCreate('theme','dark')
function createAppStorage(){
  // ä½¿ç”¨Getè·å–å…¨å±€key
  let theme:string=AppStorage.Get('theme')
  console.info(theme) // dark
  // è®¾ç½®å…¨å±€key
  // 1. ä½¿ç”¨set
  AppStorage.Set('theme','light')
  theme=AppStorage.Get('theme')
  console.info(theme) // light
  // 2. ä½¿ç”¨SetOrCreate
  AppStorage.SetOrCreate('theme','red')
  theme=AppStorage.Get('theme')
  console.info(theme) // red
  // 3. è®¾ç½®å¸¦çŠ¶æ€çš„åº”ç”¨å˜é‡
  // å•å‘çš„çŠ¶æ€å˜é‡
  AppStorage.SetAndProp('theme','dark')
  // åŒå‘çš„çŠ¶æ€å˜é‡
  AppStorage.SetAndLink('theme','light')
}


</code></pre>
<h5 id="ä»uié€»è¾‘ä½¿ç”¨appstorage"><strong>ä»UIé€»è¾‘ä½¿ç”¨AppStorage</strong></h5>
<ul>
<li><strong>@StorageLink åº”ç”¨å†…åŒå‘æ›´æ–°</strong></li>
</ul>
<p>@StorageLinkä¸­çš„å˜é‡å˜åŒ–ä¼šä½¿æ•´ä¸ªåº”ç”¨ä¸­å¯¹åº”çš„çŠ¶æ€å˜é‡å˜åŒ–ã€‚</p>
<p>å†™ä¸€ä¸ªä¾‹å­ï¼šç»™æ•´ä¸ªåº”ç”¨è®¾ç½®ä¸€ä¸ªä¸»é¢˜å˜é‡ï¼Œä¸»é¢˜å˜é‡çš„æ”¹å˜ä¼šä½¿æ•´ä¸ªåº”ç”¨çš„ä¸»é¢˜é¢œè‰²ä¿®æ”¹ã€‚</p>
<p><code>Index.ets</code></p>
<pre><code>import router from '@ohos.router'
// å®šä¹‰åº”ç”¨å…¨å±€çŠ¶æ€å˜é‡
AppStorage.SetAndLink('theme','black')
@Entry()
@Component
struct Index{
    // å¼•å…¥åº”ç”¨å…¨å±€å˜é‡
  @StorageLink('theme') theme:string =undefined
  onPageShow(){
    console.info(&quot;2222,&quot;,this.theme)
  }
  build(){
    Column(){
        // å®šä¹‰ä¸€ä¸ªæŒ‰é’®ä¿®æ”¹ä»–çš„ä¸»é¢˜è‰²
        Button(`ä¿®æ”¹ä¸»é¢˜:${this.theme=='white'?'é»‘å¤œ':'ç™½å¤©'}`)
          .onClick(()=&gt;{
            this.theme=this.theme=='white'?'black':'white'
          })
        Button(&quot;å…³äºé¡µé¢&quot;)
          .onClick(()=&gt;{
            router.pushUrl({
              url:'pages/About'
            })
          })
    }
    .width('100%')
    .height('100%')
    .backgroundColor(this.theme)

  }
}
</code></pre>
<p><code>About.ets</code><br>
ç”±æ­¤å¯è§ï¼ŒAboutçš„é¡µé¢çŠ¶æ€ä¹Ÿæ›´æ–°äº†ã€‚</p>
<pre><code>@Entry
@Component
struct About {
  @StorageLink('theme') theme:string=''
  onPageShow(){
    console.info(this.theme)
  }
  build() {
    Column(){
      Text(&quot;å…³äºé¡µé¢&quot;)
        .fontColor('red')
    }
    .width('100%')
    .height('100%')
    .backgroundColor(this.theme)
  }
}
</code></pre>
<ul>
<li><strong>@StorageProp åº”ç”¨å†…å•å‘æ›´æ–°</strong></li>
</ul>
<p>ä½¿ç”¨åœºæ™¯ï¼šåªæƒ³æŸä¸ªé¡µé¢å­˜å‚¨çŠ¶æ€ï¼Œä¸æƒ³åº”ç”¨åˆ°å…¨å±€ã€‚</p>
<p><code>Index.ets</code></p>
<pre><code>import router from '@ohos.router'
AppStorage.SetAndProp('theme','black')
@Entry()
@Component
struct Index{
  @StorageProp('theme') theme:string =undefined
  onPageShow(){
    console.info(&quot;2222,&quot;,this.theme)
  }
  build(){
    Column(){
        Button(`ä¿®æ”¹ä¸»é¢˜:${this.theme=='white'?'é»‘å¤œ':'ç™½å¤©'}`)
          .onClick(()=&gt;{
            this.theme=this.theme=='white'?'black':'white'
          })
        Button(&quot;å…³äºé¡µé¢&quot;)
          .onClick(()=&gt;{
            router.pushUrl({
              url:'pages/About'
            })
          })
    }
    .width('100%')
    .height('100%')
    .backgroundColor(this.theme)
  }
}
</code></pre>
<p><code>about.ets</code></p>
<pre><code>@Entry
@Component
struct About {
  @StorageProp('theme') theme:string=''
  onPageShow(){
    // æ­¤æ—¶themeçš„çŠ¶æ€è¿˜æ˜¯åˆå§‹åŒ–çš„å…¨å±€åº”ç”¨çŠ¶æ€
    console.info(this.theme) // dark

  }
  build() {
    Column(){
      Text(&quot;å…³äºé¡µé¢&quot;)
        .fontColor('red')
    }
    .width('100%')
    .height('100%')
    .backgroundColor(this.theme)
  }
}
</code></pre>
<h4 id="persistentstorageæŒä¹…åŒ–å­˜å‚¨uiçŠ¶æ€">PersistentStorageï¼šæŒä¹…åŒ–å­˜å‚¨UIçŠ¶æ€</h4>
<p>LocalStorageå’ŒAppStorageéƒ½æ˜¯è¿è¡Œæ—¶çš„å†…å­˜,åº”ç”¨é€€å‡ºåå°†å¤±æ•ˆã€‚åœ¨åº”ç”¨é€€å‡ºå†æ¬¡å¯åŠ¨åï¼Œä¾ç„¶èƒ½ä¿å­˜é€‰å®šçš„ç»“æœï¼Œè¿™å°±éœ€è¦ç”¨åˆ°PersistentStorageã€‚<br>
PersistentStorageå°†é€‰å®šçš„AppStorageå±æ€§ä¿ç•™åœ¨è®¾å¤‡ç£ç›˜ä¸Šã€‚åº”ç”¨ç¨‹åºé€šè¿‡APIï¼Œä»¥å†³å®šå“ªäº›AppStorageå±æ€§åº”å€ŸåŠ©PersistentStorageæŒä¹…åŒ–ã€‚</p>
<p>æŒä¹…æ•°æ®å˜é‡ä¼šè‡ªåŠ¨è½¬ä¹‰ä¸ºstringï¼Œæ³¨æ„åœ¨ä½¿ç”¨çŠ¶æ€å˜é‡æ—¶è½¬ä¹‰å˜é‡ç±»å‹ã€‚</p>
<pre><code>// åˆå§‹åŒ–æŒä¹…åŒ–å­˜å‚¨çŠ¶æ€å˜é‡
PersistentStorage.PersistProp('count',1)
@Entry()
@Component
struct Index{
  // ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨çŠ¶æ€å˜é‡,å‘AppStorageç”¨æ³•ä¸€æ ·ä½¿ç”¨
  @StorageLink('count') count:number=undefined;
  build(){
    Column(){
      Text(`${this.count}`);
      Button('ç‚¹å‡»+1')
        .onClick(()=&gt;{
          this.count=Number(this.count)+1
        })
    }
  }
}
</code></pre>
<p>å°†åº”ç”¨æ‰“å¼€åï¼Œä¿®æ”¹countçš„å€¼ï¼Œè¿™æ—¶é€€å‡ºåº”ç”¨é‡æ–°æ‰“å¼€åº”ç”¨ï¼Œåº”ç”¨çš„countçŠ¶æ€è¿˜æ˜¯ä¿®æ”¹ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
<h4 id="environmentè®¾å¤‡ç¯å¢ƒæŸ¥è¯¢">Environmentï¼šè®¾å¤‡ç¯å¢ƒæŸ¥è¯¢</h4>
<p>è®¾å¤‡ç¯å¢ƒåˆ°Componentçš„æ›´æ–°é“¾ï¼šEnvironment --&gt; AppStorage --&gt;Componentã€‚</p>
<pre><code>// å®šä¹‰è®¾å¤‡ç¯å¢ƒå˜é‡
Environment.EnvProp('langCode','cn')
@Entry
@Component
struct Index {
  // ä½¿ç”¨è®¾å¤‡ç¯å¢ƒå˜é‡
  @StorageProp('langCode') langCode:string=undefined
  onPageShow(){
    console.info(this.langCode) // cn
  }
  build() {
   Column(){
     Text(this.langCode)
   }
  }
}
</code></pre>
<h3 id="3-å…¶ä»–çŠ¶æ€ç®¡ç†">3. å…¶ä»–çŠ¶æ€ç®¡ç†</h3>
<h4 id="watch">@watch</h4>
<p>@Watchç»‘å®šä¸€ä¸ªæ–¹æ³•æ¥ç›‘å¬å®šä¹‰çš„çŠ¶æ€å˜é‡ã€‚</p>
<pre><code>@Entry
@Component
struct Index {
  @State count:number = 0
  build() {
   Column(){
     Button('ç‚¹æˆ‘+1')
       .onClick(()=&gt;{
         this.count=Number(this.count)+1
       })
     MyComponent({count:this.count})
   }
  }
}
@Component
struct MyComponent {
  @Prop @Watch('onUpdateCount') count:number;
  // ç›‘å¬å±æ€§å˜åŒ–
  onUpdateCount(propName:string){
      console.info(propName)
      console.info(`${this.count}`)
  }
  build(){
    Column(){
      Text(`${this.count}`)
    }
  }
}
</code></pre>
<h4 id="">$$</h4>
<ul>
<li>
<p>å½“å‰<code>$$</code>æ”¯æŒåŸºç¡€ç±»å‹å˜é‡ï¼Œä»¥åŠ@Stateã€@Linkå’Œ@Propè£…é¥°çš„å˜é‡ã€‚</p>
</li>
<li>
<p>å½“å‰<code>$$</code>ä»…æ”¯æŒbindPopupå±æ€§æ–¹æ³•çš„showå‚æ•°ï¼ŒRadioç»„ä»¶çš„checkedå±æ€§ï¼ŒRefreshç»„ä»¶çš„refreshingå‚æ•°ã€‚</p>
</li>
<li>
<p><code>$$</code>ç»‘å®šçš„å˜é‡å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘UIçš„åŒæ­¥åˆ·æ–°ã€‚</p>
</li>
</ul>
<h2 id="æ¸²æŸ“æ§åˆ¶">æ¸²æŸ“æ§åˆ¶</h2>
<h3 id="ifelse-æ¡ä»¶æ¸²æŸ“">if/else æ¡ä»¶æ¸²æŸ“</h3>
<pre><code>@Entry
@Component
struct Index {
  @State count:number = 0
  build() {
   Column(){
     Button('ç‚¹æˆ‘+1')
       .onClick(()=&gt;{
         this.count=Number(this.count)+1
       })
     if(this.count % 2 === 1){
        Text(&quot;å¥‡æ•°&quot;+this.count)
     }else{
       Text(&quot;å¶æ•°&quot;+this.count)
     }
   }
  }
}

</code></pre>
<h3 id="foreachå¾ªç¯æ¸²æŸ“">ForEachï¼šå¾ªç¯æ¸²æŸ“</h3>
<ol>
<li>ForEachå¿…é¡»åœ¨å®¹å™¨ç»„ä»¶å†…ä½¿ç”¨ã€‚</li>
<li>ç”Ÿæˆçš„å­ç»„ä»¶åº”å½“æ˜¯å…è®¸åŒ…å«åœ¨ForEachçˆ¶å®¹å™¨ç»„ä»¶ä¸­çš„å­ç»„ä»¶ã€‚</li>
<li>å…è®¸å­ç»„ä»¶ç”Ÿæˆå™¨å‡½æ•°ä¸­åŒ…å«if/elseæ¡ä»¶æ¸²æŸ“ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ForEachåŒ…å«åœ¨if/elseæ¡ä»¶æ¸²æŸ“è¯­å¥ä¸­ã€‚</li>
<li>itemGeneratorå‡½æ•°çš„è°ƒç”¨é¡ºåºä¸ä¸€å®šå’Œæ•°ç»„ä¸­çš„æ•°æ®é¡¹ç›¸åŒï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸è¦å‡è®¾</li>
<li>itemGeneratorå’ŒkeyGeneratorå‡½æ•°æ˜¯å¦æ‰§è¡ŒåŠå…¶æ‰§è¡Œé¡ºåºã€‚</li>
</ol>
<pre><code>@Entry
@Component
struct Index {
  @State count:number = 0
  @State ArrayCount:number[]=[1,2,3,4,5]
  build() {
   Column(){
    ForEach(this.ArrayCount,(item,index)=&gt;{
      Text(`${item},${index}`)
    })
   }
  }
}

</code></pre>
<h3 id="lazyforeachæ•°æ®æ‡’åŠ è½½">LazyForEachï¼šæ•°æ®æ‡’åŠ è½½</h3>

            </div>
            <div class="toc-container">
              <ul class="markdownIt-TOC">
<li><a href="#%E4%B8%80-%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7">ä¸€. å¼€å‘å·¥å…·</a>
<ul>
<li><a href="#1-ide%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">1. IDEç¯å¢ƒé…ç½®</a></li>
<li><a href="#2-%E5%88%9B%E5%BB%BA%E5%B9%B6%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE">2. åˆ›å»ºå¹¶è¿è¡Œé¡¹ç›®</a></li>
<li><a href="#3-%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95">3. å·¥ç¨‹ç›®å½•</a></li>
<li><a href="#4-%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3">4. å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C-arkts%E5%85%A5%E9%97%A8">äºŒ. ArkTså…¥é—¨</a>
<ul>
<li><a href="#1-%E5%A3%B0%E6%98%8E%E5%BC%8Fui%E6%8F%8F%E8%BF%B0">1. å£°æ˜å¼UIæè¿°</a>
<ul>
<li><a href="#1-1-%E7%BB%84%E4%BB%B6%E8%A1%A8%E7%A4%BA">1-1. ç»„ä»¶è¡¨ç¤º</a></li>
<li><a href="#1-2-%E9%85%8D%E7%BD%AE%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B1%9E%E6%80%A7">1-2. é…ç½®ç»„ä»¶çš„å±æ€§</a></li>
<li><a href="#1-3-%E7%BB%99%E7%BB%84%E4%BB%B6%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6">1-3. ç»™ç»„ä»¶æ·»åŠ äº‹ä»¶</a></li>
<li><a href="#1-4-%E7%BB%84%E4%BB%B6%E5%B5%8C%E5%A5%97%E9%85%8D%E7%BD%AE%E5%AD%90%E7%BB%84%E4%BB%B6">1-4. ç»„ä»¶åµŒå¥—ï¼Œé…ç½®å­ç»„ä»¶</a></li>
</ul>
</li>
<li><a href="#%E5%B8%B8%E7%94%A8%E8%A3%85%E9%A5%B0%E5%99%A8">å¸¸ç”¨è£…é¥°å™¨</a>
<ul>
<li><a href="#entry">@Entry</a></li>
<li><a href="#component">@Component</a></li>
<li><a href="#builder">@Builder</a></li>
<li><a href="#builderparam">@BuilderParam</a>
<ul>
<li><a href="#1-builderparam-%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%80%BC">1. @BuilderParam è®¾ç½®é»˜è®¤å€¼</a></li>
<li><a href="#2-builderparam-%E4%B8%8D%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%80%BC">2. @BuilderParam ä¸è®¾ç½®é»˜è®¤å€¼</a></li>
<li><a href="#3-%E5%9C%A8%E7%88%B6%E7%BB%84%E4%BB%B6%E5%BC%95%E5%85%A5%E7%BB%84%E4%BB%B6%E7%9A%84%E5%9C%B0%E6%96%B9%E4%B8%AD%E4%BC%A0%E5%80%BC">3. åœ¨çˆ¶ç»„ä»¶ï¼ˆå¼•å…¥ç»„ä»¶çš„åœ°æ–¹ï¼‰ä¸­ä¼ å€¼</a></li>
</ul>
</li>
<li><a href="#styles">@Styles</a>
<ul>
<li><a href="#1-%E7%BB%84%E4%BB%B6%E5%86%85%E4%BD%BF%E7%94%A8styles">1. ç»„ä»¶å†…ä½¿ç”¨@Styles</a></li>
<li><a href="#2-%E5%85%A8%E5%B1%80%E4%BD%BF%E7%94%A8styles">2. å…¨å±€ä½¿ç”¨@Styles</a></li>
<li><a href="#3-%E5%9C%A8%E7%BB%84%E4%BB%B6%E5%86%85%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F">3. åœ¨ç»„ä»¶å†…ä½¿ç”¨çŠ¶æ€å˜é‡</a></li>
</ul>
</li>
<li><a href="#extend">@Extend</a>
<ul>
<li><a href="#extend%E4%BB%85%E6%94%AF%E6%8C%81%E5%AE%9A%E4%B9%89%E5%9C%A8%E5%85%A8%E5%B1%80%E5%B9%B6%E4%B8%94%E4%BC%A0%E5%8F%82">@Extendä»…æ”¯æŒå®šä¹‰åœ¨å…¨å±€å¹¶ä¸”ä¼ å‚</a></li>
<li><a href="#extend%E4%BC%A0%E9%80%92%E4%BA%8B%E4%BB%B6">@Extendä¼ é€’äº‹ä»¶</a></li>
</ul>
</li>
<li><a href="#%E5%A4%9A%E6%80%81%E6%A0%B7%E5%BC%8F-statestyles">å¤šæ€æ ·å¼ stateStyles</a></li>
</ul>
</li>
<li><a href="#3-%E7%BB%84%E4%BB%B6">3. ç»„ä»¶</a>
<ul>
<li><a href="#3-1-%E4%BA%86%E8%A7%A3%E7%BB%84%E4%BB%B6">3-1. äº†è§£ç»„ä»¶</a></li>
<li><a href="#3-2-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6">3-2.  åˆ›å»ºä¸€ä¸ªç»„ä»¶</a></li>
<li><a href="#3-3-%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82">3-3.  ç»„ä»¶ä¼ å‚</a></li>
<li><a href="#3-4-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">3-4.  ç”Ÿå‘½å‘¨æœŸ</a></li>
</ul>
</li>
<li><a href="#4-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86">4. çŠ¶æ€ç®¡ç†</a>
<ul>
<li><a href="#1-%E7%AE%A1%E7%90%86%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84%E7%8A%B6%E6%80%81">1. ç®¡ç†ç»„ä»¶ä¸­çš„çŠ¶æ€</a>
<ul>
<li><a href="#state%E8%A3%85%E9%A5%B0%E5%99%A8%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%86%85%E7%9A%84%E7%8A%B6%E6%80%81"><strong>@Stateè£…é¥°å™¨ï¼šåˆ›å»ºç»„ä»¶å†…çš„çŠ¶æ€</strong></a></li>
<li><a href="#prop%E8%A3%85%E9%A5%B0%E5%99%A8%E7%88%B6%E5%AD%90%E5%8D%95%E5%90%91%E5%90%8C%E6%AD%A5"><strong>@Propè£…é¥°å™¨ï¼šçˆ¶å­å•å‘åŒæ­¥</strong></a></li>
<li><a href="#link%E7%88%B6%E5%AD%90%E5%8F%8C%E5%90%91%E5%90%8C%E6%AD%A5"><strong>@Linkï¼šçˆ¶å­åŒå‘åŒæ­¥</strong></a></li>
<li><a href="#provide%E8%A3%85%E9%A5%B0%E5%99%A8%E5%92%8Cconsume%E8%A3%85%E9%A5%B0%E5%99%A8%E4%B8%8E%E5%90%8E%E4%BB%A3%E7%BB%84%E4%BB%B6%E5%8F%8C%E5%90%91%E5%90%8C%E6%AD%A5"><strong>@Provideè£…é¥°å™¨å’Œ@Consumeè£…é¥°å™¨ï¼šä¸åä»£ç»„ä»¶åŒå‘åŒæ­¥</strong></a></li>
<li><a href="#observed%E8%A3%85%E9%A5%B0%E5%99%A8%E5%92%8Cobjectlink%E8%A3%85%E9%A5%B0%E5%99%A8%E5%B5%8C%E5%A5%97%E7%B1%BB%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E5%8F%98%E5%8C%96"><strong>@Observedè£…é¥°å™¨å’Œ@ObjectLinkè£…é¥°å™¨ï¼šåµŒå¥—ç±»å¯¹è±¡å±æ€§å˜åŒ–</strong></a></li>
</ul>
</li>
<li><a href="#2-%E7%AE%A1%E7%90%86%E5%BA%94%E7%94%A8%E7%9A%84%E7%8A%B6%E6%80%81">2. ç®¡ç†åº”ç”¨çš„çŠ¶æ€</a>
<ul>
<li><a href="#localstorage%E9%A1%B5%E9%9D%A2%E7%BA%A7ui%E7%8A%B6%E6%80%81%E5%AD%98%E5%82%A8">LocalStorageï¼šé¡µé¢çº§UIçŠ¶æ€å­˜å‚¨</a>
<ul>
<li><a href="#%E5%BA%94%E7%94%A8%E9%80%BB%E8%BE%91%E4%BD%BF%E7%94%A8localstorage"><strong>åº”ç”¨é€»è¾‘ä½¿ç”¨LocalStorage</strong></a></li>
<li><a href="#%E4%BB%8Eui%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8localstorage"><strong>ä»UIå†…éƒ¨ä½¿ç”¨LocalStorage</strong></a></li>
</ul>
</li>
<li><a href="#appstorage%E5%BA%94%E7%94%A8%E5%85%A8%E5%B1%80ui%E7%8A%B6%E6%80%81%E5%AD%98%E5%82%A8">AppStorageï¼šåº”ç”¨å…¨å±€UIçŠ¶æ€å­˜å‚¨</a>
<ul>
<li><a href="#%E4%BB%8E%E5%BA%94%E7%94%A8%E9%80%BB%E8%BE%91%E4%BD%BF%E7%94%A8appstorage"><strong>ä»åº”ç”¨é€»è¾‘ä½¿ç”¨AppStorage</strong></a></li>
<li><a href="#%E4%BB%8Eui%E9%80%BB%E8%BE%91%E4%BD%BF%E7%94%A8appstorage"><strong>ä»UIé€»è¾‘ä½¿ç”¨AppStorage</strong></a></li>
</ul>
</li>
<li><a href="#persistentstorage%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8ui%E7%8A%B6%E6%80%81">PersistentStorageï¼šæŒä¹…åŒ–å­˜å‚¨UIçŠ¶æ€</a></li>
<li><a href="#environment%E8%AE%BE%E5%A4%87%E7%8E%AF%E5%A2%83%E6%9F%A5%E8%AF%A2">Environmentï¼šè®¾å¤‡ç¯å¢ƒæŸ¥è¯¢</a></li>
</ul>
</li>
<li><a href="#3-%E5%85%B6%E4%BB%96%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86">3. å…¶ä»–çŠ¶æ€ç®¡ç†</a>
<ul>
<li><a href="#watch">@watch</a></li>
<li><a href="#">$$</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%B8%B2%E6%9F%93%E6%8E%A7%E5%88%B6">æ¸²æŸ“æ§åˆ¶</a>
<ul>
<li><a href="#ifelse-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93">if/else æ¡ä»¶æ¸²æŸ“</a></li>
<li><a href="#foreach%E5%BE%AA%E7%8E%AF%E6%B8%B2%E6%9F%93">ForEachï¼šå¾ªç¯æ¸²æŸ“</a></li>
<li><a href="#lazyforeach%E6%95%B0%E6%8D%AE%E6%87%92%E5%8A%A0%E8%BD%BD">LazyForEachï¼šæ•°æ®æ‡’åŠ è½½</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </article>
      </div>

      
      <div class="next-post">
        <div class="next">ä¸‹ä¸€ç¯‡</div>
        <a href="https://qin_hu.gitee.io/blog/post/less-he-scss/">
          <h3 class="post-title">
            cssé¢„å¤„ç†å™¨-lesså’Œscss
          </h3>
        </a>
      </div>
      

      

      <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://qin_hu.gitee.io/blog//atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>
<div id="backtop">
    <a href="#backtop" class="backTop" title="å›åˆ°é¡¶éƒ¨">
        <svg t="1702280870845" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="5528" width="50" height="50">
            <path
                d="M679.936 482.176l0.32-0.32-157.44-157.44c-6.912-6.912-18.112-6.912-25.024 0L342.4 479.872 342.592 480c-10.88 11.776-6.208 34.624 10.816 51.648s39.872 21.632 51.648 10.816L405.12 542.592l62.336-62.336 0 195.648c0 24 19.392 43.52 43.392 43.52s43.392-19.52 43.392-43.52L554.24 481.28l61.696 61.696c0.064 0.064 0.064 0.064 0.128 0.128l0.128 0.064 1.408 1.408 0.192-0.192c12.032 9.728 33.984 4.928 50.56-11.584C684.8 516.16 689.6 494.208 679.936 482.176z"
                fill="#8F9EB230" p-id="5529"></path>
            <path
                d="M512 64C264.576 64 64 264.576 64 512s200.576 448 448 448c247.36 0 448-200.64 448-448S759.36 64 512 64zM512 864.256c-194.56 0-352.192-157.76-352.192-352.256C159.808 317.504 317.44 159.808 512 159.808c194.496 0 352.192 157.696 352.192 352.192C864.192 706.496 706.496 864.256 512 864.256z"
                fill="#8F9EB230" p-id="5530"></path>
        </svg>
    </a>
</div>
<style>
.backTop {
  width: 50px;
  height: 50px;
  position: fixed;
  bottom: 50px;
  right: 50px;
  text-align: center;
  line-height: 50px;
  transition: .5s ease-in-out;

}

.backTop:hover {
  transform: translateY(15px);
}

#backtop {
  position: absolute;
  top: 0px;
  z-index: 100;
  opacity: 0;
}
</style>
<script>
    const bodyDom = document.querySelector('body')
    const backTopDom = document.querySelector('#backtop')
    document.addEventListener('scroll', (e) => {
        // console.log(bodyDom.scrollTop)
        if (bodyDom.scrollTop > 3550) {
            backTopDom.style.opacity = 1
        } else {
            backTopDom.style.opacity = 0
        }
    })
</script>
      <!-- <div class="theme">
    <input class="switch-input" id="theme-switch" type="checkbox">
    <label class="switch-control" for="theme-switch"></label>
    <div class="container"></div>
</div>
 -->
    </div>
  </div>

  <script>
    // hljs.initHighlightingOnLoad()
    // hljs.highlightAll();
    document.addEventListener('DOMContentLoaded', () => {
      hljs.highlightAll();
    });
    let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

    // This should probably be throttled.
    // Especially because it triggers during smooth scrolling.
    // https://lodash.com/docs/4.17.10#throttle
    // You could do like...
    // window.addEventListener("scroll", () => {
    //    _.throttle(doThatStuff, 100);
    // });
    // Only not doing it here to keep this Pen dependency-free.

    window.addEventListener("scroll", event => {
      let fromTop = window.scrollY;

      mainNavLinks.forEach((link, index) => {
        let section = document.getElementById(decodeURI(link.hash).substring(1));
        let nextSection = null
        if (mainNavLinks[index + 1]) {
          nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
        }
        if (section.offsetTop <= fromTop) {
          if (nextSection) {
            if (nextSection.offsetTop > fromTop) {
              link.classList.add("current");
            } else {
              link.classList.remove("current");
            }
          } else {
            link.classList.add("current");
          }
        } else {
          link.classList.remove("current");
        }
      });
    });
  </script>
</body>

</html>