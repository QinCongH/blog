<html>

<head>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>nodeJså…¥é—¨ | ç¦¾è€³</title>
<link rel="shortcut icon" href="https://qin_hu.gitee.io/blog//favicon.ico?v=1714022378479">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://qin_hu.gitee.io/blog//styles/main.css">
<link rel="alternate" type="application/atom+xml" title="nodeJså…¥é—¨ | ç¦¾è€³ - Atom Feed" href="https://qin_hu.gitee.io/blog//atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  <meta name="description" content="1. è®¤è¯†NodeJs
è®¤è¯†

æ˜¯ä»€ä¹ˆï¼Ÿ node.jsæ˜¯Javascriptçš„è¿è¡Œç¯å¢ƒ
èƒ½å¹²å˜›ï¼Ÿå‰ç«¯è„±ç¦»åç«¯ï¼Œç›´æ¥é€šè¿‡Jså†™é¡¹ç›®
å»å“ªä¸‹ï¼Ÿnode.jså®˜ç½‘

åˆä½“éªŒ(REPL)

read é˜…è¯»ï¼ˆè¯»å–jsä»£ç ï¼‰
exec æ‰§è¡Œï¼ˆæ‰§è¡Œè¾“å‡º..." />
  <meta name="keywords" content="nodeJs" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script> -->

  <!-- and it's easy to individually load additional languages -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/night-owl.min.css">


</head>

<body>
  <div class="main">
    <div class="main-content">
      <div class="site-header">
  <a href="https://qin_hu.gitee.io/blog/">
    <img class="avatar" src="https://qin_hu.gitee.io/blog//images/avatar.png?v=1714022378479" alt="">
  </a>

  <h1 class="site-title">
    ç¦¾è€³
  </h1>
  <p class="site-description">
    é€†é£çš„æ–¹å‘ï¼Œæ›´é€‚åˆé£ç¿”ã€‚
  </p>
  <form style=" position: absolute;
  top: 50px;
  right: 150px;
  border: unset;
  outline: unset;display: flex;" id="gridea-search-form" action="https://qin_hu.gitee.io/blog//search/">
    <input placeholder="è¯·è¾“å…¥.." style="color: #222 !important;margin-right: 10px;
   " name="q" />
    <svg onclick="window.location.reload()" style="
    cursor: pointer;    filter: invert(1);" title="åˆ·æ–°é¡µé¢" class="shuaxin-icon" t="1705541456452" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
      p-id="4229" width="20" height="20">
      <path
        d="M55.935033 264.48948c0 0 85.897017-132.548409 221.81443-203.673173 135.916406-71.121743 303.368504-50.646859 413.187968 18.319527 109.819465 68.970415 146.791894 127.160016 146.791894 127.160016l94.59499-53.879895c0 0 19.576483-9.697092 19.576483 12.932142l0 338.379961c0 0 0 30.17399-22.837719 19.395191-19.210878-9.062571-226.959086-127.198289-292.424528-164.466828-35.950145-16.035251-4.365101-29.062068-4.365101-29.062068l91.284402-52.173738c0 0-52.068992-65.209619-128.278989-99.744682-81.576231-42.501826-157.948384-47.541735-251.497925-12.224097-61.002644 23.025054-132.823368 81.988166-184.553949 169.082716L55.935033 264.48948 55.935033 264.48948 55.935033 264.48948zM904.056909 711.697844c0 0-85.897017 132.550423-221.816444 203.671159-135.917413 71.12275-303.366489 50.651895-413.186961-18.315498-109.825508-68.972429-146.790886-127.165052-146.790886-127.165052L27.662591 823.768348c0 0-19.572454 9.703135-19.572454-12.932142L8.090137 472.459267c0 0 0-30.170968 22.831676-19.397205 19.211885 9.067607 226.965129 127.198289 292.430571 164.470856 35.950145 16.035251 4.366109 29.058039 4.366109 29.058039l-91.285409 52.175753c0 0 52.071006 65.206598 128.279996 99.744682 81.57321 42.498804 157.942341 47.540728 251.496918 12.222082 60.998616-23.026061 132.820346-81.983131 184.546898-169.082716L904.056909 711.697844 904.056909 711.697844 904.056909 711.697844zM904.056909 711.697844"
        fill="#2c2c2c" p-id="4230"></path>
    </svg>
  </form>
  <button style="    border: unset;
  background: #f0f8ff00;cursor: pointer;" class="theme-button" onclick="changeTheme()">
    ğŸŒ™
  </button>
  <div class="menu-container">
    
    
    <a href="https://qin_hu.gitee.io/blog/" class="menu">
      é¦–é¡µ
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/archives" class="menu">
      å½’æ¡£
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/tags" class="menu">
      æ ‡ç­¾
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/friend" class="menu">
      å‹é“¾
    </a>
    
    
    
    <a href="https://qin_hu.gitee.io/blog/about" class="menu">
      å…³äº
    </a>
    
    
  </div>
  <div class="social-container">
    
    
    <a href="https://github.com/QinCongH" target="_blank">
      <i class="ri-github-line"></i>
    </a>
    
    
    
    
    
    
    
    
    
    
  </div>
</div>
<script>
  window.addEventListener('load', () => {
    const themeType = localStorage.getItem('theme')
    const bodyDom = document.querySelector('body')
    const themeButtonDom = document.querySelector('.theme-button')
    // console.log(1111111111111111, themeType)
    if (themeType === 'light') {
      bodyDom.removeAttribute('thmem-dark')
      themeButtonDom.textContent = 'ğŸŒ™'
      localStorage.setItem('theme', 'light')
    } else {
      bodyDom.setAttribute('thmem-dark', '')
      themeButtonDom.textContent = 'ğŸŒ'
      localStorage.setItem('theme', 'dark')
    }
  })

  function changeTheme() {
    const bodyDom = document.querySelector('body')
    const themeButtonDom = document.querySelector('.theme-button')
    const attr = bodyDom.hasAttribute('thmem-dark')
    if (attr) {
      bodyDom.removeAttribute('thmem-dark')
      themeButtonDom.textContent = 'ğŸŒ™'
      localStorage.setItem('theme', 'light')
    } else {
      bodyDom.setAttribute('thmem-dark', '')
      themeButtonDom.textContent = 'ğŸŒ'
      localStorage.setItem('theme', 'dark')
    }
  }
</script>
      <div class="post-detail">
        <article class="post">
          <h2 class="post-title">
            nodeJså…¥é—¨
          </h2>
          <div class="post-info">
            <span>
              2024-01-08
            </span>
            <span>
              19 min read
            </span>
            
            <a href="https://qin_hu.gitee.io/blog/tag/E7wJE8AQv/" class="post-tag">
              # nodeJs
            </a>
            
          </div>
          
          <div class="post-content-wrapper">
            <div class="post-content" v-pre>
              <h1 id="1-è®¤è¯†nodejs">1. è®¤è¯†NodeJs</h1>
<h2 id="è®¤è¯†">è®¤è¯†</h2>
<ul>
<li>æ˜¯ä»€ä¹ˆï¼Ÿ node.jsæ˜¯Javascriptçš„è¿è¡Œç¯å¢ƒ</li>
<li>èƒ½å¹²å˜›ï¼Ÿå‰ç«¯è„±ç¦»åç«¯ï¼Œç›´æ¥é€šè¿‡Jså†™é¡¹ç›®</li>
<li>å»å“ªä¸‹ï¼Ÿ<a href="https://nodejs.org/zh-cn/download/">node.jså®˜ç½‘</a></li>
</ul>
<h2 id="åˆä½“éªŒrepl">åˆä½“éªŒ(REPL)</h2>
<ul>
<li>read é˜…è¯»ï¼ˆè¯»å–jsä»£ç ï¼‰</li>
<li>exec æ‰§è¡Œï¼ˆæ‰§è¡Œè¾“å‡ºä»£ç ï¼‰</li>
<li>print æ‰“å° ï¼ˆæ‰“å°è¾“å‡ºä»£ç ï¼‰</li>
<li>loop å¾ªç¯ï¼ˆå¾ªç¯ä»¥ä¸Šå‘½ä»¤ï¼‰</li>
</ul>
<h2 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h2>
<ul>
<li>åˆ‡æ¢æ–‡ä»¶ cd æ–‡ä»¶å</li>
<li>è¿è¡Œjsæ–‡ä»¶ node æ–‡ä»¶å</li>
<li>é€€å‡º(æŒ‰ä¸¤ä¸‹ctrl+c)</li>
<li>æ¸…é™¤ ï¼ˆclsï¼‰</li>
<li>è¿è¡Œä»£ç  (node æ–‡ä»¶å)</li>
</ul>
<h2 id="ç»ƒä¹ ">ç»ƒä¹ </h2>
<ul>
<li>è¾“å‡ºHello World</li>
</ul>
<h2 id="2-nodeæ¨¡å—ç³»ç»Ÿ">2. nodeæ¨¡å—ç³»ç»Ÿ</h2>
<h3 id="2-1ç®€ä»‹">2-1.ç®€ä»‹</h3>
<blockquote>
<p>ä½¿ç”¨nodejsç¼–å†™åº”ç”¨ç¨‹åºä¸»è¦ä½¿ç”¨:</p>
</blockquote>
<h4 id="2-1-1-ecmascriptè¯­æ³•å˜é‡åˆ¤æ–­å¾ªç¯ç­‰">2-1-1. ECMAscriptè¯­æ³•ï¼šå˜é‡,åˆ¤æ–­,å¾ªç¯ç­‰ã€‚</h4>
<blockquote>
<p>JSä¸‰å¤§ç»„æˆéƒ¨åˆ†ï¼ˆECMA/DOMï¼ˆdocumentï¼‰/BOMï¼ˆwindow,locationç­‰ï¼‰ï¼‰</p>
</blockquote>
<h4 id="2-1-2-å†…ç½®æ ¸å¿ƒæ¨¡å—httpæ¨¡å—fsæ–‡ä»¶æ“ä½œurlè·¯å¾„pathè·¯å¾„æ¨¡å—osæ“ä½œç³»ç»Ÿ">2-1-2. å†…ç½®æ ¸å¿ƒæ¨¡å—ï¼šHTTPæ¨¡å—,fsæ–‡ä»¶æ“ä½œ,urlè·¯å¾„,pathè·¯å¾„æ¨¡å—,osæ“ä½œç³»ç»Ÿ</h4>
<p><a href="https://nodejs.org/api/">å†…ç½®æ¨¡å—apiä½“éªŒ</a></p>
<h4 id="2-1-3-è‡ªå®šä¹‰æ¨¡å—è‡ªå·±åˆ›å»ºçš„js">2-1-3. è‡ªå®šä¹‰æ¨¡å—ï¼ˆè‡ªå·±åˆ›å»ºçš„jsï¼‰</h4>
<blockquote>
<p>CommonJSæ¨¡å—è§„èŒƒ:<br>
(1)ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—<br>
(2)é€šè¿‡exportå’Œmodul.exportsæ¥å¯¼å‡ºæ¨¡å—ä¸­çš„æˆå‘˜<br>
(3)é€šè¿‡requireæ¥åŠ è½½æ¨¡å—</p>
</blockquote>
<h5 id="1-3-1è‡ªå®šä¹‰æ¨¡å—æ­¥éª¤">1-3-1.è‡ªå®šä¹‰æ¨¡å—æ­¥éª¤</h5>
<ol>
<li><strong>æ­¥éª¤1.å¯¼å‡ºæˆå‘˜ï¼ˆå£°æ˜å“ªäº›æ–¹æ³•å¯ä»¥è¢«å¤–éƒ¨ä½¿ç”¨ï¼‰</strong></li>
</ol>
<pre><code>//å†™æ³•1
exports.å±æ€§/æ–¹æ³•=åŠŸèƒ½
//å†™æ³•2
module.exports.å±æ€§/æ–¹æ³•=å˜é‡åï¼š
</code></pre>
<ol>
<li><strong>æ­¥éª¤2.å¤–éƒ¨å¼•å…¥ä½¿ç”¨</strong></li>
</ol>
<pre><code>//ä½¿ç”¨ å…ˆå¼•å…¥å†è°ƒç”¨
var å¯¹è±¡=require('è·¯å¾„æ–‡ä»¶å');
//å¯¹è±¡.å±æ€§æˆ–æ–¹æ³•å
</code></pre>
<h3 id="2-1-4-ç¬¬ä¸‰æ–¹æ¨¡å—">2-1-4. ç¬¬ä¸‰æ–¹æ¨¡å—</h3>
<blockquote>
<p>ç»ƒä¹ </p>
</blockquote>
<ul>
<li>åˆ›å»ºa.jså’Œb.jsæ–‡ä»¶ï¼Œåœ¨a.jså¼•å…¥b.jsæ¨¡å—</li>
</ul>
<h1 id="3å¸¸ç”¨å†…ç½®æ¨¡å—">3.å¸¸ç”¨å†…ç½®æ¨¡å—</h1>
<h2 id="os">OS</h2>
<h2 id="path">path</h2>
<h3 id="è¾“å‡ºæ–‡ä»¶å">è¾“å‡ºæ–‡ä»¶å</h3>
<blockquote>
<p>path.basename(path[, ext])</p>
</blockquote>
<pre><code>console.log(path.basename(&quot;/node/base/path/xx/js/index.js&quot;));
// æœ€åè¾“å‡º index.js	
</code></pre>
<blockquote>
<p>å¦‚æœåªæƒ³è·å–æ–‡ä»¶åï¼Œä¸è¦åç¼€</p>
</blockquote>
<pre><code>const path = require('path');
console.log(path.basename(&quot;/node/base/path/xx/js/index.js&quot;, '.js')); 
</code></pre>
<h3 id="è¿”å›ä¸€ä¸ªpathçš„ç›®å½•å">è¿”å›ä¸€ä¸ªpathçš„ç›®å½•å</h3>
<blockquote>
<p>path.dirname(path)</p>
</blockquote>
<pre><code>const path = require('path');

const filepath = '/node/base/path/index.js';

console.log(path.dirname(filepath)); // è¾“å‡º /node/base/path
</code></pre>
<h3 id="è¿”å›ä¸€ä¸ªå¯¹è±¡å¯¹è±¡çš„å±æ€§è¡¨ç¤ºpathçš„å…ƒç´ ">è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å±æ€§è¡¨ç¤ºpathçš„å…ƒç´ </h3>
<blockquote>
<p>path.parse(path)</p>
</blockquote>
<pre><code>const path = require('path');
const filepath = '/node/base/path/index.js';
console.log(path.parse(filepath)); 
// è¾“å‡ºå¦‚ä¸‹ï¼š
/*
  { 
    root: '/',
    dir: '/node/base/path',
    base: 'index.js',
    ext: '.js',
    name: 'index' 
  }
*/
</code></pre>
<h2 id="file-è¯»å†™æ–‡ä»¶æ“ä½œ">file  è¯»å†™æ–‡ä»¶æ“ä½œ</h2>
<h3 id="1è¯»-fsreadfile">1.è¯» fs.readFile()</h3>
<pre><code>fs.readFile('',function(err,data){
	if(err){
	
	}else{
		
	}
})
</code></pre>
<figure data-type="image" tabindex="1"><img src="/api/public/image/files.0-1671689613432.png" alt="" loading="lazy"></figure>
<h3 id="2å†™-fswrite">2.å†™ fs.write()</h3>
<pre><code>fs.write('æ–‡ä»¶è·¯å¾„',&quot;å†…å®¹&quot;,funtion(err){
	console.log('ok');
})
</code></pre>
<figure data-type="image" tabindex="2"><img src="/api/public/image/files.0-1671689649822.png" alt="" loading="lazy"></figure>
<h2 id="http">http</h2>
<blockquote>
<p>åˆ›å»ºserveæœåŠ¡å™¨</p>
</blockquote>
<pre><code>var http=require('http')
// åˆ›å»ºserve
var server=http.createServer()
// æ·»åŠ è¯·æ±‚
server.on('request',(req,res)=&gt;{
 console.log(&quot;è¯·æ±‚è·¯å¾„æ˜¯:&quot;,req.url)
 //res.end(&quot;å†…å®¹&quot;)æ–¹æ³•è¡¨ç¤ºå†™å…¥å¹¶å…³é—­ï¼Œæ˜¯res.writeå’Œres.end()çš„ç¼©å†™; res.end()ä¸­çš„å†…å®¹åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–è€…äºŒè¿›åˆ¶æ•°æ®
  res.end(&quot;server is ok!&quot;)
})
// å¯åŠ¨ç›‘å¬ç«¯å£
server.listen(80,()=&gt;{
 console.log(&quot;å½“å‰ç«¯å£å·ï¼šlocalhost:80&quot;)
})
</code></pre>
<h2 id="url">url</h2>
<h3 id="è§£æurlåœ°å€">è§£æURLåœ°å€</h3>
<blockquote>
<p><code>url.parse()</code></p>
</blockquote>
<pre><code>var http = require(&quot;http&quot;);

var url = require(&quot;url&quot;);

var server = http.createServer(function(req,res){

    var pathname = url.parse(req.url).pathname;

    var query = url.parse(req.url).query;

    console.log(&quot;patname:&quot;+ pathname);

    console.log(query);

    res.end();

});

server.listen(3000,&quot;127.0.0.1&quot;);

</code></pre>
<h1 id="4è¯·æ±‚ä¸å“åº”çš„ä¸€äº›æ–¹æ³•">4.è¯·æ±‚ä¸å“åº”çš„ä¸€äº›æ–¹æ³•</h1>
<h2 id="1-request">1. request</h2>
<h3 id="1-1-requestmethod">1-1. <code>request.method</code></h3>
<blockquote>
<p>è·å–è§†å›¾è¯·æ±‚æ–¹æ³•</p>
</blockquote>
<pre><code>if(req.method==&quot;get&quot;){...}
</code></pre>
<h3 id="1-2-requesturl">1-2. <code>request.url</code></h3>
<blockquote>
<p>è·å–å½“å‰urlåœ°å€</p>
</blockquote>
<h3 id="1-3-requestbody">1-3. <code>request.body</code></h3>
<blockquote>
<p>è·å–postè¯·æ±‚æ•°æ®ï¼ˆä¾èµ–æ¨¡æ¿å¼•æ“ï¼‰</p>
</blockquote>
<h3 id="1-4-requestquery">1-4. <code>request.query</code></h3>
<blockquote>
<p>è·å–getè¯·æ±‚æ•°æ®ï¼ˆä¾èµ–æ¨¡æ¿å¼•æ“ï¼‰</p>
</blockquote>
<h2 id="2-response">2. response</h2>
<h3 id="2-1-responseendtext">2-1. <code>response.end(&quot;text&quot;);</code></h3>
<blockquote>
<p>å“åº”å†…å®¹ä¸ºtextï¼Œå“åº”å¹¶ç»ˆæ­¢;<br>
æ³¨æ„ï¼Œrequest.endåªèƒ½å“åº”äºŒè¿›åˆ¶æ•°æ®æˆ–è€…å­—ç¬¦ä¸²;<br>
request.end()ä¸request.write()çš„ç¼©å†™;</p>
</blockquote>
<h3 id="2-2-responsewriteå†…å®¹">2-2. <code>response.write(&quot;å†…å®¹&quot;)</code></h3>
<blockquote>
<p>å†™å“åº”å†…å®¹</p>
</blockquote>
<h3 id="2-3-responsewritehead200">2-3. <code>response.writeHeadï¼ˆ&quot;200&quot;ï¼‰</code></h3>
<blockquote>
<p>å†™å“åº”å¤´</p>
</blockquote>
<pre><code> res.writeHead(200, {
                    &quot;Content-Type&quot;: &quot;text/html&quot;
                }); 
</code></pre>
<h3 id="2-4responsesetheaderlocation">2-4.<code>response.setHeader('Location','/')</code></h3>
<blockquote>
<p>è®¾ç½®å“åº”å¤´è·³è½¬</p>
</blockquote>
<h3 id="2-5-resstatuscode320">2-5. <code>res.statusCode=320</code></h3>
<blockquote>
<p>è®¾ç½®å“åº”ç </p>
</blockquote>
<h3 id="2-6ä¸‰ç§å“åº”å­—ç¬¦ä¸²æ–¹æ³•">2-6.ä¸‰ç§&quot;å“åº”å­—ç¬¦ä¸²&quot;æ–¹æ³•</h3>
<pre><code>//æ„ï¼šå“åº”å¹¶å…³é—­
res.end(&quot;å“åº”æˆåŠŸ&quot;)  //ä¼šä¹±ç 
res.send(&quot;å“åº”æˆåŠŸ&quot;); //è‡ªåŠ¨è¯†åˆ« ç›´æ¥å“åº”
res.render(&quot;å“åº”æˆåŠŸ&quot;) //è‡ªåŠ¨è¯†åˆ«ï¼Œåªèƒ½æ‰“å¼€æŒ‡å®šæ–‡ä»¶å­—ç¬¦ä¸²å¹¶å“åº”ï¼Œå¿…é¡»é…åˆæ¨¡æ¿å¼•æ“ä½¿ç”¨
</code></pre>
<h3 id="2-7é‡å®šå‘-resredirect">2-7.é‡å®šå‘ <code>res.redirect(&quot;/&quot;)</code></h3>
<blockquote>
<p>é‡å®šå‘åˆ°æ ¹è·¯å¾„</p>
</blockquote>
<h1 id="5-npmçš„åŸºæœ¬ä½¿ç”¨">5. npmçš„åŸºæœ¬ä½¿ç”¨</h1>
<h2 id="1ç®€ä»‹">1.ç®€ä»‹</h2>
<blockquote>
<p>npmï¼Œå…¨å node package mangerã€‚</p>
</blockquote>
<ul>
<li>
<p>npm æ˜¯Nodeçš„å¼€æ”¾å¼æ¨¡å—ç™»è®°å’Œç®¡ç†ç³»ç»Ÿï¼Œæ˜¯Node.jsåŒ…çš„æ ‡å‡†å‘å¸ƒå¹³å°ï¼Œç”¨äºNode.jsåŒ…çš„å‘å¸ƒã€ä¼ æ’­ã€ä¾èµ–æ§åˆ¶ï¼Œç½‘å€ï¼šhttps://www.npmjs.com/</p>
</li>
<li>
<p>npm æä¾›äº†å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä¸‹è½½ã€å®‰è£…ã€å‡çº§ã€åˆ é™¤åŒ…ï¼Œä¹Ÿå¯ä»¥è®©ä½ ä½œä¸ºå¼€å‘è€…å‘å¸ƒå¹¶ç»´æŠ¤åŒ…</p>
</li>
<li>
<p>ä¸‹è½½nodeæ‰€éœ€çš„ç¬¬ä¸‰æ–¹æ¨¡å—</p>
</li>
</ul>
<h2 id="2å®‰è£…">2.å®‰è£…</h2>
<ul>
<li>
<p>å®‰è£…å¥½nodejsåå°±å®‰è£…å¥½äº†npmï¼Œè¿™æ—¶ç³»ç»Ÿè‡ªå¸¦npmå‘½ä»¤<br>
æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ <code>npm -v</code></p>
</li>
<li>
<p>npm åœ¨æŒ‰ç…§ Node.js æ—¶ä¼šè¿å¸¦è¢«å®‰è£…ã€‚ä½†æœ‰å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œéœ€è¦ <code>npm install npm@latest -g</code> å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</p>
</li>
</ul>
<h2 id="3ä½¿ç”¨">3.ä½¿ç”¨</h2>
<h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h3>
<blockquote>
<p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç„¶åè¿è¡Œ</p>
</blockquote>
<pre><code>npm init
//æˆ–è€…
npm init -y  
//ä¸å¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œé»˜è®¤åˆå§‹åŒ–
</code></pre>
<blockquote>
<p>åˆå§‹åŒ–åä¼šç”Ÿæˆpackage.jsonæ–‡ä»¶ï¼ˆpackage.jsonå°±æ˜¯è®°å½•æ‰€æœ‰å®‰è£…çš„åŒ…çš„ä¿¡æ¯çš„æ–‡ä»¶ã€‚ï¼‰</p>
</blockquote>
<h3 id="å®‰è£…æ¨¡å—">å®‰è£…æ¨¡å—</h3>
<pre><code>npm insatll æ¨¡å— [å®‰è£…å¯é€‰å‚æ•°] 
//æˆ–è€…
npm install æ¨¡å—@ç‰ˆæœ¬å· [å®‰è£…å¯é€‰å‚æ•°]
</code></pre>
<h4 id="å®‰è£…å‚æ•°">å®‰è£…å‚æ•°</h4>
<ul>
<li>--save è®°å½•ç”Ÿäº§ç¯å¢ƒæ‰€éœ€æ¨¡å—ï¼ˆé»˜è®¤ï¼‰</li>
<li>--save-dev è®°å½•å¼€å‘ç¯å¢ƒæ‰€éœ€æ¨¡å—</li>
<li>--g è¯¥æ¨¡å—å¯åœ¨å‘½ä»¤è¡Œè¿è¡Œ(global)</li>
</ul>
<blockquote>
<p>éƒ½å®‰è£…: <code>npm install</code><br>
åªå®‰è£…ç”Ÿäº§ç¯å¢ƒï¼š<code>npm install -production</code></p>
</blockquote>
<blockquote>
<p>å®‰è£…æ¨¡å—åä¼šå‡ºç°ä¸€ä¸ªnode_modulesæ–‡ä»¶å¤¹ï¼Œnode_modulesæ–‡ä»¶å¤¹å°±æ˜¯æ‰€æœ‰åŒ…å®‰è£…çš„ä½ç½®ã€‚</p>
</blockquote>
<h3 id="å¸è½½æ¨¡å—">å¸è½½æ¨¡å—</h3>
<pre><code>npm uninstall æ¨¡å—
</code></pre>
<h3 id="æŸ¥çœ‹æ¨¡å—">æŸ¥çœ‹æ¨¡å—</h3>
<pre><code>npm list
</code></pre>
<h2 id="4å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…å‘½ä»¤">4.å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…å‘½ä»¤</h2>
<h3 id="1-nodemon">1.  nodemon</h3>
<blockquote>
<p>å¯ä»¥éšæ—¶ç›‘å¬æ–‡ä»¶çš„å˜æ›´ï¼Œè‡ªåŠ¨é‡å¯æœåŠ¡</p>
</blockquote>
<pre><code>npm install -g nodemon
</code></pre>
<h3 id="2momentjs">2.<a href="http://momentjs.cn/">momentJs</a></h3>
<blockquote>
<p>æ—¥æœŸæ—¶é—´ç±»</p>
</blockquote>
<pre><code>npm install moment
</code></pre>
<h1 id="6-express">6. Express</h1>
<h2 id="expressç®€ä»‹">Expressç®€ä»‹</h2>
<blockquote>
<p>æ˜¯ä»€ä¹ˆï¼šåŸºäºnodeJså¼€å‘çš„ä¸€ä¸ªæ¡†æ¶<br>
å¥½  å¤„ï¼šåŠ å¿«é¡¹ç›®å¼€å‘ï¼Œä¾¿äºå›¢é˜Ÿåä½œ</p>
</blockquote>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<h3 id="åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹">åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹</h3>
<h3 id="å®‰è£…expressæ¡†æ¶">å®‰è£…expressæ¡†æ¶</h3>
<ul>
<li>å®‰è£…å‘½ä»¤</li>
</ul>
<p><code>npm install express</code></p>
<h3 id="åˆ›å»ºserveræœåŠ¡">åˆ›å»ºserveræœåŠ¡</h3>
<blockquote>
<p>åˆ›å»ºapp.jså…¥å£æ–‡ä»¶</p>
</blockquote>
<ul>
<li>å¼•å…¥æ¨¡å—</li>
<li>åˆ›å»ºwebæœåŠ¡å™¨</li>
<li>åˆ›å»ºè·¯ç”±ï¼ˆhttpåˆ›å»ºæ—¶ï¼šæ˜¯åˆ›å»ºç›‘å¬å¹¶è¯·æ±‚äº‹ä»¶ï¼Œè¿™é‡Œæ¡†æ¶å¼•å‡ºè·¯ç”±æ¦‚å¿µï¼‰</li>
<li>å¯åŠ¨æœåŠ¡</li>
</ul>
<pre><code>// 1.å¼•å…¥æ¨¡å—
const express=require('express')
// 2.åˆ›å»ºwebæœåŠ¡å™¨
const app=express()
//3.åˆ›å»ºè·¯ç”±ï¼ˆhttpåˆ›å»ºæ—¶ï¼šåˆ›å»ºç›‘å¬å¹¶è¯·æ±‚äº‹ä»¶ï¼‰
app.get('/',function(req,res){
    //å“åº”å­—ç¬¦ä¸²
    res.send(&quot;å“åº”æˆåŠŸ&quot;); //è‡ªåŠ¨è¯†åˆ« ç›´æ¥å“åº”,æ„ï¼šå“åº”å¹¶å…³é—­
})
// 4.å¯åŠ¨æœåŠ¡
app.listen('2002',function(){
    console.log(&quot;ok: http://localhost:2002 &quot;);
})

</code></pre>
<h2 id="expressè·¯ç”±">Expressè·¯ç”±</h2>
<blockquote>
<p>è·¯ç”±ç”¨äºç¡®å®šåº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹çš„å®¢æˆ·æœºè¯·æ±‚ï¼ŒåŒ…å«ä¸€ä¸ª URIï¼ˆæˆ–è·¯å¾„ï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰</p>
</blockquote>
<h3 id="åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•</h3>
<ul>
<li>å‘é€getè¯·æ±‚<code>app.get()</code></li>
<li>å‘é€postè¯·æ±‚<code>app.post()</code></li>
<li>å‘é€ä»»æ„è¯·æ±‚<code>app.all()</code></li>
<li>éå®Œå…¨åŒ¹é…urlè·¯å¾„å‘é€ä»»æ„è¯·æ±‚<code>app.use()</code></li>
</ul>
<pre><code>//app.HTTPè¯·æ±‚ç±»å‹(è¯·æ±‚è·¯å¾„,å›è°ƒå‡½æ•°)

//1.å‘é€getè¯·æ±‚
app.get('/',function(req,res){})
//2.å‘é€postè¯·æ±‚
app.post('/',function(req,res){})
//3.å‘é€ä»»æ„è¯·æ±‚
app.all('/',function(req,res){})
//4.éå®Œå…¨åŒ¹é…urlè·¯å¾„å‘é€ä»»æ„è¯·æ±‚
app.use('/',function(req,res){})
</code></pre>
<ul>
<li>Express å®šä¹‰äº†å¦‚ä¸‹HTTP è¯·æ±‚ç±»å‹æ–¹æ³•ï¼š get, post, put, head, delete, options, trace, copy, lock, mkcol, move, purge, propfind, proppatch, unlock, report, mkactivity, checkout, merge, m-search, notify, subscribe, unsubscribe, patch, search, å’Œ connectã€‚</li>
</ul>
<h1 id="7æ¨¡æ¿å¼•æ“">7.æ¨¡æ¿å¼•æ“</h1>
<h2 id="1ç®€ä»‹-2">1.ç®€ä»‹</h2>
<blockquote>
<p>æ¨¡ç‰ˆå¼•æ“æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚å¯ä»¥è®©å¼€å‘ç€ä»¥æ›´å‹å¥½çš„æ–¹å¼æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½¿é¡¹ç›®ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæ›´åŠ æ˜“äºç»´æŠ¤ã€‚å¸¸è§çš„æ¨¡æ¿å¼•æ“æœ‰ejs jadeï¼Œè¿™é‡Œä½¿ç”¨art-template</p>
</blockquote>
<h2 id="2å®‰è£…-2">2.å®‰è£…</h2>
<pre><code>npm install art-template 
//ç®€å†™ï¼š
npm i art-template 
</code></pre>
<p>åœ¨expressä¸­ä½¿ç”¨ï¼š</p>
<pre><code>npm install express-art-template 
</code></pre>
<h2 id="3ä½¿ç”¨-2">3.ä½¿ç”¨</h2>
<ul>
<li>åœ¨nodeä¸­ä½¿ç”¨çš„æ ‡å‡†è¯­æ³•</li>
</ul>
<pre><code>const template = require('art-template');//å¼•å…¥æ¨¡å—
const html = template(__dirname + '/tpl-user.art', {
ã€€ã€€user: {
ã€€ã€€ã€€ã€€name: 'aui'
ã€€ã€€}
});
//const html = template('æ¨¡ç‰ˆè·¯å¾„'ï¼Œ 'æ•°æ®')
//å‚æ•°ä¸€ï¼š æ¨¡ç‰ˆå¼•æ“çš„è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼Œéœ€è¦path.join æ‹¼æ¥ï¼‰
//å‚æ•°äºŒï¼šè¦ä¼ é€’ç»™æ¨¡ç‰ˆå¼•æ“çš„æ•°æ®
</code></pre>
<ul>
<li>åœ¨expressä¸­ä½¿ç”¨çš„æ ‡å‡†è¯­æ³•</li>
</ul>
<p>ï¼ˆ1ï¼‰å£°æ˜æ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“</p>
<pre><code> app.engine('html', require('express-art-template'));  //ç¬¬ä¸€ä¸ªå‚æ•°å‘Šè¯‰æ¨¡æ¿å¼•æ“è¦æ¸²æŸ“æ–‡ä»¶çš„åç¼€æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œæ˜¯â€˜htmlâ€™
</code></pre>
<p>ï¼ˆ2ï¼‰è®¾ç½®æ¨¡æ¿å¼•æ“æ¸²æŸ“æŒ‡å®šæ–‡ä»¶å¤¹ï¼ˆå¯é€‰ï¼‰</p>
<pre><code> app.set('views','./views') ;
 // app.set('æ–‡ä»¶å','æ–‡ä»¶æ‰€åœ¨è·¯å¾„') ;
</code></pre>
<p>(3)ä½¿ç”¨res.renderè¯­æ³•å¾—åˆ°æ•°æ®</p>
<pre><code>	res.render(æ¨¡æ¿æ–‡ä»¶,æ¨¡æ¿æ•°æ®)
</code></pre>
<h2 id="4å¸¸ç”¨çš„è¯­æ³•">4.å¸¸ç”¨çš„è¯­æ³•</h2>
<h3 id="1å°†ä¿¡æ¯å­˜æ”¾åˆ°æ¨¡æ¿-locals">1.å°†ä¿¡æ¯å­˜æ”¾åˆ°æ¨¡æ¿ locals</h3>
<pre><code>let n={a:12,b:23}
//åœ¨app.jsä¸­
app.locals.numInfo=n
//åœ¨å…¶ä»–æ–‡ä»¶ä¸­
req.app.locals.numInfo=n
</code></pre>
<blockquote>
<p>è§†å›¾ä¸­å£°æ˜</p>
</blockquote>
<pre><code>{{numInfo.a}}
</code></pre>
<blockquote>
<p>æ¸²æŸ“ç»“æœ</p>
</blockquote>
<pre><code>12
</code></pre>
<h1 id="8å‘é€åŸºæœ¬è¯·æ±‚postget">8.å‘é€åŸºæœ¬è¯·æ±‚ï¼ˆPOSTï¼ŒGETï¼‰</h1>
<h2 id="1åˆ›å»ºæœåŠ¡å™¨">1.åˆ›å»ºæœåŠ¡å™¨</h2>
<h2 id="2æ¸²æŸ“htmlé¡µé¢">2.æ¸²æŸ“htmlé¡µé¢</h2>
<blockquote>
<p>å‘æœåŠ¡å™¨å‘é€è¯·æ±‚è·å–åˆ°è¦æ¸²æŸ“çš„ç½‘é¡µï¼ˆhtmlæ–‡ä»¶ï¼‰</p>
</blockquote>
<h3 id="æ¸²æŸ“htmlæ–‡ä»¶çš„å‡ ç§æ–¹æ³•">æ¸²æŸ“htmlæ–‡ä»¶çš„å‡ ç§æ–¹æ³•</h3>
<ol>
<li>fsè¯»å–æ–‡ä»¶å‘é€</li>
</ol>
<pre><code>        fs.readFile(&quot;./view/add.html&quot;, {
            encoding: 'utf-8'
        }, function (err, data) {
            if (err) {
                res.writeHead(404, {
                    &quot;Content-Type&quot;: &quot;text/html&quot;
                });
                res.end(&quot;404&quot;);
            } else {
                res.writeHead(200, {
                    &quot;Content-Type&quot;: &quot;text/html&quot;
                });
                res.end(data)
            }
        })
</code></pre>
<ol start="2">
<li><code>res.sendFile()</code> å“åº”å‘é€æ–‡ä»¶çš„æ–¹å¼</li>
</ol>
<pre><code>res.sendFile(__dirname+'/index.html')
</code></pre>
<ol start="3">
<li><code>res.render('index.html') </code>æ¨¡æ¿å¼•æ“å“åº”æ–¹æ³•</li>
</ol>
<blockquote>
<p>éœ€è¦å…ˆé…ç½®æ¨¡æ¿å¼•æ“</p>
</blockquote>
<pre><code>res.render('index.html')
</code></pre>
<h2 id="3å°†è§†å›¾æ•°æ®æäº¤åˆ°åç«¯">3.å°†è§†å›¾æ•°æ®æäº¤åˆ°åç«¯</h2>
<blockquote>
<p>è¾“å…¥æ•°æ®ï¼Œç‚¹å‡»æäº¤ï¼Œå°†htmlæ•°æ®æäº¤åˆ°åç«¯</p>
</blockquote>
<ul>
<li>ä½¿ç”¨formæ—¶,å°†actionè®¾ç½®ä¸ºåç«¯è¦å¤„ç†çš„è·¯ç”±,inputè®¾ç½®nameå±æ€§æ¥æ”¶è¾“å…¥çš„æ•°æ®</li>
</ul>
<pre><code>//æäº¤è·¯å¾„ä¸º&quot;/myLogin&quot;,æ–¹æ³•ä¸ºpost
        &lt;form action=&quot;/myLogin&quot; method=&quot;post&quot;&gt;
            &lt;input type=&quot;text&quot; id=&quot;user&quot; name=&quot;user&quot;&gt;
            &lt;input type=&quot;password&quot; id=&quot;pwd&quot; name=&quot;pwd&quot;&gt;
            &lt;input type=&quot;submit&quot; value=&quot;ç™»å½•&quot;&gt;
        &lt;/form&gt;


</code></pre>
<ul>
<li>postè¯·æ±‚æ•°æ®åœ¨å“åº”å¤´ï¼Œgetè¯·æ±‚æ•°æ®ä¼šæ‹¼æ¥åœ¨urlè·¯å¾„ä¹‹å</li>
</ul>
<h2 id="4åˆ›å»ºè·¯ç”±å¤„ç†è§†å›¾æäº¤çš„æ•°æ®">4.åˆ›å»ºè·¯ç”±å¤„ç†è§†å›¾æäº¤çš„æ•°æ®</h2>
<blockquote>
<p>è·¯ç”±æ–‡ä»¶ä¸è§†å›¾æäº¤çš„è·¯å¾„ç›¸åŒ</p>
</blockquote>
<h3 id="åˆ›å»ºè·¯ç”±">åˆ›å»ºè·¯ç”±</h3>
<pre><code>//postè¯·æ±‚ä½¿ç”¨app.post()
app.post('/mylogin',function(req,res){

})
//getè¯·æ±‚ç”¨app.get()

</code></pre>
<h3 id="è·å–è§†å›¾æäº¤çš„æ•°æ®">è·å–è§†å›¾æäº¤çš„æ•°æ®</h3>
<blockquote>
<p>ç”±äºpostè¯·æ±‚æ•°æ®åœ¨å“åº”å¤´ï¼Œgetè¯·æ±‚æ•°æ®ä¼šæ‹¼æ¥åœ¨urlè·¯å¾„ä¹‹å</p>
</blockquote>
<h4 id="å¦‚æœæ˜¯getè¯·æ±‚">å¦‚æœæ˜¯getè¯·æ±‚</h4>
<blockquote>
<p>é€šè¿‡urlå†…ç½®æ¨¡å—è·å–åˆ°getå‘é€çš„è¯·æ±‚ï¼Œå¹¶é€šè¿‡url.parseæ–¹æ³•å°†æ•°æ®è½¬åŒ–ä¸ºå¯¹è±¡</p>
</blockquote>
<pre><code>//å¼•å…¥æ¨¡å—
const url=require('url')
//url.parseæ–¹æ³•å°†æ•°æ®è½¬åŒ–ä¸ºå¯¹è±¡
var paramobj = url.parse(req.url, true).query;
</code></pre>
<h4 id="å¦‚æœæ˜¯postè¯·æ±‚">å¦‚æœæ˜¯postè¯·æ±‚</h4>
<ul>
<li>æ–¹æ³•1.NodeåŸç”Ÿçš„httpæ¨¡å—ä¸­</li>
</ul>
<pre><code>é€šè¿‡ä¸€ä¸ªäº‹ä»¶ï¼šç›‘å¬æ˜¯å¦æœ‰æ•°æ®
 req.on(&quot;data&quot;,(chunk)=&gt;{
        console.log(chunk.toString());//chunkå°±æ˜¯ä¼ è¿‡æ¥çš„æ•°æ®,æ ¼å¼ä¸ºBuffer,é€šè¿‡toString()è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
        let obj=querystring.parse(chunk.toString())//å°†æ•°æ®è½¬åŒ–ä¸ºå¯¹è±¡
		}

</code></pre>
<ul>
<li>æ–¹æ³•2.Expressä¸­é—´ä»¶body-parserlosspm</li>
</ul>
<p>å¼•å…¥bodyParseræ¨¡å—<br>
è§£æ application/json<br>
è§£æ application/x-www-form-urlencoded</p>
<ul>
<li>æ‰“å°ç»“æœ</li>
</ul>
<pre><code>//å¼•å…¥bodyParseræ¨¡å—
const bodyParser=require('body-parser');
//è§£æ application/json
app.use(bodyParser.json());
//è§£æ application/x-www-form-urlencoded
app.use(bodyParser.urlencoded({extended:false}))
//åœ¨è·¯ç”±ä¸­æ‰“å°ç»“æœ
console.log(req.body);
</code></pre>
<h1 id="9å“åº”é™æ€æ–‡ä»¶">9.å“åº”é™æ€æ–‡ä»¶</h1>
<blockquote>
<p>ç”±äºå‘é€è¯·æ±‚æ—¶ï¼Œæ–‡ä»¶ä¸­çš„css,img,jsæ–‡ä»¶ä¹Ÿä¼šå‘é€è¯·æ±‚,æ•…éœ€è¦ä»¥ä¸‹æ–¹æ³•å“åº”èµ„æºã€‚</p>
</blockquote>
<h2 id="æ–¹æ³•1ä½¿ç”¨express">æ–¹æ³•1.ä½¿ç”¨express</h2>
<blockquote>
<p>å½“ä»¥/public/å¼€å¤´çš„æ—¶å€™,å»./public/ç›®å½•ä¸­æ‰¾åˆ°å¯¹åº”çš„èµ„æºï¼Œè¿™ç§æ–¹å¼æ›´å®¹æ˜“è¾¨è¯†ï¼Œä½¿ç”¨app.use()æ–¹æ³•ï¼Œexpress.static()æ–¹æ³•è§£æ</p>
</blockquote>
<h3 id="1-ç›´æ¥å“åº”publicä¸‹çš„ç›®å½•">1. ç›´æ¥å“åº”publicä¸‹çš„ç›®å½•</h3>
<pre><code>app.use('/public/',express.static('./public/'))
</code></pre>
<h3 id="2-å¿…é¡»æ˜¯å‚æ•°1ä¸ºåçš„ç›®å½•çš„èµ„æºå…·ä½“è·¯å¾„">2. å¿…é¡»æ˜¯å‚æ•°1ä¸ºåçš„ç›®å½•çš„èµ„æºå…·ä½“è·¯å¾„</h3>
<pre><code>app.use('/a/',express.static('./public/'))

//æ­¤æ—¶è®¿é—®publicä¸‹çš„é™æ€èµ„æº,å¿…é¡»ä½¿ç”¨/a/publicè®¿é—®

</code></pre>
<h3 id="3-å½“çœç•¥ç¬¬ä¸€ä¸ªå‚æ•°çš„æ—¶å€™åˆ™å¯ä»¥é€šè¿‡publicçš„æ–¹å¼æ¥è®¿é—®">3. å½“çœç•¥ç¬¬ä¸€ä¸ªå‚æ•°çš„æ—¶å€™,åˆ™å¯ä»¥é€šè¿‡/publicçš„æ–¹å¼æ¥è®¿é—®</h3>
<pre><code>app.use(express.static('./public/'))
</code></pre>
<h2 id="æ–¹æ³•2ä½¿ç”¨å†…ç½®æ¨¡å—path">æ–¹æ³•2.ä½¿ç”¨å†…ç½®æ¨¡å—path</h2>
<pre><code>const path=require('path')
app.use(express.static(path.join(_dirname,'public')))
</code></pre>
<h1 id="10åˆ›å»ºrouterè·¯ç”±è·¯ç”±ä¼˜åŒ–">10.åˆ›å»ºRouterè·¯ç”±ï¼ˆè·¯ç”±ä¼˜åŒ–ï¼‰</h1>
<h2 id="1è·¯ç”±å™¨ä¸­å¤„ç†">1.è·¯ç”±å™¨ä¸­å¤„ç†</h2>
<h3 id="1-1åˆ›å»ºroutesæ–‡ä»¶å¤¹">1-1.åˆ›å»ºroutesæ–‡ä»¶å¤¹</h3>
<blockquote>
<p>expressä¸­çš„Routerï¼ˆåˆ›å»ºrouteæ–‡ä»¶å¤¹ï¼‰ä½œç”¨å°±æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ›´å¥½çš„æ ¹æ®è·¯ç”±å»åˆ†æ¨¡å—ã€‚é¿å…å°†æ‰€æœ‰è·¯ç”±éƒ½å†™åœ¨å…¥å£æ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<h3 id="1-2åœ¨routesæ–‡ä»¶å¤¹é‡Œåˆ›å»ºè·¯ç”±å™¨">1-2.åœ¨routesæ–‡ä»¶å¤¹é‡Œåˆ›å»ºè·¯ç”±å™¨</h3>
<blockquote>
<p>å‡è®¾åˆ›å»ºä¸€ä¸ªuser.jsè·¯ç”±å™¨</p>
</blockquote>
<h3 id="1-3è·¯ç”±å™¨ä¸­çš„åŸºæœ¬æ­¥éª¤">1-3.è·¯ç”±å™¨ä¸­çš„åŸºæœ¬æ­¥éª¤</h3>
<ul>
<li>å¼•å…¥expressæ¨¡å—</li>
</ul>
<pre><code>const express=require('express');
</code></pre>
<ul>
<li>åˆ›å»ºè·¯ç”±å™¨å¯¹è±¡</li>
</ul>
<pre><code>let router=express.Router();
</code></pre>
<ul>
<li>å¾€è·¯ç”±å™¨ä¸­æŒ‚è½½è·¯ç”±</li>
</ul>
<blockquote>
<p>app.get() , app.post() , app.use() , app.all()<br>
åœ¨æ­¤å¤„å†™ç™»å½•ï¼Œæ³¨å†Œç­‰è·¯ç”±æ–¹æ³•</p>
</blockquote>
<pre><code>router.get('/login',(res,req)=&gt;{
	res.send('ç™»å½•')
})
</code></pre>
<ul>
<li>å¯¼å‡ºè·¯ç”±å™¨å¯¹è±¡</li>
</ul>
<pre><code>module.exports=router;
</code></pre>
<h2 id="2æœåŠ¡å™¨ä¸­å¤„ç†appjså…¥å£æ–‡ä»¶">2.æœåŠ¡å™¨ä¸­å¤„ç†(app.jså…¥å£æ–‡ä»¶)</h2>
<h3 id="2-1å¼•å…¥userè·¯ç”±å™¨">2-1.å¼•å…¥userè·¯ç”±å™¨</h3>
<pre><code>const userRouter=require('./routes/user.js')
console.log(userRouter)//æ‰“å°è·¯ç”±éªŒè¯æ˜¯å¦æ­£ç¡®
</code></pre>
<h3 id="2-2ä½¿ç”¨è·¯ç”±å™¨">2-2.ä½¿ç”¨è·¯ç”±å™¨</h3>
<blockquote>
<p>app.use()æ–¹æ³•<br>
ç»™æ¯ä¸ªè·¯ç”±å™¨ä¸‹çš„è·¯ç”±æ·»åŠ äº†å‰ç¼€</p>
</blockquote>
<pre><code>app.use('/user',userRouter);
&gt;å‚æ•°ä¸€ç»™æ¯ä¸ªè·¯ç”±å™¨ä¸‹çš„è·¯ç”±æ·»åŠ äº†å‰ç¼€,è®¿é—®æ—¶ç”±/loginå˜æˆ/user/login
&gt;userRouteræ˜¯å¼•å…¥çš„è·¯ç”±å™¨å˜é‡åç§°
</code></pre>
<p><strong>æ³¨æ„ï¼Œåˆ›å»ºindexé¦–é¡µè·¯ç”±å™¨æ—¶ï¼Œä½¿ç”¨è·¯ç”±å™¨ä¸éœ€è¦æ·»åŠ å‰ç¼€åç§°</strong></p>
<pre><code>app.use('/',indexRouter);
</code></pre>
<h3 id="æ–¹æ³•2å¼•å…¥userè·¯ç”±å™¨">æ–¹æ³•2ï¼šå¼•å…¥userè·¯ç”±å™¨</h3>
<pre><code>const router=require('./routes')
</code></pre>
<ul>
<li>ä½¿ç”¨è·¯ç”±å™¨</li>
</ul>
<pre><code>app.use(router)
</code></pre>
<h1 id="11ä¸­é—´ä»¶">11.ä¸­é—´ä»¶</h1>
<h2 id="ä¸€æ¦‚å¿µ">ä¸€.æ¦‚å¿µ</h2>
<blockquote>
<p>httpè¯·æ±‚ä¸­çš„è¿‡æ»¤å±‚ï¼ˆhttpè¯·æ±‚äº¤ç»™æ–¹æ³•å¤„ç†å‰ï¼Œå…ˆäº¤ç»™å¦ä¸€ä¸ªæ–¹æ³•è¿‡æ»¤ï¼‰ã€‚</p>
</blockquote>
<ul>
<li>ä¸­é—´ä»¶æ˜¯åœ¨è·å–è¯·æ±‚å’Œå‘é€å“åº”ä¹‹é—´åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ä»£ç </li>
<li>åº”ç”¨åœºæ™¯ï¼šåˆ¤æ–­ç™»å½•çŠ¶æ€,æ£€æµ‹RBSACæƒé™ï¼Œé”™è¯¯æ•è·ç­‰</li>
<li>ä¸­é—´ä»¶ä»£ç ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ</li>
</ul>
<h2 id="äºŒnextæ–¹æ³•">äºŒ.nextæ–¹æ³•</h2>
<blockquote>
<p>å¯ä»¥é’ˆå¯¹åŒä¸€ä¸ªè¯·æ±‚è®¾ç½®å¤šä¸ªä¸­é—´ä»¶ï¼Œå¯¹åŒä¸€ä¸ªè¯·æ±‚è¿›è¡Œå¤šæ¬¡å¤„ç†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯·æ±‚ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åŒ¹é…ä¸­é—´ä»¶ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œç»ˆæ­¢åŒ¹é…ã€‚è°ƒç”¨nextæ–¹æ³•&quot; nextï¼ˆï¼‰&quot;å°†è¯·æ±‚çš„æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œç›´åˆ°é‡åˆ°ç»“æŸè¯·æ±‚çš„ä¸­é—´ä»¶ã€‚</p>
</blockquote>
<pre><code>//app.use('/')ä¸­çš„'/'è¡¨ç¤ºè¯·æ±‚æ—¶è¯·æ±‚çš„åˆå§‹ä¸­é—´ä»¶ï¼Œå†™åœ¨æœ€ä¸Šé¢
app.use('/',(req,res,next)=&gt;{
    next() //ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªä¸­é—´ä»¶app.get()
})

app.get('/', (req, res) =&gt; {
    fs.readFile('./views/index.html', 'utf8', (err, data) =&gt; {
        if (err) {
            res.send(err)
        } else {
            res.send(data)  //é‡åˆ°ç»“æŸè¯·æ±‚çš„ä¸­é—´ä»¶åœæ­¢
        }
    })
})
</code></pre>
<blockquote>
<p>å¯ä»¥åœ¨next()æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªå‚æ•°err,å³next(err)ã€‚nextä¼ é€’erråˆ™åŒ¹é…ç¬¬ä¸€ä¸ªå«æœ‰errçš„ä¸­é—´ä»¶.ï¼ˆå¯ä»¥åœ¨fsæ¸²æŸ“htmlé¡µé¢æ—¶ä½¿ç”¨ï¼‰</p>
</blockquote>
<pre><code>app.use('/',(req,res,next)=&gt;{
	    fs.readFile('./views/index.html', 'utf8', (err, data) =&gt; {
        if (err) {
           next(err) //ä¼šè¿›å…¥å«æœ‰errçš„ä¸­é—´ä»¶
        } else {
            res.send(data)  //é‡åˆ°ç»“æŸè¯·æ±‚çš„ä¸­é—´ä»¶åœæ­¢
        }
    })
})


app.use((err,req, res, next) =&gt; {
    res.status(404).send(&quot;404é¡µé¢&quot;)
	// //htmlé¡µé¢
    // fs.readFile(&quot;./views/404.html&quot;,'utf8', (err, data) =&gt; {
    //     if (err) {
    //         res.send(err)
    //     }else{
    //         res.status(404).send(data)
    //     }
 
    // })
})
</code></pre>
<h2 id="ä¸‰ä¸»è¦ä½œç”¨">ä¸‰.ä¸»è¦ä½œç”¨</h2>
<blockquote>
<p>ä¸­é—´ä»¶å°±æ˜¯ä¸€å †æ–¹æ³•ï¼Œä¸»è¦ç”±ä¸­é—´ä»¶æ–¹æ³•ä»¥åŠè¯·æ±‚å¤„ç†å‡½æ•°ç»„æˆã€‚å¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ã€å¯ä»¥å¯¹è¯·æ±‚åšå‡ºå“åº”ï¼Œä¹Ÿå¯ä»¥å°†è¯·æ±‚ç»§ç»­äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ç»§ç»­å¤„ç†ã€‚</p>
</blockquote>
<figure data-type="image" tabindex="3"><img src="/api/public/image/files.0-1671695418551.png" alt="" loading="lazy"></figure>
<h3 id="1-é”™è¯¯å¤„ç†ä¸­é—´ä»¶">1.  é”™è¯¯å¤„ç†ä¸­é—´ä»¶</h3>
<h4 id="1è‡ªå®šä¹‰404é¡µé¢ç”±äºä¸­é—´ä»¶ä»ä¸Šå¾€ä¸‹æ‰§è¡Œæ•…åœ¨ä»£ç ä¸­è¦æ”¾åˆ°æœ€åå†™">1ï¼‰è‡ªå®šä¹‰404é¡µé¢ï¼ˆç”±äºä¸­é—´ä»¶ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ,æ•…åœ¨ä»£ç ä¸­è¦æ”¾åˆ°æœ€åå†™ï¼‰</h4>
<blockquote>
<p>å½“æ‰¾ä¸åˆ°åœ°å€æ çš„åœ°å€æ—¶ä½¿ç”¨è¯¥ä¸­é—´ä»¶</p>
</blockquote>
<pre><code>app.use((req, res, next) =&gt; {
    res.status(404).send(&quot;404é¡µé¢&quot;)
	// //htmlé¡µé¢
    // fs.readFile(&quot;./views/404.html&quot;,'utf8', (err, data) =&gt; {
    //     if (err) {
    //         res.send(err)
    //     }else{
    //         res.status(404).send(data)
    //     }
 
    // })
})
</code></pre>
<h4 id="2é”™è¯¯ç»Ÿä¸€å¤„ç†åœ¨fsè¯»æ–‡ä»¶æ—¶åœ¨å‡ºç°erræ—¶ä½¿ç”¨nexterrä¼ å…¥å¦å¤–ä¸€ä¸ªä¸­é—´ä»¶ç»Ÿä¸€å¤„ç†">2).é”™è¯¯ç»Ÿä¸€å¤„ç†(åœ¨fsè¯»æ–‡ä»¶æ—¶ï¼Œåœ¨å‡ºç°erræ—¶ä½¿ç”¨next(err)ä¼ å…¥å¦å¤–ä¸€ä¸ªä¸­é—´ä»¶ç»Ÿä¸€å¤„ç†)</h4>
<blockquote>
<p>é”™è¯¯å¤„ç†ä¸­é—´ä»¶æœ‰ 4 ä¸ªå‚æ•°ï¼Œå®šä¹‰é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ—¶å¿…é¡»ä½¿ç”¨è¿™ 4 ä¸ªå‚æ•°ã€‚å³ä½¿ä¸éœ€è¦ next å¯¹è±¡ï¼Œä¹Ÿå¿…é¡»åœ¨ç­¾åä¸­å£°æ˜å®ƒï¼Œå¦åˆ™ä¸­é—´ä»¶ä¼šè¢«è¯†åˆ«ä¸ºä¸€ä¸ªå¸¸è§„ä¸­é—´ä»¶ï¼Œä¸èƒ½å¤„ç†é”™è¯¯ã€‚</p>
</blockquote>
<blockquote>
<p>é”™è¯¯å¤„ç†ä¸­é—´ä»¶å’Œå…¶ä»–ä¸­é—´ä»¶å®šä¹‰ç±»ä¼¼ï¼Œåªæ˜¯è¦ä½¿ç”¨ 4 ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯ 3 ä¸ªï¼Œå…¶ç­¾åå¦‚ä¸‹ï¼š (err, req, res, next)ã€‚</p>
</blockquote>
<pre><code>router.get('/', (req, res,next) =&gt; {
    fs.readFile('./views/index.html', 'utf8', (err, data) =&gt; {
        if (err) {
            next(err)
            // res.send(err)
        } else {
            res.send(data)
        }
    })
})
// é”™è¯¯ç»Ÿä¸€å¤„ç†
    router.use((err,req,res,next)=&gt;{
        res.send('ç½‘ç»œé”™è¯¯/æ–‡ä»¶é”™è¯¯')
		console.log(err);
    })
</code></pre>
<blockquote>
<p>æ€»ç»“ï¼šé”™è¯¯å¤„ç†çš„ä¸­é—´ä»¶,ä¸€ä¸ªæ˜¯è®¾ç½®404é¡µé¢,ä¸€ä¸ªæ˜¯é”™è¯¯ç»Ÿä¸€å¤„ç†ã€‚<br>
<code>next()</code> nextä¸ä¼ å‚æ•°æ—¶ï¼šåŒ¹é…ä¸‹ä¸€ä¸ªurl<br>
<code>next(err)</code> nextä¼ é€’erråˆ™åŒ¹é…å«æœ‰ç¬¬ä¸€ä¸ªå«æœ‰errçš„ä¸­é—´ä»¶</p>
</blockquote>
<h3 id="2å†…ç½®ä¸­é—´ä»¶é…ç½®å“åº”é™æ€æ–‡ä»¶">2.å†…ç½®ä¸­é—´ä»¶ï¼ˆé…ç½®å“åº”é™æ€æ–‡ä»¶ï¼‰</h3>
<h4 id="è¯­æ³•">è¯­æ³•ï¼š</h4>
<pre><code>express.static(root, [options])
//ä¾‹ï¼Œç®€å•å“åº”publicé™æ€èµ„æºæ–¹æ³•
app.use(express.static('./public/'))
</code></pre>
<h4 id="ç²¾å¿ƒè®¾è®¡çš„å“åº”é™æ€èµ„æºæ–¹æ³•æ¨è">ç²¾å¿ƒè®¾è®¡çš„å“åº”é™æ€èµ„æºæ–¹æ³•(æ¨è)</h4>
<pre><code>var options = {
  dotfiles: 'ignore',
  etag: false,
  extensions: ['htm', 'html'],
  index: false,
  maxAge: '1d',
  redirect: false,
  setHeaders: function (res, path, stat) {
    res.set('x-timestamp', Date.now());
  }
}

app.use(express.static('public', options));

</code></pre>
<figure data-type="image" tabindex="4"><img src="/api/public/image/files.0-1671695449580.png" alt="" loading="lazy"></figure>
<h3 id="3å¸¸ç”¨ä¸­é—´ä»¶body-parserçš„ä½¿ç”¨">3.å¸¸ç”¨ä¸­é—´ä»¶body-parserçš„ä½¿ç”¨</h3>
<blockquote>
<p><a href="https://www.cnblogs.com/mywifeisMsHu/p/15628432.html">å¯ç”¨äºè§£æpostè¯·æ±‚ä½“</a><br>
body-parseræ˜¯ä¸€ä¸ªHTTPè¯·æ±‚ä½“è§£æä¸­é—´ä»¶ï¼Œä½¿ç”¨è¿™ä¸ªæ¨¡å—å¯ä»¥è§£æä¸åŒæ ¼å¼çš„è¯·æ±‚ä½“ï¼ŒExpressæ¡†æ¶ä¸­å°±æ˜¯ä½¿ç”¨è¿™ä¸ªæ¨¡å—åšä¸ºè¯·æ±‚ä½“è§£æä¸­é—´ä»¶ï¼Œæä¾›æ–¹æ³•å¦‚ä¸‹ï¼š</p>
</blockquote>
<ol>
<li>
<p>bodyParser.json(options)  è§£æJSONæ ¼å¼æ•°æ®</p>
</li>
<li>
<p>bodyParser.raw(options)  è§£æäºŒè¿›åˆ¶æ ¼å¼æ•°æ®ï¼ˆBufferæµæ•°æ®ï¼‰</p>
</li>
<li>
<p>bodyParser.text(options) è§£ææ–‡æœ¬æ ¼å¼æ•°æ®</p>
</li>
<li>
<p>bodyParser.urlencoded(options)  è§£æUTF-8çš„ç¼–ç æ•°æ®</p>
</li>
</ol>
<h3 id="4ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶">4.ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</h3>
<blockquote>
<p>expresså†…ç½®äº†å¾ˆå¤šç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ã€‚</p>
</blockquote>
<h3 id="5åº”ç”¨çº§ä¸­é—´ä»¶">5.åº”ç”¨çº§ä¸­é—´ä»¶</h3>
<blockquote>
<p>åº”ç”¨çº§ä¸­é—´ä»¶ç»‘å®šåˆ° app å¯¹è±¡ ä½¿ç”¨ app.use() å’Œ app.METHOD()ï¼Œ å…¶ä¸­ï¼Œ METHOD æ˜¯éœ€è¦å¤„ç†çš„ HTTP è¯·æ±‚çš„æ–¹æ³•ï¼Œä¾‹å¦‚ GET, PUT, POST ç­‰ç­‰ï¼Œå…¨éƒ¨å°å†™ã€‚</p>
</blockquote>
<h3 id="6è·¯ç”±çº§ä¸­é—´ä»¶">6.è·¯ç”±çº§ä¸­é—´ä»¶</h3>
<blockquote>
<p>è·¯ç”±çº§ä¸­é—´ä»¶å’Œåº”ç”¨çº§ä¸­é—´ä»¶ä¸€æ ·ï¼Œåªæ˜¯å®ƒç»‘å®šçš„å¯¹è±¡ä¸º express.Router()ã€‚<br>
è·¯ç”±çº§ä½¿ç”¨ router.use() æˆ– router.VERB() åŠ è½½</p>
</blockquote>

            </div>
            <div class="toc-container">
              <ul class="markdownIt-TOC">
<li><a href="#1-%E8%AE%A4%E8%AF%86nodejs">1. è®¤è¯†NodeJs</a>
<ul>
<li><a href="#%E8%AE%A4%E8%AF%86">è®¤è¯†</a></li>
<li><a href="#%E5%88%9D%E4%BD%93%E9%AA%8Crepl">åˆä½“éªŒ(REPL)</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">å¸¸ç”¨å‘½ä»¤</a></li>
<li><a href="#%E7%BB%83%E4%B9%A0">ç»ƒä¹ </a></li>
<li><a href="#2-node%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F">2. nodeæ¨¡å—ç³»ç»Ÿ</a>
<ul>
<li><a href="#2-1%E7%AE%80%E4%BB%8B">2-1.ç®€ä»‹</a>
<ul>
<li><a href="#2-1-1-ecmascript%E8%AF%AD%E6%B3%95%E5%8F%98%E9%87%8F%E5%88%A4%E6%96%AD%E5%BE%AA%E7%8E%AF%E7%AD%89">2-1-1. ECMAscriptè¯­æ³•ï¼šå˜é‡,åˆ¤æ–­,å¾ªç¯ç­‰ã€‚</a></li>
<li><a href="#2-1-2-%E5%86%85%E7%BD%AE%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97http%E6%A8%A1%E5%9D%97fs%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9Curl%E8%B7%AF%E5%BE%84path%E8%B7%AF%E5%BE%84%E6%A8%A1%E5%9D%97os%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F">2-1-2. å†…ç½®æ ¸å¿ƒæ¨¡å—ï¼šHTTPæ¨¡å—,fsæ–‡ä»¶æ“ä½œ,urlè·¯å¾„,pathè·¯å¾„æ¨¡å—,osæ“ä½œç³»ç»Ÿ</a></li>
<li><a href="#2-1-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97%E8%87%AA%E5%B7%B1%E5%88%9B%E5%BB%BA%E7%9A%84js">2-1-3. è‡ªå®šä¹‰æ¨¡å—ï¼ˆè‡ªå·±åˆ›å»ºçš„jsï¼‰</a>
<ul>
<li><a href="#1-3-1%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97%E6%AD%A5%E9%AA%A4">1-3-1.è‡ªå®šä¹‰æ¨¡å—æ­¥éª¤</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2-1-4-%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97">2-1-4. ç¬¬ä¸‰æ–¹æ¨¡å—</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97">3.å¸¸ç”¨å†…ç½®æ¨¡å—</a>
<ul>
<li><a href="#os">OS</a></li>
<li><a href="#path">path</a>
<ul>
<li><a href="#%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6%E5%90%8D">è¾“å‡ºæ–‡ä»¶å</a></li>
<li><a href="#%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AApath%E7%9A%84%E7%9B%AE%E5%BD%95%E5%90%8D">è¿”å›ä¸€ä¸ªpathçš„ç›®å½•å</a></li>
<li><a href="#%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%A1%A8%E7%A4%BApath%E7%9A%84%E5%85%83%E7%B4%A0">è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å±æ€§è¡¨ç¤ºpathçš„å…ƒç´ </a></li>
</ul>
</li>
<li><a href="#file-%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C">file  è¯»å†™æ–‡ä»¶æ“ä½œ</a>
<ul>
<li><a href="#1%E8%AF%BB-fsreadfile">1.è¯» fs.readFile()</a></li>
<li><a href="#2%E5%86%99-fswrite">2.å†™ fs.write()</a></li>
</ul>
</li>
<li><a href="#http">http</a></li>
<li><a href="#url">url</a>
<ul>
<li><a href="#%E8%A7%A3%E6%9E%90url%E5%9C%B0%E5%9D%80">è§£æURLåœ°å€</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%B9%E6%B3%95">4.è¯·æ±‚ä¸å“åº”çš„ä¸€äº›æ–¹æ³•</a>
<ul>
<li><a href="#1-request">1. request</a>
<ul>
<li><a href="#1-1-requestmethod">1-1. <code>request.method</code></a></li>
<li><a href="#1-2-requesturl">1-2. <code>request.url</code></a></li>
<li><a href="#1-3-requestbody">1-3. <code>request.body</code></a></li>
<li><a href="#1-4-requestquery">1-4. <code>request.query</code></a></li>
</ul>
</li>
<li><a href="#2-response">2. response</a>
<ul>
<li><a href="#2-1-responseendtext">2-1. <code>response.end(&quot;text&quot;);</code></a></li>
<li><a href="#2-2-responsewrite%E5%86%85%E5%AE%B9">2-2. <code>response.write(&quot;å†…å®¹&quot;)</code></a></li>
<li><a href="#2-3-responsewritehead200">2-3. <code>response.writeHeadï¼ˆ&quot;200&quot;ï¼‰</code></a></li>
<li><a href="#2-4responsesetheaderlocation">2-4.<code>response.setHeader('Location','/')</code></a></li>
<li><a href="#2-5-resstatuscode320">2-5. <code>res.statusCode=320</code></a></li>
<li><a href="#2-6%E4%B8%89%E7%A7%8D%E5%93%8D%E5%BA%94%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95">2-6.ä¸‰ç§&quot;å“åº”å­—ç¬¦ä¸²&quot;æ–¹æ³•</a></li>
<li><a href="#2-7%E9%87%8D%E5%AE%9A%E5%90%91-resredirect">2-7.é‡å®šå‘ <code>res.redirect(&quot;/&quot;)</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5-npm%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">5. npmçš„åŸºæœ¬ä½¿ç”¨</a>
<ul>
<li><a href="#1%E7%AE%80%E4%BB%8B">1.ç®€ä»‹</a></li>
<li><a href="#2%E5%AE%89%E8%A3%85">2.å®‰è£…</a></li>
<li><a href="#3%E4%BD%BF%E7%94%A8">3.ä½¿ç”¨</a>
<ul>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96">åˆå§‹åŒ–</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97">å®‰è£…æ¨¡å—</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85%E5%8F%82%E6%95%B0">å®‰è£…å‚æ•°</a></li>
</ul>
</li>
<li><a href="#%E5%8D%B8%E8%BD%BD%E6%A8%A1%E5%9D%97">å¸è½½æ¨¡å—</a></li>
<li><a href="#%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%9D%97">æŸ¥çœ‹æ¨¡å—</a></li>
</ul>
</li>
<li><a href="#4%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4">4.å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…å‘½ä»¤</a>
<ul>
<li><a href="#1-nodemon">1.  nodemon</a></li>
<li><a href="#2momentjs">2.momentJs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6-express">6. Express</a>
<ul>
<li><a href="#express%E7%AE%80%E4%BB%8B">Expressç®€ä»‹</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8">ä½¿ç”¨</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E5%A4%B9">åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹</a></li>
<li><a href="#%E5%AE%89%E8%A3%85express%E6%A1%86%E6%9E%B6">å®‰è£…expressæ¡†æ¶</a></li>
<li><a href="#%E5%88%9B%E5%BB%BAserver%E6%9C%8D%E5%8A%A1">åˆ›å»ºserveræœåŠ¡</a></li>
</ul>
</li>
<li><a href="#express%E8%B7%AF%E7%94%B1">Expressè·¯ç”±</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">åŸºæœ¬è¯­æ³•</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#7%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E">7.æ¨¡æ¿å¼•æ“</a>
<ul>
<li><a href="#1%E7%AE%80%E4%BB%8B-2">1.ç®€ä»‹</a></li>
<li><a href="#2%E5%AE%89%E8%A3%85-2">2.å®‰è£…</a></li>
<li><a href="#3%E4%BD%BF%E7%94%A8-2">3.ä½¿ç”¨</a></li>
<li><a href="#4%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AF%AD%E6%B3%95">4.å¸¸ç”¨çš„è¯­æ³•</a>
<ul>
<li><a href="#1%E5%B0%86%E4%BF%A1%E6%81%AF%E5%AD%98%E6%94%BE%E5%88%B0%E6%A8%A1%E6%9D%BF-locals">1.å°†ä¿¡æ¯å­˜æ”¾åˆ°æ¨¡æ¿ locals</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#8%E5%8F%91%E9%80%81%E5%9F%BA%E6%9C%AC%E8%AF%B7%E6%B1%82postget">8.å‘é€åŸºæœ¬è¯·æ±‚ï¼ˆPOSTï¼ŒGETï¼‰</a>
<ul>
<li><a href="#1%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8">1.åˆ›å»ºæœåŠ¡å™¨</a></li>
<li><a href="#2%E6%B8%B2%E6%9F%93html%E9%A1%B5%E9%9D%A2">2.æ¸²æŸ“htmlé¡µé¢</a>
<ul>
<li><a href="#%E6%B8%B2%E6%9F%93html%E6%96%87%E4%BB%B6%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95">æ¸²æŸ“htmlæ–‡ä»¶çš„å‡ ç§æ–¹æ³•</a></li>
</ul>
</li>
<li><a href="#3%E5%B0%86%E8%A7%86%E5%9B%BE%E6%95%B0%E6%8D%AE%E6%8F%90%E4%BA%A4%E5%88%B0%E5%90%8E%E7%AB%AF">3.å°†è§†å›¾æ•°æ®æäº¤åˆ°åç«¯</a></li>
<li><a href="#4%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1%E5%A4%84%E7%90%86%E8%A7%86%E5%9B%BE%E6%8F%90%E4%BA%A4%E7%9A%84%E6%95%B0%E6%8D%AE">4.åˆ›å»ºè·¯ç”±å¤„ç†è§†å›¾æäº¤çš„æ•°æ®</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1">åˆ›å»ºè·¯ç”±</a></li>
<li><a href="#%E8%8E%B7%E5%8F%96%E8%A7%86%E5%9B%BE%E6%8F%90%E4%BA%A4%E7%9A%84%E6%95%B0%E6%8D%AE">è·å–è§†å›¾æäº¤çš„æ•°æ®</a>
<ul>
<li><a href="#%E5%A6%82%E6%9E%9C%E6%98%AFget%E8%AF%B7%E6%B1%82">å¦‚æœæ˜¯getè¯·æ±‚</a></li>
<li><a href="#%E5%A6%82%E6%9E%9C%E6%98%AFpost%E8%AF%B7%E6%B1%82">å¦‚æœæ˜¯postè¯·æ±‚</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#9%E5%93%8D%E5%BA%94%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6">9.å“åº”é™æ€æ–‡ä»¶</a>
<ul>
<li><a href="#%E6%96%B9%E6%B3%951%E4%BD%BF%E7%94%A8express">æ–¹æ³•1.ä½¿ç”¨express</a>
<ul>
<li><a href="#1-%E7%9B%B4%E6%8E%A5%E5%93%8D%E5%BA%94public%E4%B8%8B%E7%9A%84%E7%9B%AE%E5%BD%95">1. ç›´æ¥å“åº”publicä¸‹çš„ç›®å½•</a></li>
<li><a href="#2-%E5%BF%85%E9%A1%BB%E6%98%AF%E5%8F%82%E6%95%B01%E4%B8%BA%E5%90%8D%E7%9A%84%E7%9B%AE%E5%BD%95%E7%9A%84%E8%B5%84%E6%BA%90%E5%85%B7%E4%BD%93%E8%B7%AF%E5%BE%84">2. å¿…é¡»æ˜¯å‚æ•°1ä¸ºåçš„ç›®å½•çš„èµ„æºå…·ä½“è·¯å¾„</a></li>
<li><a href="#3-%E5%BD%93%E7%9C%81%E7%95%A5%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E6%97%B6%E5%80%99%E5%88%99%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87public%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9D%A5%E8%AE%BF%E9%97%AE">3. å½“çœç•¥ç¬¬ä¸€ä¸ªå‚æ•°çš„æ—¶å€™,åˆ™å¯ä»¥é€šè¿‡/publicçš„æ–¹å¼æ¥è®¿é—®</a></li>
</ul>
</li>
<li><a href="#%E6%96%B9%E6%B3%952%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97path">æ–¹æ³•2.ä½¿ç”¨å†…ç½®æ¨¡å—path</a></li>
</ul>
</li>
<li><a href="#10%E5%88%9B%E5%BB%BArouter%E8%B7%AF%E7%94%B1%E8%B7%AF%E7%94%B1%E4%BC%98%E5%8C%96">10.åˆ›å»ºRouterè·¯ç”±ï¼ˆè·¯ç”±ä¼˜åŒ–ï¼‰</a>
<ul>
<li><a href="#1%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%AD%E5%A4%84%E7%90%86">1.è·¯ç”±å™¨ä¸­å¤„ç†</a>
<ul>
<li><a href="#1-1%E5%88%9B%E5%BB%BAroutes%E6%96%87%E4%BB%B6%E5%A4%B9">1-1.åˆ›å»ºroutesæ–‡ä»¶å¤¹</a></li>
<li><a href="#1-2%E5%9C%A8routes%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8C%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1%E5%99%A8">1-2.åœ¨routesæ–‡ä»¶å¤¹é‡Œåˆ›å»ºè·¯ç”±å™¨</a></li>
<li><a href="#1-3%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%AD%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4">1-3.è·¯ç”±å™¨ä¸­çš„åŸºæœ¬æ­¥éª¤</a></li>
</ul>
</li>
<li><a href="#2%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E5%A4%84%E7%90%86appjs%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6">2.æœåŠ¡å™¨ä¸­å¤„ç†(app.jså…¥å£æ–‡ä»¶)</a>
<ul>
<li><a href="#2-1%E5%BC%95%E5%85%A5user%E8%B7%AF%E7%94%B1%E5%99%A8">2-1.å¼•å…¥userè·¯ç”±å™¨</a></li>
<li><a href="#2-2%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8">2-2.ä½¿ç”¨è·¯ç”±å™¨</a></li>
<li><a href="#%E6%96%B9%E6%B3%952%E5%BC%95%E5%85%A5user%E8%B7%AF%E7%94%B1%E5%99%A8">æ–¹æ³•2ï¼šå¼•å…¥userè·¯ç”±å™¨</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#11%E4%B8%AD%E9%97%B4%E4%BB%B6">11.ä¸­é—´ä»¶</a>
<ul>
<li><a href="#%E4%B8%80%E6%A6%82%E5%BF%B5">ä¸€.æ¦‚å¿µ</a></li>
<li><a href="#%E4%BA%8Cnext%E6%96%B9%E6%B3%95">äºŒ.nextæ–¹æ³•</a></li>
<li><a href="#%E4%B8%89%E4%B8%BB%E8%A6%81%E4%BD%9C%E7%94%A8">ä¸‰.ä¸»è¦ä½œç”¨</a>
<ul>
<li><a href="#1-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%AD%E9%97%B4%E4%BB%B6">1.  é”™è¯¯å¤„ç†ä¸­é—´ä»¶</a>
<ul>
<li><a href="#1%E8%87%AA%E5%AE%9A%E4%B9%89404%E9%A1%B5%E9%9D%A2%E7%94%B1%E4%BA%8E%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%BB%8E%E4%B8%8A%E5%BE%80%E4%B8%8B%E6%89%A7%E8%A1%8C%E6%95%85%E5%9C%A8%E4%BB%A3%E7%A0%81%E4%B8%AD%E8%A6%81%E6%94%BE%E5%88%B0%E6%9C%80%E5%90%8E%E5%86%99">1ï¼‰è‡ªå®šä¹‰404é¡µé¢ï¼ˆç”±äºä¸­é—´ä»¶ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ,æ•…åœ¨ä»£ç ä¸­è¦æ”¾åˆ°æœ€åå†™ï¼‰</a></li>
<li><a href="#2%E9%94%99%E8%AF%AF%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86%E5%9C%A8fs%E8%AF%BB%E6%96%87%E4%BB%B6%E6%97%B6%E5%9C%A8%E5%87%BA%E7%8E%B0err%E6%97%B6%E4%BD%BF%E7%94%A8nexterr%E4%BC%A0%E5%85%A5%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86">2).é”™è¯¯ç»Ÿä¸€å¤„ç†(åœ¨fsè¯»æ–‡ä»¶æ—¶ï¼Œåœ¨å‡ºç°erræ—¶ä½¿ç”¨next(err)ä¼ å…¥å¦å¤–ä¸€ä¸ªä¸­é—´ä»¶ç»Ÿä¸€å¤„ç†)</a></li>
</ul>
</li>
<li><a href="#2%E5%86%85%E7%BD%AE%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%93%8D%E5%BA%94%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6">2.å†…ç½®ä¸­é—´ä»¶ï¼ˆé…ç½®å“åº”é™æ€æ–‡ä»¶ï¼‰</a>
<ul>
<li><a href="#%E8%AF%AD%E6%B3%95">è¯­æ³•ï¼š</a></li>
<li><a href="#%E7%B2%BE%E5%BF%83%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%93%8D%E5%BA%94%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%96%B9%E6%B3%95%E6%8E%A8%E8%8D%90">ç²¾å¿ƒè®¾è®¡çš„å“åº”é™æ€èµ„æºæ–¹æ³•(æ¨è)</a></li>
</ul>
</li>
<li><a href="#3%E5%B8%B8%E7%94%A8%E4%B8%AD%E9%97%B4%E4%BB%B6body-parser%E7%9A%84%E4%BD%BF%E7%94%A8">3.å¸¸ç”¨ä¸­é—´ä»¶body-parserçš„ä½¿ç”¨</a></li>
<li><a href="#4%E7%AC%AC%E4%B8%89%E6%96%B9%E4%B8%AD%E9%97%B4%E4%BB%B6">4.ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</a></li>
<li><a href="#5%E5%BA%94%E7%94%A8%E7%BA%A7%E4%B8%AD%E9%97%B4%E4%BB%B6">5.åº”ç”¨çº§ä¸­é—´ä»¶</a></li>
<li><a href="#6%E8%B7%AF%E7%94%B1%E7%BA%A7%E4%B8%AD%E9%97%B4%E4%BB%B6">6.è·¯ç”±çº§ä¸­é—´ä»¶</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </article>
      </div>

      
      <div class="next-post">
        <div class="next">ä¸‹ä¸€ç¯‡</div>
        <a href="https://qin_hu.gitee.io/blog/post/chuang-ye/">
          <h3 class="post-title">
            éšç¬”
          </h3>
        </a>
      </div>
      

      

      <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://qin_hu.gitee.io/blog//atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>
<div id="backtop">
    <a href="#backtop" class="backTop" title="å›åˆ°é¡¶éƒ¨">
        <svg t="1702280870845" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="5528" width="50" height="50">
            <path
                d="M679.936 482.176l0.32-0.32-157.44-157.44c-6.912-6.912-18.112-6.912-25.024 0L342.4 479.872 342.592 480c-10.88 11.776-6.208 34.624 10.816 51.648s39.872 21.632 51.648 10.816L405.12 542.592l62.336-62.336 0 195.648c0 24 19.392 43.52 43.392 43.52s43.392-19.52 43.392-43.52L554.24 481.28l61.696 61.696c0.064 0.064 0.064 0.064 0.128 0.128l0.128 0.064 1.408 1.408 0.192-0.192c12.032 9.728 33.984 4.928 50.56-11.584C684.8 516.16 689.6 494.208 679.936 482.176z"
                fill="#8F9EB230" p-id="5529"></path>
            <path
                d="M512 64C264.576 64 64 264.576 64 512s200.576 448 448 448c247.36 0 448-200.64 448-448S759.36 64 512 64zM512 864.256c-194.56 0-352.192-157.76-352.192-352.256C159.808 317.504 317.44 159.808 512 159.808c194.496 0 352.192 157.696 352.192 352.192C864.192 706.496 706.496 864.256 512 864.256z"
                fill="#8F9EB230" p-id="5530"></path>
        </svg>
    </a>
</div>
<style>
.backTop {
  width: 50px;
  height: 50px;
  position: fixed;
  bottom: 50px;
  right: 50px;
  text-align: center;
  line-height: 50px;
  transition: .5s ease-in-out;

}

.backTop:hover {
  transform: translateY(15px);
}

#backtop {
  position: absolute;
  top: 0px;
  z-index: 100;
  opacity: 0;
}
</style>
<script>
    const bodyDom = document.querySelector('body')
    const backTopDom = document.querySelector('#backtop')
    document.addEventListener('scroll', (e) => {
        // console.log(bodyDom.scrollTop)
        if (bodyDom.scrollTop > 3550) {
            backTopDom.style.opacity = 1
        } else {
            backTopDom.style.opacity = 0
        }
    })
</script>
      <!-- <div class="theme">
    <input class="switch-input" id="theme-switch" type="checkbox">
    <label class="switch-control" for="theme-switch"></label>
    <div class="container"></div>
</div>
 -->
    </div>
  </div>

  <script>
    // hljs.initHighlightingOnLoad()
    // hljs.highlightAll();
    document.addEventListener('DOMContentLoaded', () => {
      hljs.highlightAll();
    });
    let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

    // This should probably be throttled.
    // Especially because it triggers during smooth scrolling.
    // https://lodash.com/docs/4.17.10#throttle
    // You could do like...
    // window.addEventListener("scroll", () => {
    //    _.throttle(doThatStuff, 100);
    // });
    // Only not doing it here to keep this Pen dependency-free.

    window.addEventListener("scroll", event => {
      let fromTop = window.scrollY;

      mainNavLinks.forEach((link, index) => {
        let section = document.getElementById(decodeURI(link.hash).substring(1));
        let nextSection = null
        if (mainNavLinks[index + 1]) {
          nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
        }
        if (section.offsetTop <= fromTop) {
          if (nextSection) {
            if (nextSection.offsetTop > fromTop) {
              link.classList.add("current");
            } else {
              link.classList.remove("current");
            }
          } else {
            link.classList.add("current");
          }
        } else {
          link.classList.remove("current");
        }
      });
    });
  </script>
</body>

</html>